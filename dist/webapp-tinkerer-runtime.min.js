!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.WAT,r=e.WAT={};t(r),r.noConflict=function(){return e.WAT=n,r}}())}(this,(function(e){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function i(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var s={exports:{}};!function(e,t){e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(!s&&l)return l(a);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return o(n||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var i=l,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(c),l=e.document.createTextNode("");a.observe(l,{characterData:!0}),n=function(){l.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var s=new e.MessageChannel;s.port1.onmessage=c,n=function(){s.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function f(e){1!==u.push(e)||r||n()}t.exports=f}).call(this,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],l=["FULFILLED"],s=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var l=h(a);"error"===l.status&&r(l.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function v(e){return e instanceof this?e:i.resolve(new this(o),e)}function g(e){var t=new this(o);return i.reject(t,e)}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),l=0,s=-1,u=new this(o);++s<n;)c(e[s],s);return u;function c(e,o){function s(e){a[o]=e,++l!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(s,(function(e){r||(r=!0,i.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,l=new this(o);++a<n;)s(e[a]);return l;function s(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(l,e))}),(function(e){r||(r=!0,i.reject(l,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===l||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==s?f(n,this.state===l?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){i.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=h(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=l,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=v,u.reject=g,u.all=m,u.race=b},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function l(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",v=void 0,g={},m=Object.prototype.toString,b="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function x(e){return new u((function(t){var n=e.transaction(h,y),r=s([""]);n.objectStore(h).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function O(e){return"boolean"==typeof v?u.resolve(v):x(e).then((function(e){return v=e}))}function C(e){var t=g[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function I(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function A(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new u((function(n,r){if(g[e.name]=g[e.name]||V(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),I(e)}}))}function P(e){return S(e,!1)}function T(e){return S(e,!0)}function M(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function E(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function j(e){return s([w(atob(e.data))],{type:e.type})}function k(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(n,e,e),n}function B(e){C(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,P(e).then((function(t){return e.db=t,M(e)?T(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw A(e,t),t}))}function W(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return B(e).then((function(){W(e,t,n,r-1)}))})).catch(n);n(o)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=V(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var i=[];function a(){return u.resolve()}for(var l=0;l<o.forages.length;l++){var s=o.forages[l];s!==t&&i.push(s._initReady().catch(a))}var c=o.forages.slice(0);return u.all(i).then((function(){return n.db=o.db,P(n)})).then((function(e){return n.db=e,M(n,t._defaultConfig.version)?T(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var i=c[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function _(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){W(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),k(e)&&(e=j(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function L(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){W(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),l=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;k(r)&&(r=j(r));var o=e(r,n.key,l++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function R(e,t,n){var r=this;e=d(e);var o=new u((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===m.call(t)?O(i.db).then((function(e){return e?t:E(t)})):t})).then((function(t){W(r._dbInfo,y,(function(i,a){if(i)return o(i);try{var l=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=l.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return c(o,n),o}function D(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){W(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){W(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function U(e){var t=this,n=new u((function(e,n){t.ready().then((function(){W(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function H(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){W(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),l=!1,s=a.openKeyCursor();s.onsuccess=function(){var n=s.result;n?0===e||l?t(n.key):(l=!0,n.advance(e)):t(null)},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function q(e){var t=this,n=new u((function(e,n){t.ready().then((function(){W(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function $(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):P(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;C(e);var r=g[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var l=o[i];l._dbInfo.db=null,l._dbInfo.version=n}return new u((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,I(n._dbInfo)}})).catch((function(t){throw(A(e,t)||u.resolve()).catch((function(){})),t}))}})):i.then((function(t){C(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new u((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)I(r[t]._dbInfo)})).catch((function(t){throw(A(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return c(r,t),r}var J={_driver:"asyncStorage",_initStorage:F,_support:l(),iterate:L,getItem:_,setItem:R,removeItem:D,clear:z,length:U,key:H,keys:q,dropInstance:$};function G(){return"function"==typeof openDatabase}var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Y=X.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",le="ur16",se="ui32",ue="fl32",ce="fl64",fe=Y+ee.length,de=Object.prototype.toString;function pe(e){var t,n,r,o,i,a=.75*e.length,l=e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<l;t+=4)n=Z.indexOf(e[t]),r=Z.indexOf(e[t+1]),o=Z.indexOf(e[t+2]),i=Z.indexOf(e[t+3]),c[s++]=n<<2|r>>4,c[s++]=(15&r)<<4|o>>2,c[s++]=(3&o)<<6|63&i;return u}function he(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Z[n[t]>>2],r+=Z[(3&n[t])<<4|n[t+1]>>4],r+=Z[(15&n[t+1])<<2|n[t+2]>>6],r+=Z[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ve(e,t){var n="";if(e&&(n=de.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var r,o=X;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=le:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=se:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=ce:t(new Error("Failed to get type for BinaryArray"))),t(o+he(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=K+e.type+"~"+he(this.result);t(X+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ge(e){if(e.substring(0,Y)!==X)return JSON.parse(e);var t,n=e.substring(fe),r=e.substring(Y,fe);if(r===te&&Q.test(n)){var o=n.match(Q);t=o[1],n=n.substring(o[0].length)}var i=pe(n);switch(r){case ee:return i;case te:return s([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case le:return new Uint16Array(i);case ae:return new Int32Array(i);case se:return new Uint32Array(i);case ue:return new Float32Array(i);case ce:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var me={serialize:ve,deserialize:ge,stringToBuffer:pe,bufferToString:he};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){be(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=me,o}function we(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,l){l.rows.length?i(e,a):be(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function xe(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Oe(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,l=0;l<a;l++){var s=i.item(l),u=s.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,s.key,l+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Ce(e,t,n,r){var o=this;e=d(e);var i=new u((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var l=t,s=o._dbInfo;s.serializer.serialize(t,(function(t,u){u?a(u):s.db.transaction((function(n){we(n,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(l)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ce.apply(o,[e,l,n,r-1]));a(t)}}))}))})).catch(a)}));return c(i,n),i}function Ie(e,t,n){return Ce.apply(this,[e,t,n,1])}function Ae(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Se(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Pe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Te(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Me(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Ee(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function je(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return c(r=e.name?new u((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ee(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function o(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,l=e.storeNames.length;a<l;a++)i.push(o(e.storeNames[a]));u.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),t),r}var ke={_driver:"webSQLStorage",_initStorage:ye,_support:G(),iterate:Oe,getItem:xe,setItem:Ie,removeItem:Ae,clear:Se,length:Pe,key:Te,keys:Me,dropInstance:je};function Ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Be(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function We(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Ve(){return!We()||localStorage.length>0}function Fe(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Be(e,t._defaultConfig),Ve()?(t._dbInfo=n,n.serializer=me,u.resolve()):u.reject()}function _e(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(n,e),n}function Le(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return c(r,t),r}function Re(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,l=0;l<i;l++){var s=localStorage.key(l);if(0===s.indexOf(r)){var u=localStorage.getItem(s);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,s.substring(o),a++)))return u}}}));return c(r,t),r}function De(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return c(r,t),r}function ze(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return c(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t}function He(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(r,t),r}function qe(e,t,n){var r=this;e=d(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return c(o,n),o}function $e(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return c(r=e.name?new u((function(t){e.storeName?t(Be(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),t),r}var Je={_driver:"localStorageWrapper",_initStorage:Fe,_support:Ne(),iterate:Re,getItem:Le,setItem:qe,removeItem:He,clear:_e,length:Ue,key:De,keys:ze,dropInstance:$e},Ge=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ze=function(e,t){for(var n=e.length,r=0;r<n;){if(Ge(e[r],t))return!0;r++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Xe={},Ye={INDEXEDDB:J,WEBSQL:ke,LOCALSTORAGE:Je},et=[Ye.INDEXEDDB._driver,Ye.WEBSQL._driver,Ye.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=new(function(){function e(t){for(var n in o(this,e),Ye)if(Ye.hasOwnProperty(n)){var r=Ye[n],i=r._driver;this[n]=i,Qe[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,l=i.length;a<l;a++){var s=i[a];if((!Ze(tt,s)||e[s])&&"function"!=typeof e[s])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return c(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}}();var f=function(n){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Xe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return f(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Qe[e]?u.resolve(Qe[e]):u.reject(new Error("Driver not found."));return f(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(me);return f(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ke(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function l(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var l=new Error("No available storage method found.");return r._driverSet=u.reject(l),r._driverSet}return n()}}var s=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=s.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=l(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),f(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=at},{3:3}]},{},[4])(4)}(s);var u=s.exports,c=Function("return this")();function f(e,t){return null==e||"hasOwnProperty"in e&&"function"==typeof e.hasOwnProperty?e.hasOwnProperty(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return null==e||"isPrototypeOf"in e&&"function"==typeof e.isPrototypeOf?e.isPrototypeOf(t):Object.prototype.isPrototypeOf.call(e,t)}function p(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function h(e){return"boolean"==typeof e||e instanceof Boolean}function v(e){return"number"==typeof e||e instanceof Number}function g(e){return("number"==typeof e||e instanceof Number)&&isFinite(e.valueOf())}function m(e){return("number"==typeof e||e instanceof Number)&&isNaN(e.valueOf())}function b(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),!v(e)||isNaN(e))return!1;if(g(t)){if(g(n)){if(e<t||!r&&e===t||e>n||!o&&e===n)return!1}else if(e<t||!r&&e===t)return!1}else if(g(n)&&(e>n||!o&&e===n))return!1;return!0}function y(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e)}function w(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e&&e>=0)}function x(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e&&e>=1)}function O(e){return"string"==typeof e||e instanceof String}var C=/^\s*$/;function I(e){return("string"==typeof e||e instanceof String)&&!C.test(e.valueOf())}function A(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}var S=/^[^\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function P(e){return A(e,S)}var T=/^[^\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function M(e){return A(e,T)}function E(e){return"function"==typeof e}function j(e){return"function"==typeof e&&(null==e.name||""===e.name)}function k(e){return"function"==typeof e&&null!=e.name&&""!==e.name}function N(e){return"function"==typeof e&&/^function\s*[^(]*\(\)\s*\{\s*\[native code\]\s*\}\s*$/.test(e.toString())}function B(e){return"function"==typeof e&&!/^function\s*[^(]*\(\)\s*\{\s*\[native code\]\s*\}\s*$/.test(e.toString())}function W(e){return null!=e&&"object"==typeof e}function V(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function F(e){return null!=e&&"object"==typeof e&&!(e instanceof Object)}var _=Array.isArray;function L(e,t,n){if(_(e)){for(var r=0,o=e.length;r<o;r++)if(void 0===e[r])return!1;return!(null!=t&&e.length<t)&&!(null!=n&&e.length>n)}return!1}function R(e,t,n,r){if(_(e))try{for(var o=0,i=e.length;o<i;o++)if(0==t(e[o]))return!1;return!(null!=n&&e.length<n)&&!(null!=r&&e.length>r)}catch(e){}return!1}function D(e){return e instanceof Date}function z(e){return e instanceof Error}function U(e){return null!=e&&"function"==typeof e.then}function H(e){return e instanceof RegExp}function q(e,t){return t.indexOf(e)>=0}function $(e){return O(e)&&(qn.hasOwnProperty(e)||/^#[a-fA-F0-9]{6}$/.test(e)||/^#[a-fA-F0-9]{8}$/.test(e)||/^rgb\([0-9]+,\s*[0-9]+,\s*[0-9]+\)$/.test(e)||/^rgba\([0-9]+,\s*[0-9]+,\s*[0-9]+,([01]|[0]?[.][0-9]+)\)$/.test(e))}var J=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function G(e){return A(e,J)}var Z=/^[^\s\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function K(e){if(!A(e,Z)||""===e)return!1;try{return new URL(e,"file://"),!0}catch(e){return!1}}var Q=!1,X=!0;function Y(e,t,n,r,o){if(null==t){if(r)return t;p("MissingArgument: no "+Fn(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else p("InvalidArgument: the given "+Fn(e)+" is no valid "+Fn(o))}function ee(e,t,n){var r=function(r,o){return Y(r,o,e,t,n)},o=e.name;return null!=o&&/^ValueIs/.test(o)?te(r,o.replace(/^ValueIs/,t?"allow":"expect")):r}function te(e,t){if(null==e&&p("MissingArgument: no function given"),"function"!=typeof e&&p("InvalidArgument: the given 1st Argument is not a JavaScript function"),null==t&&p("MissingArgument: no desired name given"),"string"==typeof t||t instanceof String||p("InvalidArgument: the given desired name is not a string"),e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}function ne(e,t){if(null!=t)return t.valueOf();p("MissingArgument: no "+Fn(e)+" given")}var re=ne,oe=ee(h,X,"boolean value"),ie=oe,ae=ee(h,Q,"boolean value"),le=ae,se=ee(v,X,"numeric value"),ue=se,ce=ee(v,Q,"numeric value"),fe=ce,de=ee(g,X,"finite numeric value"),pe=de,he=ee(g,Q,"finite numeric value"),ve=he,ge=ee(m,X,"NaN value"),me=ge,be=ee(m,Q,"NaN value"),ye=be;function we(e,t,n,r,o,i){return null==t?t:Ce(e,t,n,r,o,i)}var xe=we;function Oe(e,t,n,r,o,i){if(ce(e,t),isNaN(t)&&p("InvalidArgument: the given "+Fn(e)+" is not-a-number"),null==o&&(o=!0),null==i&&(i=!0),null!=n&&isFinite(n)){if(null!=r&&isFinite(r)){if(t<n||!o&&t===n||t>r||!i&&t===r)throw new RangeError("the given "+Fn(e)+" ("+t+") is outside the allowed range ("+n+"..."+r+")")}else if(t<n||!o&&t===n)throw new RangeError("the given "+Fn(e)+" is below the allowed minimum ("+t+" "+(o?"<":"<=")+" "+n+")")}else if(null!=r&&isFinite(r)&&(t>r||!i&&t===r))throw new RangeError("the given "+Fn(e)+" exceeds the allowed maximum ("+t+" "+(i?">":">=")+" "+r+")");return t.valueOf()}var Ce=Oe,Ie=ee(y,X,"integral numeric value"),Ae=Ie,Se=ee(y,Q,"integral numeric value"),Pe=Se;function Te(e,t,n,r){return null==t?t:je(e,t,n,r)}var Me=Te;function Ee(e,t,n,r){if(Se(e,t),isNaN(t)&&p("InvalidArgument: the given "+Fn(e)+" is not-a-number"),null!=n&&isFinite(n)){if(null!=r&&isFinite(r)){if(t<n||t>r)throw new RangeError("the given "+Fn(e)+" ("+t+") is outside the allowed range ("+n+"..."+r+")")}else if(t<n)throw new RangeError("the given "+Fn(e)+" is below the allowed minimum ("+t+" < "+n+")")}else if(null!=r&&isFinite(r)&&t>r)throw new RangeError("the given "+Fn(e)+" exceeds the allowed maximum ("+t+" > "+r+")");return t.valueOf()}var je=Ee,ke=ee(w,X,"ordinal number"),Ne=ke,Be=ee(w,Q,"ordinal number"),We=Be,Ve=ee(x,X,"cardinal number"),Fe=Ve,_e=ee(x,Q,"cardinal number"),Le=_e,Re=ee(O,X,"literal string"),De=Re,ze=ee(O,Q,"literal string"),Ue=ze,He=ee(I,X,"non-empty literal string"),qe=He,$e=ee(I,Q,"non-empty literal string"),Je=$e;function Ge(e,t,n){return null==t?t:Qe(e,t,n)}var Ze=Ge;function Ke(e,t,n){if(ze(e,t),n.test(t))return t.valueOf();p("InvalidArgument: the given "+Fn(e)+" does not match the specified pattern")}var Qe=Ke,Xe=ee(P,X,"literal text"),Ye=Xe,et=ee(P,Q,"literal text"),tt=et,nt=ee(M,X,"single line of text"),rt=nt,ot=ee(M,Q,"single line of text"),it=ot,at=ee(E,X,"JavaScript function"),lt=at,st=ee(E,Q,"JavaScript function"),ut=st,ct=ee(j,X,"anonymous JavaScript function"),ft=ct,dt=ee(j,Q,"anonymous JavaScript function"),pt=dt,ht=ee(k,X,"named JavaScript function"),vt=ht,gt=ee(k,Q,"named JavaScript function"),mt=gt,bt=ee(N,X,"native JavaScript function"),yt=bt,wt=ee(N,Q,"native JavaScript function"),xt=wt,Ot=ee(B,X,"scripted JavaScript function"),Ct=Ot,It=ee(B,Q,"scripted JavaScript function"),At=It,St=ee(W,X,"JavaScript object"),Pt=St,Tt=ee(W,Q,"JavaScript object"),Mt=Tt,Et=ee(V,X,'"plain" JavaScript object'),jt=Et,kt=ee(V,Q,'"plain" JavaScript object'),Nt=kt,Bt=ee(F,X,'"vanilla" JavaScript object'),Wt=Bt,Vt=ee(F,Q,'"vanilla" JavaScript object'),Ft=Vt;function _t(e,t){return null==t?t:Dt(e,t)}var Lt=_t;function Rt(e,t){if(null==t&&p("MissingArgument: no "+Fn(e)+" given"),_(t))return t;p("InvalidArgument: the given "+Fn(e)+" is no JavaScript array")}var Dt=Rt;function zt(e,t,n,r,o){return null==t?t:qt(e,t,n,r,o)}var Ut=zt;function Ht(e,t,n,r,o){if(null==t&&p("MissingArgument: no "+Fn(e)+" given"),L(t,r,o))return t;p("InvalidArgument: the given "+Fn(e)+" is "+(null==n?"either not a list or contains an invalid number of elements":"no "+Fn(n)))}var qt=Ht;function $t(e,t,n,r,o,i){return null==t?t:Zt(e,t,n,r,o,i)}var Jt=$t;function Gt(e,t,n,r,o,i){if(null==t&&p("MissingArgument: no "+Fn(e)+" given"),R(t,n,o,i))return t;p("InvalidArgument: the given "+Fn(e)+" is "+(null==r?"either not a list or contains invalid elements":"no "+Fn(r)))}var Zt=Gt;function Kt(e,t,n,r){return null==t?t:Yt(e,t,n,r)}var Qt=Kt;function Xt(e,t,n,r){return null==t&&p("MissingArgument: no "+Fn(e)+" given"),t instanceof n||p("InvalidArgument: the given "+Fn(e)+" is no "+Fn(r)),t}var Yt=Xt;function en(e,t,n,r){return null==t?t:rn(e,t,n,r)}var tn=en;function nn(e,t,n,r){if(null==t&&p("MissingArgument: no "+Fn(e)+" given"),n.isPrototypeOf(t))return t;p("InvalidArgument: the given "+Fn(e)+" is no "+Fn(r))}var rn=nn,on=ee(D,X,"JavaScript Date object"),an=on,ln=ee(D,Q,"JavaScript Date object"),sn=ln,un=ee(z,X,"JavaScript Error object"),cn=un,fn=ee(z,Q,"JavaScript Error object"),dn=fn,pn=ee(U,X,'JavaScript Promise (or "Thenable") object'),hn=pn,vn=ee(U,Q,'JavaScript Promise (or "Thenable") object'),gn=vn,mn=ee(H,X,"JavaScript RegExp object"),bn=mn,yn=ee(H,Q,"JavaScript RegExp object"),wn=yn;function xn(e,t,n){return null==t?t:In(e,t,n)}var On=xn;function Cn(e,t,n){if(null==t&&p("MissingArgument: no "+Fn(e)+" given"),q(t,n))return null==t||"function"!=typeof t.valueOf?t:t.valueOf();p("InvalidArgument: the given "+Fn(e)+" is not among the supported values")}var In=Cn,An=ee($,X,"valid CSS color specification"),Sn=An,Pn=ee($,Q,"valid CSS color specification"),Tn=Pn,Mn=ee(G,X,"valid EMail address"),En=Mn,jn=ee(G,Q,"valid EMail address"),kn=jn,Nn=ee(K,X,"valid URL"),Bn=Nn,Wn=ee(K,Q,"valid URL"),Vn=Wn;function Fn(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function _n(e,t){void 0===t&&(t='"');return e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function Ln(e,t){return void 0===t&&(t='"'),t+_n(e,t)+t}function Rn(e,t){return t=(t||"").trim()||"<br/>",e.replace(/[&<>"'\u0000-\u001F\u007F-\u009F\\]/g,(function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"\b":return"&#92;b";case"\f":return"&#92;f";case"\n":return t;case"\r":return"&#92;r";case"\t":return"&#92;t";case"\v":return"&#92;v";case"\\":return"&#92;";default:var n=e.charCodeAt(0).toString(16);return"&#x0000".substring(3,7-n.length)+n+";"}}))}function Dn(e,t){if(e===t)return!1;var n=typeof e;if(n!==typeof t)return!0;switch(n){case"undefined":case"boolean":case"string":case"function":return!0;case"number":return isNaN(e)!==isNaN(t)||Math.abs(e-t)>Number.EPSILON;case"object":return null==e||(null==t||(Array.isArray(e)?function(e,t){if(!Array.isArray(t))return!0;if(e.length!==t.length)return!0;for(var n=0,r=e.length;n<r;n++)if(Dn(e[n],t[n]))return!0;return!1}(e,t):function(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!0;for(var n in e)if(!(n in t))return!0;for(var n in t){if(!(n in e))return!0;if(Dn(e[n],t[n]))return!0}return!1}(e,t)));default:return!0}return!0}function zn(e,t){return!Dn(e,t)}function Un(e){for(var t in Tt("candidate",e),e)if(f(e,t))return!1;return!0}function Hn(e){return/^\s*$/.test(e)}var qn={transparent:"rgba(0,0,0,0,0.0)",aliceblue:"rgba(240,248,255,1.0)",lightpink:"rgba(255,182,193,1.0)",antiquewhite:"rgba(250,235,215,1.0)",lightsalmon:"rgba(255,160,122,1.0)",aqua:"rgba(0,255,255,1.0)",lightseagreen:"rgba(32,178,170,1.0)",aquamarine:"rgba(127,255,212,1.0)",lightskyblue:"rgba(135,206,250,1.0)",azure:"rgba(240,255,255,1.0)",lightslategray:"rgba(119,136,153,1.0)",beige:"rgba(245,245,220,1.0)",lightslategrey:"rgba(119,136,153,1.0)",bisque:"rgba(255,228,196,1.0)",lightsteelblue:"rgba(176,196,222,1.0)",black:"rgba(0,0,0,1.0)",lightyellow:"rgba(255,255,224,1.0)",blanchedalmond:"rgba(255,235,205,1.0)",lime:"rgba(0,255,0,1.0)",blue:"rgba(0,0,255,1.0)",limegreen:"rgba(50,205,50,1.0)",blueviolet:"rgba(138,43,226,1.0)",linen:"rgba(250,240,230,1.0)",brown:"rgba(165,42,42,1.0)",magenta:"rgba(255,0,255,1.0)",burlywood:"rgba(222,184,135,1.0)",maroon:"rgba(128,0,0,1.0)",cadetblue:"rgba(95,158,160,1.0)",mediumaquamarine:"rgba(102,205,170,1.0)",chartreuse:"rgba(127,255,0,1.0)",mediumblue:"rgba(0,0,205,1.0)",chocolate:"rgba(210,105,30,1.0)",mediumorchid:"rgba(186,85,211,1.0)",coral:"rgba(255,127,80,1.0)",mediumpurple:"rgba(147,112,219,1.0)",cornflowerblue:"rgba(100,149,237,1.0)",mediumseagreen:"rgba(60,179,113,1.0)",cornsilk:"rgba(255,248,220,1.0)",mediumslateblue:"rgba(123,104,238,1.0)",crimson:"rgba(220,20,60,1.0)",mediumspringgreen:"rgba(0,250,154,1.0)",cyan:"rgba(0,255,255,1.0)",mediumturquoise:"rgba(72,209,204,1.0)",darkblue:"rgba(0,0,139,1.0)",mediumvioletred:"rgba(199,21,133,1.0)",darkcyan:"rgba(0,139,139,1.0)",midnightblue:"rgba(25,25,112,1.0)",darkgoldenrod:"rgba(184,134,11,1.0)",mintcream:"rgba(245,255,250,1.0)",darkgray:"rgba(169,169,169,1.0)",mistyrose:"rgba(255,228,225,1.0)",darkgreen:"rgba(0,100,0,1.0)",moccasin:"rgba(255,228,181,1.0)",darkgrey:"rgba(169,169,169,1.0)",navajowhite:"rgba(255,222,173,1.0)",darkkhaki:"rgba(189,183,107,1.0)",navy:"rgba(0,0,128,1.0)",darkmagenta:"rgba(139,0,139,1.0)",oldlace:"rgba(253,245,230,1.0)",darkolivegreen:"rgba(85,107,47,1.0)",olive:"rgba(128,128,0,1.0)",darkorange:"rgba(255,140,0,1.0)",olivedrab:"rgba(107,142,35,1.0)",darkorchid:"rgba(153,50,204,1.0)",orange:"rgba(255,165,0,1.0)",darkred:"rgba(139,0,0,1.0)",orangered:"rgba(255,69,0,1.0)",darksalmon:"rgba(233,150,122,1.0)",orchid:"rgba(218,112,214,1.0)",darkseagreen:"rgba(143,188,143,1.0)",palegoldenrod:"rgba(238,232,170,1.0)",darkslateblue:"rgba(72,61,139,1.0)",palegreen:"rgba(152,251,152,1.0)",darkslategray:"rgba(47,79,79,1.0)",paleturquoise:"rgba(175,238,238,1.0)",darkslategrey:"rgba(47,79,79,1.0)",palevioletred:"rgba(219,112,147,1.0)",darkturquoise:"rgba(0,206,209,1.0)",papayawhip:"rgba(255,239,213,1.0)",darkviolet:"rgba(148,0,211,1.0)",peachpuff:"rgba(255,218,185,1.0)",deeppink:"rgba(255,20,147,1.0)",peru:"rgba(205,133,63,1.0)",deepskyblue:"rgba(0,191,255,1.0)",pink:"rgba(255,192,203,1.0)",dimgray:"rgba(105,105,105,1.0)",plum:"rgba(221,160,221,1.0)",dimgrey:"rgba(105,105,105,1.0)",powderblue:"rgba(176,224,230,1.0)",dodgerblue:"rgba(30,144,255,1.0)",purple:"rgba(128,0,128,1.0)",firebrick:"rgba(178,34,34,1.0)",red:"rgba(255,0,0,1.0)",floralwhite:"rgba(255,250,240,1.0)",rosybrown:"rgba(188,143,143,1.0)",forestgreen:"rgba(34,139,34,1.0)",royalblue:"rgba(65,105,225,1.0)",fuchsia:"rgba(255,0,255,1.0)",saddlebrown:"rgba(139,69,19,1.0)",gainsboro:"rgba(220,220,220,1.0)",salmon:"rgba(250,128,114,1.0)",ghostwhite:"rgba(248,248,255,1.0)",sandybrown:"rgba(244,164,96,1.0)",gold:"rgba(255,215,0,1.0)",seagreen:"rgba(46,139,87,1.0)",goldenrod:"rgba(218,165,32,1.0)",seashell:"rgba(255,245,238,1.0)",gray:"rgba(128,128,128,1.0)",sienna:"rgba(160,82,45,1.0)",green:"rgba(0,128,0,1.0)",silver:"rgba(192,192,192,1.0)",greenyellow:"rgba(173,255,47,1.0)",skyblue:"rgba(135,206,235,1.0)",grey:"rgba(128,128,128,1.0)",slateblue:"rgba(106,90,205,1.0)",honeydew:"rgba(240,255,240,1.0)",slategray:"rgba(112,128,144,1.0)",hotpink:"rgba(255,105,180,1.0)",slategrey:"rgba(112,128,144,1.0)",indianred:"rgba(205,92,92,1.0)",snow:"rgba(255,250,250,1.0)",indigo:"rgba(75,0,130,1.0)",springgreen:"rgba(0,255,127,1.0)",ivory:"rgba(255,255,240,1.0)",steelblue:"rgba(70,130,180,1.0)",khaki:"rgba(240,230,140,1.0)",tan:"rgba(210,180,140,1.0)",lavender:"rgba(230,230,250,1.0)",teal:"rgba(0,128,128,1.0)",lavenderblush:"rgba(255,240,245,1.0)",thistle:"rgba(216,191,216,1.0)",lawngreen:"rgba(124,252,0,1.0)",tomato:"rgba(255,99,71,1.0)",lemonchiffon:"rgba(255,250,205,1.0)",turquoise:"rgba(64,224,208,1.0)",lightblue:"rgba(173,216,230,1.0)",violet:"rgba(238,130,238,1.0)",lightcoral:"rgba(240,128,128,1.0)",wheat:"rgba(245,222,179,1.0)",lightcyan:"rgba(224,255,255,1.0)",white:"rgba(255,255,255,1.0)",lightgoldenrodyellow:"rgba(250,250,210,1.0)",whitesmoke:"rgba(245,245,245,1.0)",lightgray:"rgba(211,211,211,1.0)",yellow:"rgba(255,255,0,1.0)",lightgreen:"rgba(144,238,144,1.0)",yellowgreen:"rgba(154,205,50,1.0)",lightgrey:"rgba(211,211,211,1.0)"};function $n(e){var t=e.toLowerCase();if(qn.hasOwnProperty(t)&&(e=qn[t]),/^#[a-fA-F0-9]{6}$/.test(e))return e+"FF";if(/^#[a-fA-F0-9]{8}$/.test(e))return e;var n="0123456789ABCDEF";function r(e){return e>255&&(e=255),n[Math.trunc(e/16)]+n[e%16]}var o=/^rgb\(([0-9]+),\s*([0-9]+),\s*([0-9]+)\)$/i.exec(e);if(null!=o)return"#"+r(parseInt(o[1],10))+r(parseInt(o[2],10))+r(parseInt(o[3],10))+"FF";if(null!=(o=/^rgba\(([(0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([01]?[.][0-9]+|[01])\)$/i.exec(e)))return"#"+r(parseInt(o[1],10))+r(parseInt(o[2],10))+r(parseInt(o[3],10))+r(parseFloat(o[4]));p("InvalidArgument: the given Value is not a valid CSS Color specification")}function Jn(e){return $n(e).slice(0,7)}var Gn=Object.freeze({__proto__:null,ColorSet:qn,FunctionWithName:te,HTMLsafe:Rn,HexColor:$n,MarkDownSafe:function(e,t){return Rn(e,t).replace(/:/g,"&#58;")},ObjectIsEmpty:Un,ObjectIsNotEmpty:function(e){return!Un(e)},ObjectMergedWith:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t.length;r<o;r++){var i=t[r];if(null!=i)if("object"==typeof i)for(var a in i){var l=Object.getOwnPropertyDescriptor(i,a);null!=l&&Object.defineProperty(e,a,l)}else p("InvalidArgument: argument #"+(r+1)+" is not an object")}return e},Object_hasOwnProperty:f,Object_isPrototypeOf:d,Object_propertyIsEnumerable:function(e,t){return null==e||"propertyIsEnumerable"in e&&"function"==typeof e.propertyIsEnumerable?e.propertyIsEnumerable(t):Object.prototype.propertyIsEnumerable.call(e,t)},Object_toLocaleString:function(e){return null==e||"toLocaleString"in e&&"function"==typeof e.toLocaleString?e.toLocaleString():Object.prototype.toString.call(e)},Object_toString:function(e){return null==e||"toString"in e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)},Object_valueOf:function(e){return null==e||"valueOf"in e&&"function"==typeof e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)},RGBAColor:function(e){var t=e.toLowerCase();if(qn.hasOwnProperty(t))return qn[t];if(/^#[a-fA-F0-9]{6}$/.test(e))return"rgba("+parseInt(e.slice(1,3),16)+","+parseInt(e.slice(3,5),16)+","+parseInt(e.slice(5,7),16)+", 1)";if(/^#[a-fA-F0-9]{8}$/.test(e))return"rgba("+parseInt(e.slice(1,3),16)+","+parseInt(e.slice(3,5),16)+","+parseInt(e.slice(5,7),16)+","+parseInt(e.slice(7),16)/255+")";var n=/^rgb\(([0-9]+),\s*([0-9]+),\s*([0-9]+)\)$/i.exec(e);if(null!=n)return e.slice(0,e.length-1)+",1)";if(null!=(n=/^rgba\(([(0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0]?[.][0-9]+|[01])\)$/i.exec(e)))return e;p("InvalidArgument: the given Value is not a valid CSS Color specification")},StringIsEmpty:Hn,StringIsNotEmpty:function(e){return!Hn(e)},ValidatorForClassifier:ee,ValueExists:function(e){return null!=e},ValueInheritsFrom:function(e,t){return d(t,e)},ValueIsAnonymousFunction:j,ValueIsArray:_,ValueIsBoolean:h,ValueIsCardinal:x,ValueIsColor:$,ValueIsDate:D,ValueIsEMailAddress:G,ValueIsEmptyString:function(e){return("string"==typeof e||e instanceof String)&&C.test(e.valueOf())},ValueIsError:z,ValueIsFiniteNumber:g,ValueIsFunction:E,ValueIsInstanceOf:function(e,t){return e instanceof t},ValueIsInteger:y,ValueIsIntegerInRange:function(e,t,n){if(!y(e)||isNaN(e))return!1;if(g(t)){if(g(n)){if(e<t||e>n)return!1}else if(e<t)return!1}else if(g(n)&&e>n)return!1;return!0},ValueIsList:L,ValueIsListSatisfying:R,ValueIsMissing:function(e){return null==e},ValueIsNaN:m,ValueIsNamedFunction:k,ValueIsNativeFunction:N,ValueIsNonEmptyString:I,ValueIsNumber:v,ValueIsNumberInRange:b,ValueIsObject:W,ValueIsOneOf:q,ValueIsOrdinal:w,ValueIsPlainObject:V,ValueIsPromise:U,ValueIsRegExp:H,ValueIsScriptedFunction:B,ValueIsString:O,ValueIsStringMatching:A,ValueIsText:P,ValueIsTextline:M,ValueIsURL:K,ValueIsVanillaObject:F,ValuesAreEqual:zn,ValuesDiffer:Dn,acceptNil:X,allowAnonymousFunction:ct,allowArray:_t,allowBoolean:oe,allowCardinal:Ve,allowColor:An,allowDate:on,allowEMailAddress:Mn,allowError:un,allowFiniteNumber:de,allowFunction:at,allowInstanceOf:Kt,allowInteger:Ie,allowIntegerInRange:Te,allowList:zt,allowListSatisfying:$t,allowNaN:ge,allowNamedFunction:ht,allowNativeFunction:bt,allowNonEmptyString:He,allowNumber:se,allowNumberInRange:we,allowObject:St,allowOneOf:xn,allowOrdinal:ke,allowPlainObject:Et,allowPromise:pn,allowRegExp:mn,allowScriptedFunction:Ot,allowString:Re,allowStringMatching:Ge,allowText:Xe,allowTextline:nt,allowURL:Nn,allowValueInheritingFrom:en,allowVanillaObject:Bt,allowedAnonymousFunction:ft,allowedArray:Lt,allowedBoolean:ie,allowedCardinal:Fe,allowedColor:Sn,allowedDate:an,allowedEMailAddress:En,allowedError:cn,allowedFiniteNumber:pe,allowedFunction:lt,allowedInstanceOf:Qt,allowedInteger:Ae,allowedIntegerInRange:Me,allowedList:Ut,allowedListSatisfying:Jt,allowedNaN:me,allowedNamedFunction:vt,allowedNativeFunction:yt,allowedNonEmptyString:qe,allowedNumber:ue,allowedNumberInRange:xe,allowedObject:Pt,allowedOneOf:On,allowedOrdinal:Ne,allowedPlainObject:jt,allowedPromise:hn,allowedRegExp:bn,allowedScriptedFunction:Ct,allowedString:De,allowedStringMatching:Ze,allowedText:Ye,allowedTextline:rt,allowedURL:Bn,allowedValueInheritingFrom:tn,allowedVanillaObject:Wt,constrained:function(e,t,n){return void 0===t&&(t=-1/0),void 0===n&&(n=1/0),Math.max(t,Math.min(e,n))},escaped:Fn,expectAnonymousFunction:dt,expectArray:Rt,expectBoolean:ae,expectCardinal:_e,expectColor:Pn,expectDate:ln,expectEMailAddress:jn,expectError:fn,expectFiniteNumber:he,expectFunction:st,expectInstanceOf:Xt,expectInteger:Se,expectIntegerInRange:Ee,expectList:Ht,expectListSatisfying:Gt,expectNaN:be,expectNamedFunction:gt,expectNativeFunction:wt,expectNonEmptyString:$e,expectNumber:ce,expectNumberInRange:Oe,expectObject:Tt,expectOneOf:Cn,expectOrdinal:Be,expectPlainObject:kt,expectPromise:vn,expectRegExp:yn,expectScriptedFunction:It,expectString:ze,expectStringMatching:Ke,expectText:et,expectTextline:ot,expectURL:Wn,expectValue:ne,expectValueInheritingFrom:nn,expectVanillaObject:Vt,expectedAnonymousFunction:pt,expectedArray:Dt,expectedBoolean:le,expectedCardinal:Le,expectedColor:Tn,expectedDate:sn,expectedEMailAddress:kn,expectedError:dn,expectedFiniteNumber:ve,expectedFunction:ut,expectedInstanceOf:Yt,expectedInteger:Pe,expectedIntegerInRange:je,expectedList:qt,expectedListSatisfying:Zt,expectedNaN:ye,expectedNamedFunction:mt,expectedNativeFunction:xt,expectedNonEmptyString:Je,expectedNumber:fe,expectedNumberInRange:Ce,expectedObject:Mt,expectedOneOf:In,expectedOrdinal:We,expectedPlainObject:Nt,expectedPromise:gn,expectedRegExp:wn,expectedScriptedFunction:At,expectedString:Ue,expectedStringMatching:Qe,expectedText:tt,expectedTextline:it,expectedURL:Vn,expectedValue:re,expectedValueInheritingFrom:rn,expectedVanillaObject:Ft,global:c,quotable:_n,quoted:Ln,rejectNil:Q,shortHexColor:Jn,throwError:p,unescaped:function(e){return e.replace(/\\[0bfnrtv'"\\\/]|\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}/g,(function(e){switch(e){case"\\0":return"\0";case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\v":return"\v";case"\\'":return"'";case'\\"':return'"';case"\\\\":return"\\";default:var t=parseInt(e.slice(2),16);return String.fromCharCode(t)}}))},validatedArgument:Y}),Zn=[],Kn=["Applet","Card","Overlay","Control","Compound"],Qn=["left-width","left-right","width-right"],Xn=["top-height","top-bottom","height-bottom"],Yn=["thin","extra-light","light","normal","medium","semi-bold","bold","extra-bold","heavy","lighter","bolder"],er=Object.assign(Object.create(null),{thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,heavy:900}),tr=["normal","italic"],nr=["none","underline","overline","line-through"],rr=["solid","double","dotted","dashed","wavy"],or=["left","center","right","justify"],ir=["normal","contain","cover","fill","tile"],ar=["none","dotted","dashed","solid","double","groove","ridge","inset","outset"],lr=["alias","all-scroll","auto","cell","context-menu","col-resize","copy","crosshair","default","e-resize","ew-resize","grab","grabbing","help","move","n-resize","ne-resize","nesw-resize","ns-resize","nw-resize","nwse-resize","no-drop","none","not-allowed","pointer","progress","row-resize","s-resize","se-resize","sw-resize","text","vertical-text","w-resize","wait","zoom-in","zoom-out"],sr=["visible","hidden","scroll","auto"],ur=["clip","ellipsis"];for(var cr in Gn)Object.prototype.hasOwnProperty.call(Gn,cr)&&(WAT[cr]=Gn[cr]);function fr(e){return e instanceof HTMLElement}var dr=ee(fr,X,"DOM element"),pr=dr,hr=ee(fr,Q,"DOM element"),vr=hr;function gr(e){return e instanceof Xa}var mr=ee(gr,X,"WAT visual"),br=mr,yr=ee(gr,Q,"WAT visual"),wr=yr;function xr(e){return e instanceof Ya}var Or=ee(xr,X,"WAT applet"),Cr=Or,Ir=ee(xr,Q,"WAT applet"),Ar=Ir;function Sr(e){return e instanceof nl}var Pr=ee(Sr,X,"WAT card"),Tr=Pr,Mr=ee(Sr,Q,"WAT card"),Er=Mr;function jr(e){return e instanceof rl}var kr=ee(jr,X,"WAT overlay"),Nr=kr,Br=ee(jr,Q,"WAT overlay"),Wr=Br;function Vr(e){return e instanceof il}var Fr=ee(Vr,X,"WAT control"),_r=Fr,Lr=ee(Vr,Q,"WAT control"),Rr=Lr;function Dr(e){return e instanceof ol}var zr=ee(Dr,X,"WAT compound"),Ur=zr,Hr=ee(Dr,Q,"WAT compound"),qr=Hr;function $r(e){return e instanceof il||e instanceof ol}var Jr=ee($r,X,"WAT component"),Gr=Jr,Zr=ee($r,Q,"WAT component"),Kr=Zr;function Qr(e){return e instanceof el}var Xr=ee(Qr,X,"WAT container"),Yr=Xr,eo=ee(Qr,Q,"WAT container"),to=eo,no=/^wat-[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}$/i;function ro(e){return O(e)&&no.test(e)}var oo=ee(ro,X,"unique WAT id"),io=oo,ao=ee(ro,Q,"unique WAT id"),lo=ao,so=/^[a-z][-_a-z.0-9]*$/i;function uo(e){return A(e,so)}var co=ee(uo,X,"WAT HTML id"),fo=co,po=ee(uo,Q,"WAT HTML id"),ho=po,vo=/^[a-z$_][a-z$_0-9]*(-[a-z$_][a-z$_0-9]*)*$/i;function go(e){return A(e,vo)}var mo=ee(go,X,"WAT name"),bo=mo,yo=ee(go,Q,"WAT name"),wo=yo,xo=/^#?[a-z$_][a-z$_0-9]*(-[a-z$_][a-z$_0-9]*)*$/i;function Oo(e){return A(e,xo)}var Co=ee(Oo,X,"WAT name"),Io=Co,Ao=ee(Oo,Q,"WAT name"),So=Ao;function Po(e){return M(e)}var To=ee(Po,X,"WAT visual label"),Mo=To,Eo=ee(Po,Q,"WAT visual label"),jo=Eo,ko=/^[a-z$_][a-z$_0-9]*$/i;function No(e){return A(e,ko)}var Bo=ee(No,X,"WAT identifier"),Wo=Bo,Vo=ee(No,Q,"WAT identifier"),Fo=Vo;function _o(e){return g(e)}var Lo=ee(_o,X,"coordinate"),Ro=Lo,Do=ee(_o,Q,"coordinate"),zo=Do;function Uo(e){return g(e)&&e>=0}var Ho=ee(Uo,X,"extent"),qo=Ho,$o=ee(Uo,Q,"extent"),Jo=$o,Go=/^(0|[1-9]\d*)(?:[.](0|[1-9]\d*)(?:[.](0|[1-9]\d*)(-[-0-9A-Za-z.]+)?)?)?$/;function Zo(e){return A(e,Go)}var Ko=ee(Zo,X,"version specification"),Qo=Ko,Xo=ee(Zo,Q,"version specification"),Yo=Xo;function ei(e){p("ReadOnlyProperty: property "+Ln(e)+" must not be set")}function ti(e){p("WriteOnlyProperty: property "+Ln(e)+" must not be read")}function ni(e,t){for(null==e&&p("InvalidArgument: the given target object is null or undefined");null!=e;){var n=Object.getOwnPropertyDescriptor(e,t);if(null!=n)return n;e=Object.getPrototypeOf(e)}}function ri(e){return e.replace(/-([a-z])/gi,(function(e){return e[1].toUpperCase()}))}function oi(e){return e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function ii(e,t){Array.prototype.forEach.call(e,t)}function ai(e,t){return O(t)?Array.prototype.filter.call(e,(function(e){return e.matches(t)})):Array.prototype.filter.call(e,t)}function li(e,t){var n=e.parentElement;if(null!=n)return n.closest(t)}function si(e,t,n){var r=e.parentElement;if(null!=r)for(r=r.closest(t);null!=r;){if(1==n(r))return r;r=r.closest(t)}}function ui(e,t,n){if(2===arguments.length)return e.getAttribute(t);null==n?e.removeAttribute(t):e.setAttribute(t,n)}function ci(e,t,n){if(2===arguments.length)return window.getComputedStyle(e)[ri(t)];e.style[ri(t)]=n}function fi(e,t){if(1===arguments.length)return e.innerHTML;e.innerHTML=t}function di(e,t,n){if(2===arguments.length)return e.dataset[ri(t)];e.dataset[ri(t)]=n}function pi(e){switch(!0){case fr(e):var t=e.parentElement;null!=t&&t.removeChild(e);break;case _(e):e.forEach((function(e){return pi(e)}));break;default:ii(e,(function(e){return pi(e)}))}}function hi(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}var vi=new WeakMap;function gi(e,t,n,r){!function(e,t,n,r,o){var i=oi(t).split(" "),a=function(e){try{if(null!=n&&!e.target.matches(n))return;!1===r(e)&&(e.stopPropagation(),e.preventDefault())}catch(e){console.error("event handler failed with",e)}o&&mi(e.currentTarget,e.type,n,r)},l=vi.get(e);null==l&&vi.set(e,l=[]),i.forEach((function(t){l.push({EventName:t,Selector:n,actualHandler:a,Handler:r}),e.addEventListener(t,a,!1)}))}(e,t,n,r,!1)}function mi(e,t,n,r){var o=void 0;null!=t&&(o=oi(t).split(" "));var i=vi.get(e);if(null!=i)for(var a=i.length;a>=0;a--){var l=i[a];!(null==o||o.indexOf(l.EventName)>=0)||null!=n&&l.Selector!==n||null!=r&&l.Handler!==r||(e.removeEventListener(l.EventName,l.actualHandler),i.splice(a,1))}}function bi(e,t,n){if(null!=Qa&&e!==document){var r=e.closest(".WAT");if(null!=r){var o=Wa(r);if(null!=o&&Qa.inhibitsEventsFrom(o))return}}O(t)?e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0})):e.dispatchEvent(t)}function yi(e,t){var n=/^<([-a-z0-9_]+)((?:[\s\xA0]+[-a-z0-9_]+(?:[\s\xA0]*=[\s\xA0]*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s\xA0]+))?)*)[\s\xA0]*(\/?)>/i,r=/^<\/([-a-z0-9_]+)[^>]*>/i,o=/([-a-z0-9]+)(?:[\s\xA0]*=[\s\xA0]*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s\xA0]+)))?/gi;function i(e){for(var t=e.split(","),n=Object.create(null),r=0,o=t.length;r<o;r++)n[t[r]]=!0;return n}var a=i("area,base,basefont,br,col,embed,frame,hr,img,input,isIndex,keygen,link,meta,param,source,track,wbr"),l=i("address,article,aside,audio,blockquote,canvas,center,dd,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,isIndex,li,main,menu,nav,noframes,noscript,ol,output,p,pre,section,table,tbody,td,tfoot,th,thead,tr,ul,video,applet"),s=i("a,abbr,acronym,Applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,Object,q,s,samp,Script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=i("area,base,basefont,bgsound,br,col,colgroup,dd,dt,embed,frame,hr,img,input,isIndex,keygen,li,link,menuitem,meta,options,p,param,source,td,tfoot,th,thead,tr,track,wbr"),c=i("script,style,svelte:options"),f=i("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),d=function(){},h=t.processStartTag||d,v=t.processEndTag||d,g=t.processText||d,m=t.processComment||d,b=[];function y(e,t,n,r){if(t=t.toLowerCase(),l[t])for(;null!=b.last()&&s[b.last()];)w("",b.last());if(u[t]&&b.last()===t&&w("",t),(r=a[t]||!!r)||b.push(t),h!==d){var i=[];n.replace(o,(function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:f[t]?t:"";return i.push({Name:t,Value:n,escapedValue:n.replace(/(^|[^\\])"/g,'$1\\"')}),""})),h(t,i,r,b.length===(r?0:1))}return""}function w(e,t){var n;if(null==t)n=0;else for(t=t.toLowerCase(),n=b.length-1;n>=0&&b[n]!==t;n--);if(n>=0){for(var r=b.length-1;r>=n;r--)v(b[r],0===r);b.length=n}return""}b.last=function(){return this[this.length-1]};for(var x=e;""!==e;){var O=!0;if(null!=b.last()&&c[b.last()])e=e.replace(new RegExp("^((?:.|\n)*?)</"+b.last()+"[^>]*>","i"),(function(e,t){return t=t.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),g(t,0===b.length),""})),w(0,b.last());else{if(e.startsWith("\x3c!--"))(I=e.indexOf("--\x3e",4))>0&&(m(e.slice(4,I)),e=e.slice(I+3),O=!1);else if(e.startsWith("</")){null!=(C=e.match(r))&&(e=e.slice(C[0].length),C[0].replace(r,w),O=!1)}else if(e.startsWith("<")){var C;null!=(C=e.match(n))&&(e=e.slice(C[0].length),C[0].replace(n,y),O=!1)}if(O){var I,A=(I=e.indexOf("<"))<0?e:e.slice(0,I);e=I<0?"":e.slice(I),g(A,0===b.length)}}if(e===x)switch(!0){case e.startsWith("<"):e=e.slice(1),g("&lt;",0===b.length);break;default:p('HTMLParseError: could not parse "'+e+'"')}x=e}w()}function wi(e,t){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(o.Name===e)return o.Value}}function xi(e,t,n){for(var r="<"+e,o=0,i=t.length;o<i;o++){var a=t[o];r+=" "+a.Name+'="'+a.escapedValue+'"'}return r+(n?"/>":">")}var Oi=/^(\d+)(?:[.](\d+)(?:[.](\d+)(-[-0-9A-Za-z.]+)?)?)?$/;function Ci(e){var t=Oi.exec(e);return{major:parseInt(t[1],10),minor:null==t[2]?void 0:parseInt(t[2],10),Patch:null==t[3]?void 0:parseInt(t[3],10),Build:null==t[4]?void 0:parseInt(t[4].slice(1),16)}}function Ii(e){var t=e.major,n=e.minor,r=e.Patch;e.Build;return 1,{major:t,minor:n=n||0,Patch:r=r||(0===t&&0===n?1:0),Build:1}}var Ai=new Date("2020-02-02").getTime();function Si(){return Date.now()-Ai}var Pi,Ti=new WeakMap;function Mi(e){et("resource",e),ji(e||"","register")}function Ei(e){Xe("resource",e),null!=e&&ji(e||"","unregister")}function ji(e,t){""!==e.trim()&&function(e){var t,n,r=[];function o(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].Name.toLowerCase()]=e[n];return t}function i(e){r.forEach((function(t){!function(e,t){if(e.Form!==t.Form)return!1;switch(e.Form){case"literalStyle":case"externalStyle":return e.Type===t.Type&&e.Media===t.Media&&e.Title===t.Title&&(e.Value||"").trim()===(t.Value||"").trim();case"literalScript":case"externalScript":return e.Type===t.Type&&e.noModule===t.noModule&&(e.Value||"").trim()===(t.Value||"").trim();default:p("InternalError: unforeseen resource form")}}(t,e)?r.push(e):p("DuplicateResources: the given set of resources contains duplicates")}))}return yi(e,{processStartTag:function(e,r,a,l){if(l){switch(e){case"link":if(wi("rel",r)==="stylesheet"){i({Form:"externalStyle",Type:wi("type",r)||"text/css",Media:wi("media",r)||"all",Title:wi("title",r)||undefined,Value:wi("href",r),AttributeSet:o(r)})}return;case"script":case"style":t=o(r);n="";return;default:p("InvalidResourceSet: a WAT resource set must only contain "+"style, script or link elements (the latter only with "+'relation "stylesheet")')}}else{if(n!==undefined){n+=xi(e,r,a)}}},processEndTag:function(e,r){if(r){switch(e){case"script":i({Form:t.src==null?"literalScript":"externalScript",Type:(t===null||t===void 0?void 0:t.type.Value)||"application/javascript",noModule:"nomodule"in t,Value:t.src==null?n:t.src.Value,AttributeSet:t});break;case"style":i({Form:"literalStyle",Type:(t===null||t===void 0?void 0:t.type.Value)||"text/css",Media:(t===null||t===void 0?void 0:t.media.Value)||"all",Title:(t===null||t===void 0?void 0:t.title.Value)||undefined,Value:n,AttributeSet:t})}t={};n=undefined}else{if(n!==undefined){n+="</"+e+">"}}},processText:function(e,t){if(n!==undefined){n+=e}}}),r}(e).forEach((function(e){!function(e,t){var n,r=function(e){var t=void 0;return ai(document.head.children,"link,style,script").forEach((function(n){(function(e,t){switch(e.Form){case"literalStyle":return"STYLE"===t.tagName&&"text/css"===(ui(t,"type")||"text/css")&&(ui(t,"media")||"all")===e.Media&&(ui(t,"title")||void 0)===e.Title&&(t.textContent||"").trim()===e.Value;case"externalStyle":return"LINK"===t.tagName&&"stylesheet"===ui(t,"rel")&&"text/css"===(ui(t,"type")||"text/css")&&(ui(t,"media")||"all")===e.Media&&(ui(t,"title")||void 0)===e.Title&&ui(t,"href")===e.Value;case"literalScript":return"SCRIPT"===t.tagName&&(null==ui(t,"type")||"application/javascript"===ui(t,"type")||"text/javascript"===ui(t,"type"))&&(ui(t,"nomodule")||!1)===e.noModule&&(t.textContent||"").trim()===e.Value;case"externalScript":return"SCRIPT"===t.tagName&&(null==ui(t,"type")||"application/javascript"===ui(t,"type")||"text/javascript"===ui(t,"type"))&&(ui(t,"nomodule")||!1)===e.noModule&&ui(t,"src")===e.Value;default:p("InternalError: unforeseen resource form")}})(e,n)&&(t=n)})),t}(e);if(null==r)switch(t){case"register":break;case"unregister":return;case"collect":p("NoSuchResource: an expected resource has already been removed")}else switch(t){case"register":return void function(e){Ti.set(e,(Ti.get(e)||0)+1)}(r);case"unregister":return void function(e){Ti.set(e,Math.max(0,(Ti.get(e)||0)-1))}(r);case"collect":return void function(e){for(var t=0,n=Pi.length;t<n;t++)if(Pi[t]===e)return;Pi.push(e)}(r)}switch(e.Form){case"literalStyle":fi(n=hi("<style></style>"),e.Value||"");break;case"externalStyle":n=hi("<link></link>");break;case"literalScript":fi(n=hi("<script><\/script>"),e.Value||"");break;case"externalScript":n=hi("<script><\/script>");break;default:p("InternalError: unforeseen resource form")}var o=e.AttributeSet||{};for(var i in o)o.hasOwnProperty(i)&&ui(n,i,o[i].Value);switch(e.Form){case"literalStyle":case"externalStyle":document.head.appendChild(n);break;case"literalScript":try{document.head.appendChild(n)}catch(e){throw console.warn("could not attach literal script",e),e}break;case"externalScript":document.head.appendChild(n);break;default:p("InternalError: unforeseen resource form")}Ti.set(n,1)}(e,t)}))}var ki,Ni=!1;function Bi(){return null!=ki}function Wi(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a;return o(this,(function(o){switch(o.label){case 0:switch(!0){case xr(e):if(null==(t=e.Name))return[2,!1];break;case fr(e):if(!go(n=di(e,"wat-name")))return[2,!1];t=n;break;default:p("InvalidArgument: applet or applet name expected")}if(!Bi())return[2,!1];o.label=1;case 1:return o.trys.push([1,3,,4]),r=t.startsWith("#")?t.slice(1):t,i=O,[4,ki.getItem(r)];case 2:return[2,i.apply(void 0,[o.sent()])];case 3:return a=o.sent(),console.error('backup of applet "'+t+" could not be checked, reason: ",a),[2,!1];case 4:return[2]}}))}))}function Vi(e){return r(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(o){switch(o.label){case 0:hr("applet peer",e),go(t=di(e,"wat-name"))||p("InvalidArgument: the given applet peer does not have a valid name"),o.label=1;case 1:return o.trys.push([1,3,,4]),r=t.startsWith("#")?t.slice(1):t,[4,ki.getItem(r)];case 2:return n=o.sent(),[3,4];case 3:return i=o.sent(),console.error('applet "'+t+" could not be restored, reason: ",i),p("applet could not be restored (see browser console)"),[3,4];case 4:return zi(n,e),[2,Wa(e)]}}))}))}function Fi(e){switch(Bi()||p("NotSupported: WAT applets can not be preserved in this environment"),go(e.Name)||p("InvalidArgument: the given applet does not have a valid name"),_a(e).BackupStatus){case"isBeingPreserved":p("ForbiddenOperation: this applet is currently being backed-up");case"isBeingRestored":p("ForbiddenOperation: this applet is currently being restored from its backup");case"isBeingRemoved":p("ForbiddenOperation: the backup of this applet is currently being removed")}}function _i(e,t){yo("master name",e);var n=ea[e];function r(e){e.split(" ").forEach((function(e){var t=n[e];null!=t&&(O(t)&&""!==t||_(t)&&t.length>0)&&(o[e]=t)}))}null==n&&p("NoSuchMaster: no master named "+Ln(e)+" found");var o={};r("Name Version Category Resources Template Classes Styles Script Properties");var i=[];for(var a in n.undesignablePropertySet)i.push(a);return o.undesignableProperties=i.join(" "),"withPendingSettings"===t&&r("pendingResources pendingTemplate pendingClasses pendingStyles pendingScript"),'<script type="application/wat-master">\n'+JSON.stringify(o)+"\n<\/script>"}function Li(e,t,n){function r(t){switch(e.trigger(t),e.Category){case"Applet":e.CardList.forEach((function(e){return e.trigger(t)}))(e).OverlayList.forEach((function(e){return e.trigger(t)}));break;case"Card":case"Overlay":case"Compound":e.ComponentList.forEach((function(e){return e.trigger(t)}))}}r("before-serialization"),t&&function e(t){var n=Ba.get(t);ui(t,"data-wat-unique-id",Fa.get(n).uniqueId),ai(t.children,".WAT.Card,.WAT.Overlay,.WAT.Control,.WAT.Compound").forEach((function(t){e(t)}))}(e.Peer);var o=e.Peer.outerHTML;return t&&function e(t){ui(t,"data-wat-unique-id",void 0),ai(t.children,".WAT.Card,.WAT.Overlay,.WAT.Control,.WAT.Compound").forEach((function(t){e(t)}))}(e.Peer),r("after-serialization"),o}function Ri(e){et("serialization",e);var t,n,r=[],o=[],i=[],a=[],l=[],s=[];return yi(e,{processStartTag:function(e,o,i,a){if(a)switch(e){case"link":"stylesheet"===wi("rel",o)&&K(wi("href",o))?r.push(xi(e,o,i)):p('InvalidSerialization: invalid "link" element encountered');break;case"style":var l=wi("type",o);null==l||"text/css"===l?(t="literalStyle",n=xi(e,o,!1)):p('InvalidSerialization: invalid "style" element encountered');break;case"script":switch(wi("type",o)){case"application/wat-master":t="Master",n=xi(e,o,!1);break;case"application/javascript":case"text/javascript":t=null==wi("src",o)?"literalScript":"externalScript",n=xi(e,o,!1);break;default:p('InvalidSerialization: invalid "script" element encountered')}break;case"div":var s=wi("class",o)||"";if(/(^|\s)WAT(\s|$)/.test(s)){switch(!0){case/(^|\s)Applet(\s|$)/.test(s):t="Applet";break;case/(^|\s)Card(\s|$)/.test(s):t="Card";break;case/(^|\s)Overlay(\s|$)/.test(s):t="Overlay";break;case/(^|\s)(Control|Compound)(\s|$)/.test(s):t="Component";break;default:p('InvalidSerialization: invalid "div" element encountered')}n=xi(e,o,!1)}else p('InvalidSerialization: invalid "div" element encountered');default:p('InvalidSerialization: invalid "'+e.toLowerCase()+'" element encountered')}else void 0!==n&&(n+=xi(e,o,i))},processEndTag:function(e,u){if(u){switch(n+="</"+e+">",e){case"style":r.push(n);break;case"script":switch(t){case"Master":o.push(n);break;case"literalScript":case"externalScript":r.push(n)}break;case"div":switch(n+="</"+e+">",t){case"Applet":i.push(n);break;case"Card":a.push(n);break;case"Overlay":l.push(n);break;case"Component":s.push(n)}}t=n=void 0}else void 0!==n&&(n+="</"+e+">")},processText:function(e,t){void 0!==n&&(n+=e)}}),{serializedResources:r,serializedMasters:o,serializedApplets:i,serializedCards:a,serializedOverlays:l,serializedComponents:s}}function Di(e){var t;et("serialization",e);try{t=JSON.parse(e)}catch(e){p("InvalidSerialization: the given serialized master does not contain a master specification")}return na(t)}function zi(e,t,n){var r=Ri(e),o=r.serializedMasters,i=r.serializedApplets;if(0===i.length&&p("InvalidSerialization: the given serialization does not contain any applets"),i.length>1&&p("InvalidSerialization: the given serialization contains multiple applets"),ll&&!cl)fi(t,"");else{var a=Wa(t);a.CardList.forEach((function(e){return e.remove()})),a.OverlayList.forEach((function(e){return e.remove()})),fi(t,""),Fa.delete(a)}if(o.length>0){var l=[];o.forEach((function(e){return l.push(Di(e))})),l.forEach((function(e){ua(e.Name)||ca(e)}))}for(var s=hi(i[0]);s.hasChildNodes();)t.appendChild(s.firstChild);for(var u=s.attributes,c=0,f=u.length;c<f;c++){var d=u[c].name;switch(d){case"id":case"class":case"style":break;default:ui(t,d,u[c].value)}}var h=s.style;for(var v in h)switch(v){case"display":case"position":case"left":case"width":case"right":case"top":case"height":case"bottom":break;default:h.hasOwnProperty(v)&&ci(t,v,h[v])}za(t,"Applet")}sl((function(){try{u.config({driver:[u.INDEXEDDB,u.WEBSQL]}),Ni=!0}catch(e){}}));var Ui="\n    uniqueId Id Name Label Category Master ErrorInfo mayBeDesigned mayBeDeleted\n    Classes isVisible isEnabled Value Script pendingScript pendingScriptError\n    TabIndex PointerSensitivity Overflows TextOverflow Opacity\n    x y Width Height Position Size Geometry GeometryOnDisplay\n    horizontalAnchoring verticalAnchoring horizontalOffsets verticalOffsets\n    minWidth maxWidth minHeight maxHeight\n    FontFamily FoltSize FontWeight FontStyle TextDecoration TextShadow\n    TextAlignment ForegroundColor Color BackgroundColor BackgroundTexture\n    BorderWidths BorderColors BorderStyles BorderRadii BoxShadow\n    Cursor customCursor\n  ".trim().replace(/\s+/g," ").split(" "),Hi=Object.create(null);function qi(e,t){kt(e,t);var n=t.Identifier;No(n)||p("InvalidArgument: invalid property name "+Ln(n)),$i(n);var r=t.Label;switch(!0){case null==r:r=n;break;case M(r):r=r.trim()||n;break;default:p("InvalidArgument: the label of property "+Ln(n)+" does not consist of a single line of text")}var o=t.EditorType;switch(!0){case null==o:p("InvalidArgument: missing editor type for property "+Ln(n));case!q(o,ra):p("InvalidArgument: invalid editor type given for property "+Ln(n))}var i,a={Identifier:n,Label:r,EditorType:o};switch(o){case"checkbox":break;case"choice":a.FalseValue=it('label for value "false"',t.FalseValue),a.TrueValue=it('label for value "true"',t.TrueValue);break;case"textline-input":case"password-input":case"email-address-input":case"phone-number-input":case"url-input":case"search-input":null!=t.minLength&&(a.minLength=je("minimal input length",t.minLength,0)),null!=t.maxLength&&(a.maxLength=je("maximal input length",t.maxLength,0)),null!=t.multiple&&"email-address-input"===o&&(a.multiple=le("multi-value flag",t.multiple)),null!=t.Pattern&&(a.Pattern=it("input pattern",t.Pattern));break;case"number-input":null!=t.minValue&&(a.minValue=fe("minimal allowed value",t.minValue)),null!=t.maxValue&&(a.maxValue=fe("maximal allowed value",t.maxValue)),null!=t.StepValue&&("any"===t.StepValue?a.StepValue="any":a.StepValue=Ce("step value",t.StepValue,0,1/0,!1));break;case"time-input":i=/^[0-9]{2}:[0-9]{2}$/;case"date-time-input":i=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/;case"date-input":i=i||/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;case"month-input":i=i||/^[0-9]{4}-[0-9]{2}$/;case"week-input":i=i||/^[0-9]{4}-W[0-9]{2}$/,null!=t.minValue&&(a.minValue=Qe("minimal allowed value",t.minValue,i)),null!=t.maxValue&&(a.maxValue=Qe("maximal allowed value",t.maxValue,i)),null!=t.StepValue&&("any"===t.StepValue?a.StepValue="any":a.StepValue=je("step value",t.StepValue,0));break;case"color-input":break;case"drop-down":a.ValueList=Dt("list of allowed values",t.ValueList);for(var l=0,s=a.ValueList.length;l<s;l++)M(a.ValueList[l])||p("InvalidArgument: element #"+(l+1)+" of the list of foreseen drop-down values is not a valid line of text");break;case"slider":null!=t.minValue&&(a.minValue=fe("minimal allowed value",t.minValue)),null!=t.maxValue&&(a.maxValue=fe("maximal allowed value",t.maxValue)),null!=t.StepValue&&("any"===t.StepValue?a.StepValue="any":a.StepValue=Ce("step value",t.StepValue,0,1/0,!1));break;case"text-input":case"html-input":case"css-input":case"javascript-input":case"json-input":null!=t.minLength&&(a.minLength=je("minimal input length",t.minLength,0)),null!=t.maxLength&&(a.maxLength=je("maximal input length",t.maxLength,0))}return a}function $i(e){e in oa&&p("InvalidArgument: forbidden property name "+Ln(e))}function Ji(e,t,n){Vo("property name",t),at("property getter",n);var r=ni(e,t);null==r?r={get:n,set:function(){ei(t)},configurable:!0,enumerable:!0}:("function"==typeof r.value&&p("InvalidProperty: method "+Ln(t)+" must not be redefined as a property"),0==r.configurable&&p("InvalidProperty: property "+Ln(t)+" cannot be redefined"),delete r.value,delete r.writable,r.get=n,r.set=r.set||function(){ei(t)}),Object.defineProperty(e,t,r)}function Gi(e,t,n){Vo("property name",t),at("property setter",n);var r=ni(e,t);null==r?r={get:function(){ti(t)},set:n,configurable:!0,enumerable:!0}:("function"==typeof r.value&&p("InvalidProperty: method "+Ln(t)+" must not be redefined as a property"),0==r.configurable&&p("InvalidProperty: property "+Ln(t)+" cannot be redefined"),delete r.value,delete r.writable,r.get=r.get||function(){ti(t)},r.set=n),Object.defineProperty(e,t,r)}function Zi(e){var t=e.parentElement;return null==t&&p("ImpossibleOperation: a detached visual can not be right or bottom aligned"),t}function Ki(e){var t=La(e);return{x:t.offsetLeft,Width:t.offsetWidth,y:t.offsetTop,Height:t.offsetHeight}}function Qi(e,t,n,r,o){var i,a,l,s,u,c,f,d,p=La(e),h={};function v(e){Object.assign(h,e)}if(null==t&&null==r||(i=Xi(e),a=Math.round(p.offsetLeft),l=Math.round(p.offsetWidth)),null!=t){s="left-width"===i?NaN:Zi(p).offsetWidth-a-l;var g=(t=Math.round(t))-a;switch(i){case"left-width":v({left:t+"px"});break;case"width-right":v({right:s-g+"px"});break;case"left-right":v({left:t+"px",right:s-g+"px"})}}if(null!=r&&(r=Math.round(r),v("left-right"===i?{right:(s=null!=h.right?parseFloat(h.right):Zi(p).offsetWidth-a-l)-(r-l)+"px"}:{width:r+"px"})),null==n&&null==o||(u=Yi(e),c=Math.round(p.offsetTop),f=Math.round(p.offsetHeight)),null!=n){d="top-height"===u?NaN:Zi(p).offsetHeight-c-f;var m=(n=Math.round(n))-c;switch(u){case"top-height":v({top:n+"px"});break;case"height-bottom":v({bottom:d-m+"px"});break;case"top-bottom":v({top:n+"px",bottom:d-m+"px"})}}null!=o&&(o=Math.round(o),v("top-bottom"===u?{bottom:(d=null!=h.bottom?parseFloat(h.bottom):Zi(p).offsetHeight-c-f)-(o-f)+"px"}:{height:o+"px"})),Un(h)||Ga(e,h)}function Xi(e){var t=La(e),n=t.style.left||"auto",r=t.style.right||"auto",o=t.style.width||"auto";return"auto"===r?"left-width":"auto"===o?"left-right":"auto"===n?"width-right":(console.error("could not determine horizontal anchors of given Visual\ngot left:"+n+", right:"+r+", width:"+o),"left-width")}function Yi(e){var t=La(e),n=t.style.top||"auto",r=t.style.bottom||"auto",o=t.style.height||"auto";return"auto"===r?"top-height":"auto"===o?"top-bottom":"auto"===n?"height-bottom":(console.error("could not determine vertical anchors of given Visual\ngot top:"+n+", bottom:"+r+", height:"+o),"top-height")}Ui.forEach((function(e){return Hi[e]=e}));var ea=Object.create(null);function ta(e){return na(JSON.parse(fi(e)))}function na(e){kt("master specification",e);var t=wo("master name",e.Name);t.startsWith("#")&&p("InvalidImport: the name of a master must not be global");var n=Ii(Ci(Qo("master version",e.Version)||"0.0.1")),r=In("master category",e.Category,Kn),o=Ye("master resources",e.Resources);null!=o&&""===o.trim()&&(o=null);var i=Ye("pending master resources",e.pendingResources);null!=i&&""===i.trim()&&(i=null);var a=Ye("master template",e.Template);null!=a&&""===a.trim()&&(a='<div class="WAT '+t+'"></div>');var l=Ye("pending master template",e.pendingTemplate);null!=l&&""===l.trim()&&(l=null);var s=ia(e.Classes),u=rt("pending master classes",e.pendingClasses),c=aa(e.Styles),f=Ye("pending master CSS styles",e.pendingStyles),d=Ye("master script",e.Script),h=Ye("pending master script",e.pendingScript),v=function(e){if(_t("list of custom properties",e),null==e||0===e.length)return[];var t=[],n=Object.create(null);return e.forEach((function(e){var r=qi("property specification",e);t.push(n[r.Identifier]=r)})),t}(e.Properties),g=function(e){Xe("list of undesignable properties",e);var t=Object.create(null);if(null==e)return t;return e.trim().replace(/\s+/g," ").split(" ").forEach((function(e){Bo("name of an undesignable property",e),t[e]=e})),t}(e.undesignableProperties),m="plain"+r;if(t!==m)for(var b in ea[m].undesignablePropertySet)g[b]=b;return{Name:t,Version:n,Category:r,Resources:o,pendingResources:i,Template:a,pendingTemplate:l,Classes:s,pendingClasses:u,Styles:c,pendingStyles:f,Script:d,pendingScript:h,Properties:v,undesignablePropertySet:g,ErrorInfo:void 0,compiledScript:void 0,UsageCount:0}}var ra=["checkbox","choice","textline-input","password-input","number-input","search-input","phone-number-input","email-address-input","url-input","time-input","date-time-input","date-input","month-input","week-input","color-input","drop-down","slider","text-input","html-input","css-input","javascript-input","json-input"],oa=Object.create(null);function ia(e){if(Xe("master class presets",e),null==e)return[];var t=e.trim().replace(/\s+/g," ").split(" ");return 0===t.length?[]:(t.forEach((function(e){go(e)||p("InvalidSpecification: master specification contains invalid class name "+Ln(e))})),t)}function aa(e){var t;if(Xe("master style presets",e),null!=e&&""!==(e=e.trim())){var n=document.createElement("style");n.textContent="#"+Math.round(9999*Math.random())+" {"+e+"}",document.implementation.createHTMLDocument("").body.appendChild(n);for(var r=(null===(t=n.sheet)||void 0===t?void 0:t.cssRules[0]).style,o=Object.create(null),i=0,a=r.length;i<a;i++){var l=r[i],s=r.getPropertyValue(l);o[l]=s}return o}}function la(e,t){var n=e.Name;if(ua(n)&&p("ForbiddenRegistration: intrinsic master "+Ln(n)+" must not be replaced"),n in ea){var r=function(e,t){switch(!0){case function(e,t){return e.major===t.major&&e.minor===t.minor&&e.Patch===t.Patch&&e.Build===t.Build}(e,t):return"sameVersion";case e.major<t.major:return"incompatibleDowngrade";case e.major>t.major:return"incompatibleUpgrade";case 0===e.major&&e.minor<t.minor:return"incompatibleDowngrade";case 0===e.major&&e.minor>t.minor:return"incompatibleUpgrade";case 0===e.major&&e.Patch<t.Patch:return"incompatibleDowngrade";case 0===e.major&&e.Patch>t.Patch:return"compatibleUpgrade";case 0===e.major&&e.Build<t.Build:return"compatibleDowngrade";case 0===e.major&&e.Build>t.Build:return"compatibleUpgrade";case e.minor<t.minor:return"incompatibleDowngrade";case e.minor>t.minor:return"compatibleUpgrade";case e.Patch<t.Patch:return"compatibleDowngrade";case e.Patch>t.Patch:return"compatibleUpgrade";case e.Build<t.Build:return"compatibleDowngrade";case e.Build>t.Build:return"compatibleUpgrade";default:p("InternalError: unforeseen version relationship")}}(e.Version,ea[n].Version);switch(t[r]){case"perform":return!0;case"ignore":return!1;case"abort":switch(r){case"compatibleDowngrade":p("ForbiddenImport: this import would result in a downgrade of master "+Ln(n));case"incompatibleDowngrade":p("ForbiddenImport: this import would result in an incompatible downgrade of master "+Ln(n));case"sameVersion":p("ForbiddenImport: this import would overwrite master "+Ln(n));case"compatibleUpgrade":p("ForbiddenImport: this import would result in an upgrade of master "+Ln(n));case"incompatibleUpgrade":p("ForbiddenImport: this import would result in an incompatible upgrade of master "+Ln(n))}}return!1}return!0}var sa=Object.create(null);function ua(e){return null!=sa[e]}function ca(e){ua(e.Name)&&p("ForbiddenOperation: an intrinsic master must not be (re-)registered"),e.ErrorInfo=void 0,null!=e.Resources&&Mi(e.Resources),null!=e.Script&&da(e.Script,e),e.UsageCount=0;var t=e.Name;ea[t]=e,cl&&pa(t)}function fa(e){(ua(e)&&p("ForbiddenOperation: an intrinsic master must not be unregistered"),e in ea)&&(null!=ea[e].Resources&&Ei(ea[e].Resources),function(e){var t=ea[e];if(null==t)return;mi(document.body,"mousedown mousemove mouseup","."+e),mi(document.body,"mouseenter mouseleave","."+e),mi(document.body,"keydown keypress keyup","."+e),mi(document.body,"input change click","."+e);var n=t.Resources;null!=n&&Ei(n)}(e),delete ea[e],cl&&pa(e))}function da(e,t){if(delete t.compiledScript,null!=e)try{t.compiledScript=new Function("toGet","toSet","on","off","trigger","$",e)}catch(e){t.ErrorInfo={Title:"Compilation Error",longMessage:"Script of Master "+Ln(t.Name)+" could not be compiled",shortMessage:e.message,Reason:e,Applet:(n=al()[0],Wa(n)),Sufferer:t.Name,Property:"Script"}}var n}function pa(e){cl&&ii(document.body.querySelectorAll('.WAT[data-wat-master="'+e+'"]'),(function(e){return Za(Wa(e))}))}function ha(e){yo("master name",e);var t=ea[e];return null==t&&p("NoSuchMaster: a master with the name "+Ln(e)+" does not exist"),t}function va(e,t,n){void 0===n&&(n=!0),yo("new master name",t),oe("master instance update setting",n);var r=ha(e);e!==t&&(null!=ea[t]&&p("MasterExists: a master with the name "+Ln(t)+" exists already"),delete ea[e],r.Name=t,r.Version.Build=Si(),ea[t]=r,n?(ii(document.body.querySelectorAll('.WAT[data-wat-master="'+e+'"]'),(function(e){di(e,"wat-master",t)})),cl&&pa(t)):cl&&(pa(e),pa(t)))}function ga(e){return null==e?"":e.join(" ")}function ma(e){var t="";if(null!=e)for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+"; ");return t}function ba(e,t){if(Bo("property name",t),t in oa)return!1;var n=ha(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++){if(n[r].Identifier===t)return!0}return!1}function ya(e,t,n){if(Vo("old property identifier",t),Vo("new property identifier",n),$i(t),$i(n),t!==n){var r=wa(e,t);r<0&&p("NoSuchProperty: a property with the name "+Ln(t)+" does not exist"),wa(e,n)>=0&&p("PropertyExists: a property with the name "+Ln(n)+" exists already"),ea[e].Properties[r].Identifier=n}}function wa(e,t){Vo("property name",t),$i(t);var n=ha(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++)if(n[r].Identifier===t)return r;return-1}function xa(e,t){var n=Object.create(null);function r(e){switch(n[e.Master]=!0,e.Category){case"Applet":e.CardList.forEach((function(e){return r(e)}))(e).OverlayList.forEach((function(e){return r(e)}));break;case"Card":case"Overlay":case"Compound":e.ComponentList.forEach((function(e){return r(e)}))}}e.forEach((function(e){return r(e)})),t&&(delete n.plainApplet,delete n.plainCard,delete n.plainOverlay,delete n.plainControl,delete n.plainCompound);var o=[];for(var i in n)o.push(i);return o}function Oa(e,t){return _a(e).globalVisualSet[t]}function Ca(e,t){var n=_a(e).globalVisualSet,r=t.Name;r in n&&p('VisualExists: a visual with the global name "'+r+'" exists already'),n[r]=t}function Ia(e,t){var n=t.Name;delete _a(e).globalVisualSet[n]}function Aa(e){var t,n,r,o,i,a,l,s,u,c,f,d;function v(){s=!1,c=Object.create(null),f=Object.create(null),d=[]}function g(t){if(r.length>0&&function(e,t){for(var n=0,r=e.length;n<r;n++)w(e[n],t)}(r,t),"#"===t[0]){var o=Oa(e,t);null!=o&&(n[t]=o.Value)}return n[t]}function m(t,r,o,a){void 0===o&&(o=!1);var h=zn(n[t],r);if(!h||o){if(t in c){if(h)return;p('CircularDependency: trigger variable "'+t+'" has been changed during an ongoing recalculation')}if(n[t]=r,c[t]=r,"#"===t[0]&&!a){var g=Oa(e,t);null!=g&&(g.Value=r)}if(function(e){var t=l[e];if(null==t)return;var n=!1;for(var r in t)r in f||(n=!0,f[r]=t[r]);if(!n)return;for(var r in d=[],f)d.push(r);d.sort((function(e,t){var n=i.get(f[e])||0,r=i.get(f[t])||0;switch(!0){case n<r:return-1;case n===r:return 0;default:return 1}}))}(t),!s&&(function(){s=!0,u=void 0;for(;d.length>0;){var e=d.shift(),t=f[e];delete f[e];try{x(t)}catch(e){console.error("error during automatic recalculation of reactive functions",e),u=e}}v()}(),null!=u))throw u}}function b(e,n,r,l){void 0===r&&(r=""),void 0===l&&(l=!1);var s=t.get(n);if(null==s){s="BRE-"+(Sa+=1),t.set(n,s);var u=_a(e).reactiveFunctionList;if(null==u?_a(e).reactiveFunctionList=[n]:u.push(n),o.set(n,Object.create(null)),i.set(n,0),""!==(r=r.trim().replace(/\s+/g," "))){for(var c=r.split(" "),f=0,d=c.length;f<d;f++)w(n,c[f]);if(!l){var p=o.get(n),h=[];for(var v in p)h.push(v);return void a.set(n,h)}}}x(n)}function y(e,n){var r=t.get(n);if(null!=r){var i=_a(e).reactiveFunctionList;if(null!=i){var a=i.indexOf(n);a>=0&&i.splice(a,1)}var s=o.get(n);for(var u in s){var c=l[u];delete c[r],Un(c)&&delete l[u]}}}function w(e,n){var r=o.get(e);if(null==r&&p("InternalError: unregistered function"),!(n in r)){r[n]=!0,i.set(e,(i.get(e)||0)+1);var a=l[n];null==a&&(a=l[n]=Object.create(null));var s=t.get(e);null==s&&p("InternalError: unregistered function"),a[s]=e}}function x(e){var t=void 0,o=a.get(e);if(null!=o){t=Object.create(null);for(var i=0,l=o.length;i<l;i++){var s=o[i];t[s]=n[s]}}r.unshift(e);try{e(t),r.shift()}catch(e){throw r.shift(),e}}return t=new WeakMap,n=Object.create(null),r=[],o=new WeakMap,i=new WeakMap,a=new WeakMap,l=Object.create(null),v(),{$:function(e,t,n,r){switch(arguments.length-1){case 0:p("MissingArgument: reactive variable name or function expected");case 1:if(O(t))return g(t);if(E(t))return b(e,t);break;case 2:if(O(t))return m(t,n,!1);if(E(t)){if(h(n))return 1==n?b(e,t):y(e,t);if(O(n))return b(e,t,n,!1)}break;case 3:if(O(t)&&h(r))return m(t,n,r);if(E(t)&&O(n)&&h(r))return b(e,t,n,r)}p("InvalidArguments: variable name (with opt. value) or function (with opt. variable names) expected")},setReactiveVariable:m,clearReactiveVariable:function(e){delete n[e]},unregisterReactiveFunctionsOfVisual:function(e){var t=_a(e).reactiveFunctionList;if(null!=t)for(var n=0,r=t.length;n<r;n++)y(e,t[0])}}}"Applet Card Overlay Compound Control".split(" ").forEach((function(e){return sa["plain"+e]=!0}));var Sa=0;function Pa(e){if(null!=Qa){var t=e.target.closest(".WAT");if(null!=t){var n=Wa(t);null!=n&&Qa.inhibitsEventsFrom(n)&&(e.stopPropagation(),e.preventDefault())}}}function Ta(e){for(var t,n,r,o,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(O(i[0])&&i[0].startsWith("@")){var l=i.shift().slice(1),s=void 0;"."===l[0]?(yo("tap point master name",l.slice(1)),s=li(e.Peer,".WAT"+l)):(Ao("tap point name",l),s=si(e.Peer,".WAT",(function(e){return Wa(e).Name===l}))),null!=s&&(t=Wa(s))}else t=e;if(n=wo("event name",i.shift()),r=O(i[0])?i.shift():void 0,o=ut("event handler",i.shift()),null!=t){var u=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n[0];if(null!=Qa&&Qa.inhibitsEventsFrom(e))return a.stopPropagation(),void a.preventDefault();t===e&&null==r&&a.target!==e.Peer||o.apply(e,n)},c=Fa.get(e),f=c.EventHandlers;null==f&&(c.EventHandlers=f=[]);for(var d=0,p=f.length;d<p;d++){var h=f[d];if(h.TapPoint===t&&h.EventSelector===r&&h.EventName===n&&h.EventHandler===o)return}f.push({TapPoint:t,EventName:n,EventSelector:r,EventHandler:o,actualHandler:u}),gi(t.Peer,n,r,u)}}function Ma(e){for(var t,n,r,o,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(O(i[0])&&i[0].startsWith("@")){var l=i.shift().slice(1),s=void 0;"."===l[0]?(yo("tap point master name",l.slice(1)),s=li(e.Peer,".WAT"+l)):(Ao("tap point name",l),s=si(e.Peer,".WAT",(function(e){return Wa(e).Name===l}))),null!=s&&(t=Wa(s))}else t=e;if(n=bo("event name",i.shift()),r=O(i[0])?i.shift():null,o=lt("event handler",i.shift()),null!=t){var u=Fa.get(e),c=u.EventHandlers;if(null!=c){for(var f=c.length-1;f>=0;f--){var d=c[f];if(!(d.TapPoint!==t||null!=n&&d.EventName!==n||d.EventSelector!==r||null!=o&&d.EventHandler!==o)){var p=d.actualHandler;mi(t.Peer,d.EventName,d.EventSelector,p),c.splice(f,1)}}0===c.length&&delete u.EventHandlers}}}function Ea(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(O(n[0])&&n[0].startsWith("@")){var o=n.shift().slice(1),i=void 0;"."===o[0]?(yo("injection point master name",o.slice(1)),i=li(e.Peer,".WAT"+o)):(Ao("injection point name",o),i=si(e.Peer,".WAT",(function(e){return Wa(e).Name===o}))),null!=i&&(t=Wa(i))}else t=e;if(null!=t){var a=n.shift();bi(t.Peer,a,n)}}function ja(e){return _a(e).ErrorInfo}function ka(e,t){var n=_a(e);null==t?(delete n.ErrorInfo,pi(ai(n.Peer.children,".WAT-ErrorIndicator"))):null==n.ErrorInfo&&(n.ErrorInfo=t,pi(ai(n.Peer.children,".WAT-ErrorIndicator")),n.Peer.appendChild(hi('<button class="WAT-ErrorIndicator"></button>')))}sl((function(){gi(document.body,"value-changed",void 0,(function(e){var t,n=Wa(e.target);if(null!=n){var r=n.Name;"#"===(r||"")[0]&&(null===(t=_a(n.Applet).ReactivityContext)||void 0===t||t.setReactiveVariable(r,e.detail[0],!1,"wasControlValueChange"))}}))})),sl((function(){document.body.addEventListener("mousedown",Pa),document.body.addEventListener("mousemove",Pa),document.body.addEventListener("mouseup",Pa),document.body.addEventListener("mouseenter",Pa),document.body.addEventListener("mouseleave",Pa),document.body.addEventListener("keydown",Pa),document.body.addEventListener("keypress",Pa),document.body.addEventListener("keyup",Pa),document.body.addEventListener("input",Pa),document.body.addEventListener("change",Pa),document.body.addEventListener("click",Pa)}));var Na=Object.create(null),Ba=new WeakMap;function Wa(e){return null==e?void 0:Ba.get(e)}function Va(e){hr("element",e);var t=Ba.get(e);return null!=t?t:null==(t=e.closest(".WAT"))?void 0:Ba.get(t)}var Fa=new WeakMap;function _a(e){return Fa.get(e)}function La(e){return Fa.get(e).Peer}function Ra(e){var t=e.closest(".WAT.Applet");return null==t?void 0:Wa(t)}function Da(e,t){var n=di(e,"wat-master");return go(n)?n:null==t?"plainVisual":"plain"+t}function za(e,t){var n=function(e,t){switch(!0){case e.classList.contains("Applet"):return"Applet";case e.classList.contains("Card"):return"Card";case e.classList.contains("Overlay"):return"Overlay";case e.classList.contains("Control"):return"Control";case e.classList.contains("Compound"):return"Compound";default:switch(t){case"Applet":return"Applet";case"Layer":case"Card":return"Card";case"Overlay":return"Overlay";case"Component":return ai(e.children,".WAT.Control,.WAT.Compound").length>0?"Compound":"Control";case"Control":return"Control";case"Compound":return"Compound";default:p("BrokenVisual: cannot determine category of given visual")}}}(e,t);if(function(e,t){switch(t){case"Applet":return"Applet"!==e;case"Layer":return"Card"!==e&&"Overlay"!==e;case"Card":return"Card"!==e;case"Overlay":return"Overlay"!==e;case"Component":return"Control"!==e&&"Compound"!==e;case"Control":return"Control"!==e;case"Compound":return"Compound"!==e;default:p("InternalError: unforeseen visual category")}}(n,t)){var r=n;switch(t){case"Layer":n="Card";break;case"Component":n=ai(e.children,".WAT.Control,.WAT.Compound").length>0?"Compound":"Control";default:n=t}var o=qa(n,e),i=Ra(e);return null!=i&&(ka(o,{Title:"Inappropriate Category",longMessage:"This visual belongs to category "+Ln(r)+", which is not allowed here",shortMessage:"inappropriate category "+Ln(r),Applet:i,Sufferer:o,Property:"Category"}),a()),o}function a(){switch(n){case"Applet":ai(e.children,".WAT.Card,.WAT.Overlay").forEach((function(e){Ua(e,"Layer")}));break;case"Card":case"Overlay":case"Compound":ai(e.children,".WAT.Control,.WAT.Compound").forEach((function(e){Ua(e,"Component")}))}}var l=qa(n,e),s=Ra(e);if(null!=s){var u=Da(e,n),c=ea[u];if(null==c)return ka(l,{Title:"No such Master",longMessage:"A visual master called "+Ln(u)+" is not available",shortMessage:"unknown master "+Ln(u),Applet:s,Sufferer:l,Property:"Master"}),a(),l;var f=c.Classes;if(null!=f&&f.forEach((function(t){e.classList.add(t)})),c.Category!==n)return ka(l,{Title:"Inappropriate Master",longMessage:"Master "+Ln(u)+" is not foreseen for category "+Ln(n),shortMessage:"inappropriate master "+Ln(u),Applet:s,Sufferer:l,Property:"Master"}),a(),l;var d=function(e){var t=di(e,"wat-master-version");return Zo(t)?Ci(t):void 0}(e);if(null!=d&&!function(e,t){if(null==e.major)return!0;if(e.major!==t.major)return!1;if(null==e.minor)return!0;if(0===t.major){if(e.minor!==t.minor)return!1}else if(e.minor>t.minor)return!1;return null==e.Patch||e.Patch<=t.Patch}(d,c.Version))return ka(l,{Title:"Inappropriate Version",longMessage:"This visual requires a different version of master "+Ln(u)+" than available",shortMessage:"inappropriate master "+Ln(u),Applet:s,Sufferer:l,Property:"Version"}),a(),l;if(null!=c.ErrorInfo)return ka(l,c.ErrorInfo),a(),l;"Applet"===n&&0===ai(e.children,".WAT.Card").length&&e.insertBefore(hi('<div class="WAT Card" data-wat-master="plainCard" style="visibility:visible"></div>'),e.firstChild);var h=function(e){var t=di(e,"wat-name");return Oo(t)?t:void 0}(e);if(null!=h&&"#"===h[0])try{Ca(s,l)}catch(e){return ka(l,{Title:"Global name Collision",longMessage:"The global name of this visual "+Ln(h)+" has already been used",shortMessage:"global name collision "+Ln(h),Applet:s,Sufferer:l,Property:"Name"}),a(),l}var v=function(e){var t=di(e,"wat-state");if(null==t)return null;try{return JSON.parse(t)}catch(e){return null}}(e);null!=v&&(_a(l).State=v);var g=function(e){var t=di(e,"wat-script");return P(t)?t:void 0}(e);if(null!=c.compiledScript||null!=g){var m=Ji.bind(null,l),b=Gi.bind(null,l),y=Ta.bind(null,l),w=Ma.bind(null,l),x=Ea.bind(null,l),O=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.unshift(l),null===(e=_a(s).ReactivityContext)||void 0===e?void 0:e.$.apply(null,t)};if(null!=c.compiledScript)try{c.compiledScript.call(l,m,b,y,w,x,O)}catch(e){return ka(l,{Title:"Execution Error in Master Script",longMessage:"The script of master "+Ln(u)+" could not be applied to this visual",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Master"}),a(),l}var C=void 0;if(null!=g){try{C=new Function("toGet","toSet","on","off","trigger","$",g)}catch(e){return ka(l,{Title:"Compilation Error",longMessage:"The script of this visual could not be compiled",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Script"}),a(),l}try{C.call(l,m,b,y,w,x,O)}catch(e){return ka(l,{Title:"Execution Error in Visual Script",longMessage:"The script of this visual failed",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Script"}),a(),l}}}a()}return l}function Ua(e,t){za(e,t)}var Ha=0;function qa(e,t){var n,r,o=Ba.get(t);if(null==o){var i=ui(t,"data-wat-unique-id");if(null!=i){var a=parseInt(i,10);w(a)&&a<Ha&&null==Na[a]&&(n=a),ui(t,"data-wat-unique-id",void 0)}}else n=Fa.get(o).uniqueId;switch(null==n&&(n=$a()),e){case"Applet":r=new Ya;break;case"Card":r=new nl;break;case"Overlay":r=new rl;break;case"Control":r=new il;break;case"Compound":r=new ol;break;default:p("InternalError: unforeseen visual category")}if(Ba.set(t,r),Na[n]=r,t.classList.add("WAT",e),Fa.set(r,{uniqueId:n,Peer:t}),"Applet"===e){var l=Fa.get(r);l.globalVisualSet=Object.create(null),l.ReactivityContext=Aa(r)}return r}function $a(){return++Ha}function Ja(e,t,n){var r=ea[e.Master];if(null!=(null==r?void 0:r.Styles)&&t in r.Styles){var o=r.Styles[t];if("initial"===o)return;n=o}ci(La(e),t,n)}function Ga(e,t){var n=void 0,r=ea[e.Master];if(null==(null==r?void 0:r.Styles))for(var o in t)t.hasOwnProperty(o)&&null!==t[o]&&(null==n&&(n={}),n[o]=t[o]);else{var i=r.Styles;for(var o in t)t.hasOwnProperty(o)&&!(o in i)&&(null==n&&(n={}),n[o]=t[o])}if(null!=n)for(var o in n)n.hasOwnProperty(o)&&ci(La(e),o,n[o])}function Za(e,t){var n=e.Peer;null!=t&&(Da(n),n.data("wat-master",t)),e.trigger("prepare-refresh"),Ka(e),Ua(n,e.Category)}function Ka(e,t){var n;!function(e){var t=Fa.get(e),n=t.EventHandlers;if(null!=n){for(var r=0,o=n.length;r<o;r++){var i=n[r],a=i[0],l=i[1],s=i[2],u=i[3];mi(a.Peer,l,s,u)}delete t.EventHandlers}}(e);var r=e.uniqueId;w(r)&&delete Na[r];var o=e.Name;null!=o&&"#"===o[0]&&Ia(e.Applet,e),null===(n=_a(e.Applet).ReactivityContext)||void 0===n||n.unregisterReactiveFunctionsOfVisual(e),t&&ai(e.Peer.children,".WAT.Card,.WAT.Overlay,.WAT.Compound,.WAT.Control").forEach((function(e){Ka(Wa(e),t)}))}var Qa,Xa=function(){function e(){}return Object.defineProperty(e.prototype,"uniqueId",{get:function(){return _a(this).uniqueId},set:function(e){Be("new unique id",e);var t=_a(this).uniqueId;switch(!0){case e===t:return;case e>Ha:p("InvalidArgument: forbidden id value given");case null!=Na[e]:p("InvalidArgument: the given id is not unique")}delete Na[t],Na[e]=this,_a(this).uniqueId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Peer",{get:function(){return _a(this).Peer},set:function(e){ei("Peer")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAttached",{get:function(){return document.body.contains(_a(this).Peer)},set:function(e){ei("isAttached")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){var e=ui(La(this),"id");return uo(e)?e:void 0},set:function(e){co("id",e);var t=La(this);e!=ui(t,"id")&&(null==e?ui(t,"id",void 0):null==document.getElementById(e)?ui(t,"id",e):p("InvalidArgument: the given HTML id is not unique"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){var e=di(La(this),"wat-name");return Oo(e)?e:void 0},set:function(e){var t,n,r,o;Co("name",e);var i=La(this),a=di(i,"wat-name");if(e!=a){var l=this.Applet;a.startsWith("#")&&(Ia(l,a),null===(n=null===(t=_a(this.Applet))||void 0===t?void 0:t.ReactivityContext)||void 0===n||n.clearReactiveVariable(a)),di(i,"wat-name",e||void 0),e.startsWith("#")&&(Ca(l,this),null===(o=null===(r=_a(this.Applet))||void 0===r?void 0:r.ReactivityContext)||void 0===o||o.setReactiveVariable(e,this.Value))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Label",{get:function(){var e=di(La(this),"wat-label");return Po(e)?e:void 0},set:function(e){To("label",e),di(La(this),"wat-label",e||void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Category",{get:function(){var e=La(this);switch(!0){case e.classList.contains("Applet"):return"Applet";case e.classList.contains("Card"):return"Card";case e.classList.contains("Overlay"):return"Overlay";case e.classList.contains("Control"):return"Control";case e.classList.contains("Compound"):return"Compound";default:p("BrokenVisual: cannot determine category of given visual")}},set:function(e){ei("Category")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Master",{get:function(){var e=di(La(this),"wat-master");if(go(e))return e;p("InvalidVisual: the given visual does not have a master")},set:function(e){if(mo("master",e),null==e)e="plain"+this.Category;else{var t=ea[e];null!=t&&t.Category!==this.Category&&p("InvalidArgument: the given master is not made for visuals of type "+Ln(this.Category))}var n=La(this);e!=di(n,"wat-master")&&(di(n,"wat-master",e),Za(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ErrorInfo",{get:function(){return ja(this)},set:function(e){ei("ErrorInfo")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Container",{get:function(){var e=li(La(this),".WAT.Card,.WAT.Overlay,.WAT.Compound");return null==e?void 0:Wa(e)},set:function(e){ei("Container")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Layer",{get:function(){var e=La(this).closest(".WAT.Card,.WAT.Overlay");return null==e?void 0:Wa(e)},set:function(e){ei("Layer")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Applet",{get:function(){var e=La(this).closest(".WAT.Applet");return null==e?void 0:Wa(e)},set:function(e){ei("Applet")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mayBeDesigned",{get:function(){return"false"!==this.Peer.data("wat-designability")},set:function(e){ae("designability",e),this.Peer.data("wat-designability",!1===e?"false":null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mayBeDeleted",{get:function(){return"false"!==this.Peer.data("wat-deletability")},set:function(e){ae("deletability",e),this.Peer.data("wat-deletability",!1===e?"false":null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return"hidden"!==ci(this.Peer,"visibility")},set:function(e){ae("visibility",e),Ja(this,"visibility",!0===e?"visible":"hidden")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isShown",{get:function(){var e=this.Peer;if(!document.body.contains(e))return!1;for(;e!==document.body;){if("none"===ci(e,"display")||"hidden"===ci(e,"visibility"))return!1;e=e.parentElement}return!0},set:function(e){ei("isShown")},enumerable:!1,configurable:!0}),e.prototype.show=function(){this.isVisible=!0},e.prototype.hide=function(){this.isVisible=!1},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return!this.Peer.disabled},set:function(e){ae("enabling",e),this.Peer.disabled=!e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this.Peer.disabled},set:function(e){ae("disabling",e),this.Peer.disabled=e},enumerable:!1,configurable:!0}),e.prototype.enable=function(){this.isEnabled=!1},e.prototype.disable=function(){this.isEnabled=!0},Object.defineProperty(e.prototype,"PropertySet",{get:function(){var e=Object.create(null),t=ea[this.Master];if(null==t)return e;var n=t.Properties;if(null==n)return e;for(var r=0,o=n.length;r<o;r++){var i=n[r];e[i.Identifier]=Object.assign(Object.create(null),i),null!=i.ValueList&&(e[i.Identifier].ValueList=i.ValueList.slice())}return e},set:function(e){ei("PropertySet")},enumerable:!1,configurable:!0}),e.prototype.PropertyMayBeDesigned=function(e){Vo("property name",e);var t=ea[this.Master];return null==(null==t?void 0:t.undesignablePropertySet)||!(e in t.undesignablePropertySet)},Object.defineProperty(e.prototype,"State",{get:function(){return _a(this).State},set:function(e){null==e?delete _a(this).State:_a(this).State=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Value",{get:function(){var e=_a(this).State;return null==e?void 0:e.Value},set:function(e){var t=_a(this).State;null==e?null!=t&&delete t.Value:(null==t&&(t=_a(this).State={}),t.Value=e),this.trigger("value-changed",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Script",{get:function(){return this.Peer.data("wat-script")},set:function(e){ei("Script")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingScript",{get:function(){return this.Peer.data("wat-pending-script")},set:function(e){Xe("script",e),this.Peer.data("wat-pending-script",""===(e||"").trim()?null:e)},enumerable:!1,configurable:!0}),e.prototype.activatePendingScript=function(){this.clearPendingScriptError();var e=_a(this),t=this.pendingScript;if(null==t)""!==(this.Script||"").trim()&&(this.Peer.data("wat-script",null),Za(this));else{var n=void 0;try{new Function("toGet","toSet","on","off","trigger","$",t)}catch(t){n={Title:"Compilation Error",longMessage:"pending visual script could not be compiled",shortMessage:t.message,Reason:t,Applet:this.Applet,Sufferer:this,Property:"pendingScript"},e.pendingScriptError=n}null==n&&(this.Peer.data("wat-script",t),this.Peer.data("wat-pending-script",null),Za(this))}},Object.defineProperty(e.prototype,"pendingScriptError",{get:function(){return _a(this).pendingScriptError},set:function(e){ei("pendingScriptError")},enumerable:!1,configurable:!0}),e.prototype.clearPendingScriptError=function(){delete _a(this).pendingScriptError},Object.defineProperty(e.prototype,"Classes",{get:function(){return this.Peer.classList.slice().sort().join(" ")},set:function(e){Re("class list",e);for(var t=e.trim().replace(/\s+/g," ").split(" "),n=0,r=t.length;n<r;n++){go(u=t[n])||p("InvalidArgument: invalid class name "+Ln(u)+" given")}var o,i,a=(o=t,i=Object.create(null),o.forEach((function(e){return i[e]=e})),i);a.WAT=!0,a[this.Category]=!0;var l=ea[this.Master];null!=(null==l?void 0:l.Classes)&&l.Classes.forEach((function(e){return a[e]=!0}));var s=[];for(var u in a)s.push(u);this.Peer.className=s.join(" ")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TabIndex",{get:function(){var e=ui(this.Peer,"tabindex");return null==e?void 0:parseInt(e,10)},set:function(e){Te("tab index",e,-1,32767),ui(this.Peer,"tabindex",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PointerSensitivity",{get:function(){return"none"!==ci(this.Peer,"pointer-events")},set:function(e){ae("pointer sensitivity",e),Ja(this,"pointer-events",!0===e?"auto":"none")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Overflows",{get:function(){function e(e){switch(e){case"visible":case"hidden":case"scroll":case"auto":return e;case"clip":return"hidden";case"overlay":default:return"auto"}}var t=ci(this.Peer,"overflow").split(" "),n=e(t[0]);return[n,e(t[1]||n)]},set:function(e){_t("list of overflow settings",e),null!=e&&(Cn("horizontal overflow",e[0],sr),Cn("vertical overflow",e[1],sr)),Ja(this,"overflow",null==e?null:e.join(" "))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextOverflow",{get:function(){return"clip"===ci(this.Peer,"text-overflow")?"clip":"ellipsis"},set:function(e){xn("text overflow",e,ur),Ja(this,"text-overflow",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Opacity",{get:function(){return Math.round(100*parseFloat(ci(this.Peer,"opacity")))},set:function(e){we("opacity",e,0,1),Ja(this,"opacity",Math.round(e)+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return Ki(this).x},set:function(e){Do("x coordinate",e),Qi(this,e,void 0,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return Ki(this).y},set:function(e){Do("y coordinate",e),Qi(this,void 0,e,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Width",{get:function(){return Ki(this).Width},set:function(e){$o("width",e),Qi(this,void 0,void 0,e,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return Ki(this).Height},set:function(e){$o("height",e),Qi(this,void 0,void 0,void 0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Position",{get:function(){var e=Ki(this);return{x:e.x,y:e.y}},set:function(e){kt("position",e),Do("x coordinate",e.x),Do("y coordinate",e.y),Qi(this,e.x,e.y,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Size",{get:function(){var e=Ki(this);return{Width:e.Width,Height:e.Height}},set:function(e){kt("size",e),$o("width",e.Width),$o("height",e.Height),Qi(this,void 0,void 0,e.Width,e.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Geometry",{get:function(){return Ki(this)},set:function(e){Tt("visual geometry",e),Do("x coordinate",e.x),Do("y coordinate",e.y),$o("width",e.Width),$o("height",e.Height),Qi(this,e.x,e.y,e.Width,e.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"GeometryOnDisplay",{get:function(){return{x:(e=La(this).getBoundingClientRect()).left,Width:e.width,y:e.top,Height:e.height};var e},set:function(e){ei("GeometryOnDisplay")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAnchoring",{get:function(){return Xi(this)},set:function(e){Cn("horizontal anchoring",e,Qn),function(e,t){if(Xi(e)!==t){var n,r=La(e),o=Math.round(r.offsetLeft),i=Math.round(r.offsetWidth),a=Math.round(Zi(r).offsetWidth-o-i);switch(t){case"left-width":n={left:o+"px",width:i+"px",right:"auto"};break;case"width-right":n={left:"auto",width:i+"px",right:a+"px"};break;case"left-right":n={left:o+"px",width:"auto",right:a+"px"};break;default:p("InternalError: unforeseen horizontal anchoring")}Ga(e,n)}}(this,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalAnchoring",{get:function(){return Yi(this)},set:function(e){Cn("vertical anchoring",e,Xn),function(e,t){if(Yi(e)!==t){var n,r=La(e),o=Math.round(r.offsetTop),i=Math.round(r.offsetHeight),a=Math.round(Zi(r).offsetHeight-o-i);switch(t){case"top-height":n={top:o+"px",height:i+"px",bottom:"auto"};break;case"height-bottom":n={top:"auto",height:i+"px",bottom:a+"px"};break;case"top-bottom":n={top:o+"px",height:"auto",bottom:a+"px"};break;default:p("InternalError: unforeseen vertical anchoring")}Ga(e,n)}}(this,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffsets",{get:function(){return function(e){var t=La(e),n=Math.round(t.offsetLeft),r=Math.round(t.offsetWidth);switch(Xi(e)){case"left-width":return[n,r];case"width-right":return[r,Math.round(Zi(t).offsetWidth-n-r)];case"left-right":return[n,Math.round(Zi(t).offsetWidth-n-r)];default:return[n,r]}}(this)},set:function(e){switch(Xi(this)){case"left-width":Lo('"left" offset',e[0]),Ho('"width" offset',e[1]);break;case"width-right":Ho('"width" offset',e[0]),Lo('"right" offset',e[1]);break;case"left-right":Lo('"left" offset',e[0]),Lo('"right" offset',e[1])}!function(e,t){switch(La(e),Xi(e)){case"left-width":null!=t[0]&&Ja(e,"left",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"width",Math.round(t[1])+"px");break;case"width-right":null!=t[0]&&Ja(e,"width",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"right",Math.round(t[1])+"px");break;case"left-right":null!=t[0]&&Ja(e,"left",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"right",Math.round(t[1])+"px")}}(this,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffsets",{get:function(){return function(e){var t=La(e),n=Math.round(t.offsetTop),r=Math.round(t.offsetHeight);switch(Yi(e)){case"top-height":return[n,r];case"height-bottom":return[r,Math.round(Zi(t).offsetHeight-n-r)];case"top-bottom":return[n,Math.round(Zi(t).offsetHeight-n-r)];default:return[n,r]}}(this)},set:function(e){switch(Yi(this)){case"top-height":Lo('"top" offset',e[0]),Ho('"height" offset',e[1]);break;case"height-bottom":Ho('"height" offset',e[0]),Lo('"bottom" offset',e[1]);break;case"top-bottom":Lo('"top" offset',e[0]),Lo('"bottom" offset',e[1])}!function(e,t){switch(Yi(e)){case"top-height":null!=t[0]&&Ja(e,"top",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"height",Math.round(t[1])+"px");break;case"height-bottom":null!=t[0]&&Ja(e,"height",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"bottom",Math.round(t[1])+"px");break;case"top-bottom":null!=t[0]&&Ja(e,"top",Math.round(t[0])+"px"),null!=t[1]&&Ja(e,"bottom",Math.round(t[1])+"px")}}(this,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return parseFloat(ci(this.Peer,"min-width"))},set:function(e){Ho("minimal width",e),Ja(this,"min-width",Math.round(e)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var e=ci(this.Peer,"max-width");return"none"===e?1/0:parseFloat(e)},set:function(e){Ho("maximal width",e),Ja(this,"max-width",e===1/0?"none":Math.round(e)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return parseFloat(ci(this.Peer,"min-height"))},set:function(e){Ho("minimal height",e),Ja(this,"min-height",Math.round(e)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){var e=ci(this.Peer,"max-height");return"none"===e?1/0:parseFloat(e)},set:function(e){Ho("maximal height",e),Ja(this,"max-height",e===1/0?"none":Math.round(e)+"px")},enumerable:!1,configurable:!0}),e.prototype.coversPointOnDisplay=function(e,t){Do("x coordinate",e),Do("y coordinate",t);var n=this.GeometryOnDisplay;return e>=n.x&&e<n.x+n.Width&&t>=n.y&&t<n.y+n.Height},Object.defineProperty(e.prototype,"FontFamily",{get:function(){return ci(this.Peer,"font-family")},set:function(e){nt("font family",e),Ja(this,"font-family",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FontSize",{get:function(){return parseFloat(ci(this.Peer,"font-size"))},set:function(e){Ho("font size",e),Ja(this,"font-size",null==e?null:Math.round(e)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FontWeight",{get:function(){var e=ci(this.Peer,"font-weight");switch(e){case"lighter":case"normal":case"bolder":case"bold":return e;default:var t=Math.max(1,Math.min(9,Math.round(parseFloat(e)/100)))-1;return Yn[t]}},set:function(e){switch(xn("font weight",e,Yn),e){case null:case void 0:Ja(this,"font-weight",null);break;case"lighter":case"normal":case"bolder":case"bold":Ja(this,"font-weight",e);break;default:Ja(this,"font-weight",er[e])}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FontStyle",{get:function(){var e=ci(this.Peer,"font-style");switch(e){case"normal":case"italic":return e;default:return e.startsWith("oblique")?"italic":"normal"}},set:function(e){xn("font weight",e,tr),Ja(this,"font-style",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LineHeight",{get:function(){var e=ci(this.Peer,"line-height");switch(!0){case"normal"===e:return Math.round(1.5*this.FontSize);case e.indexOf("%")>0:return Math.round(100*this.FontSize*parseFloat(e));default:return parseFloat(e)}},set:function(e){Ho("line height",e),Ja(this,"line-height",null==e?null:Math.round(e)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextDecoration",{get:function(){var e=window.getComputedStyle(this.Peer),t=e.textDecorationColor,n=e.textDecorationLine,r=e.textDecorationStyle,o=e.textDecorationThickness;if("none"!==n&&q(n,nr)){var i=parseFloat(o);return{Line:n,Color:$n(t||"#000000"),Style:q(r,rr)?r:"solid",Thickness:isNaN(i)?1:Math.round(i)}}return{Line:"none"}},set:function(e){Et("text decoration",e),null!=e&&(Cn("text decoration shape",e.Line,nr),An("text decoration color",e.Color),Cn("text decoration style",e.Style,rr),Ho("text decoration thickness",e.Thickness)),null==e?Ga(this,{"text-decoration-color":void 0,"text-decoration-line":void 0,"text-decoration-style":void 0,"text-decoration-thickness":void 0}):"none"===e.Line?Ja(this,"text-decoration-line","none"):Ga(this,{"text-decoration-color":null==e.Color?"currentColor":Jn($n(e.Color)),"text-decoration-line":e.Line,"text-decoration-style":e.Style,"text-decoration-thickness":null==e.Thickness?"from-font":Math.round(e.Thickness)+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextShadow",{get:function(){var e=ci(this.Peer,"text-shadow");return"none"===e?{xOffset:0,yOffset:0,BlurRadius:0,Color:"#00000000"}:(e=e.replace(/,.*$/,"").split(" "),{xOffset:parseFloat(e[0]),yOffset:parseFloat(e[1]),BlurRadius:parseFloat(e[2]),Color:$n(e[3])})},set:function(e){if(Et("text shadow",e),null!=e&&(Do("text shadow x offset",e.xOffset),Do("text shadow y offset",e.yOffset),$o("text shadow blur radius",e.BlurRadius),Pn("text shadow color",e.Color)),null==e)Ja(this,"text-shadow",null);else{var t=$n(e.Color);Ja(this,"text-shadow","#00000000"===t?"none":Math.round(e.xOffset)+"px "+Math.round(e.yOffset)+"px "+Math.round(e.BlurRadius)+"px "+Jn(t))}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextAlignment",{get:function(){return ci(this.Peer,"text-align")},set:function(e){xn("text alignment",e,or),Ja(this,"text-align",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ForegroundColor",{get:function(){return $n(ci(this.Peer,"color"))},set:function(e){An("foreground color",e),Ja(this,"color",null==e?null:$n(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Color",{get:function(){return this.ForegroundColor},set:function(e){this.ForegroundColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BackgroundColor",{get:function(){return $n(ci(this.Peer,"background-color"))},set:function(e){An("background color",e),Ja(this,"background-color",null==e?null:$n(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BackgroundTexture",{get:function(){var e=window.getComputedStyle(this.Peer),t=e.backgroundImage,n=e.backgroundPosition,r=e.backgroundSize,o=e.backgroundRepeat,i={ImageURL:"",Mode:"normal",xOffset:0,yOffset:0};"none"!==t&&(i.ImageURL=t.slice(5,t.length-2));var a=n.split(" ");if(a[0].endsWith("px")&&(i.xOffset=Math.round(parseFloat(a[0]))),a[1].endsWith("px")&&(i.yOffset=Math.round(parseFloat(a[1]))),"no-repeat"===o)switch(r){case"contain":case"cover":i.Mode=r;break;case"100% 100%":i.Mode="fill"}else i.Mode="tile";return i},set:function(e){if(Et("background texture",e),null!=e&&(Wn("background image url",e.ImageURL),Cn("background image mode",e.Mode,ir),Do("background image x offset",e.xOffset),Do("background image y offset",e.yOffset)),null==e)Ga(this,{"background-image":void 0,"background-position":void 0,"background-size":void 0,"background-repeat":void 0});else{var t=void 0;switch(e.Mode){case"contain":case"cover":t=e.Mode;break;case"fill":t="100% 100%";break;case"tile":t="auto auto"}Ga(this,{"background-image":'url("'+e.ImageURL+'")',"background-position":Math.round(e.xOffset)+"px "+Math.round(e.yOffset)+"px","background-size":t,"background-repeat":"tile"===e.Mode?"repeat":"no-repeat"})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BorderWidths",{get:function(){var e=this.Peer;return[parseFloat(ci(e,"border-top-width")),parseFloat(ci(e,"border-right-width")),parseFloat(ci(e,"border-bottom-width")),parseFloat(ci(e,"border-left-width"))]},set:function(e){_t("list of border widths",e),null!=e&&($o("top border width",e[0]),$o("right border width",e[1]),$o("bottom border width",e[2]),$o("left border width",e[3])),Ga(this,null==e?{"border-top-width":void 0,"border-right-width":void 0,"border-bottom-width":void 0,"border-left-width":void 0}:{"border-top-width":Math.round(e[0])+"px","border-right-width":Math.round(e[1])+"px","border-bottom-width":Math.round(e[2])+"px","border-left-width":Math.round(e[3])+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BorderColors",{get:function(){var e=this.Peer;return[$n(ci(e,"border-top-color")),$n(ci(e,"border-right-color")),$n(ci(e,"border-bottom-color")),$n(ci(e,"border-left-color"))]},set:function(e){_t("list of border colors",e),null!=e&&(Pn("top border color",e[0]),Pn("right border color",e[1]),Pn("bottom border color",e[2]),Pn("left border color",e[3])),Ga(this,null==e?{"border-top-color":void 0,"border-right-color":void 0,"border-bottom-color":void 0,"border-left-color":void 0}:{"border-top-color":e[0],"border-right-color":e[1],"border-bottom-color":e[2],"border-left-color":e[3]})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BorderStyles",{get:function(){function e(e){return q(e,ar)?e:"none"}var t=this.Peer;return[e(ci(t,"border-top-style")),e(ci(t,"border-right-style")),e(ci(t,"border-bottom-style")),e(ci(t,"border-left-style"))]},set:function(e){_t("list of border styles",e),null!=e&&(Cn("top border style",e[0],ar),Cn("right border style",e[1],ar),Cn("bottom border style",e[2],ar),Cn("left border style",e[3],ar)),Ga(this,null==e?{"border-top-style":void 0,"border-right-style":void 0,"border-bottom-style":void 0,"border-left-style":void 0}:{"border-top-style":e[0],"border-right-style":e[1],"border-bottom-style":e[2],"border-left-style":e[3]})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BorderRadii",{get:function(){var e=this.Peer;return[parseFloat(ci(e,"border-top-left-radius")),parseFloat(ci(e,"border-top-right-radius")),parseFloat(ci(e,"border-bottom-right-radius")),parseFloat(ci(e,"border-bottom-left-radius"))]},set:function(e){_t("list of border radii",e),null!=e&&($o("top-left border radius",e[0]),$o("top-right border radius",e[1]),$o("bottom-right border radius",e[2]),$o("bottom-left border radius",e[3])),null==e?Ja(this,"border-radius",null):Ga(this,{"border-top-left-radius":Math.round(e[0])+"px","border-top-right-radius":Math.round(e[1])+"px","border-bottom-right-radius":Math.round(e[2])+"px","border-bottom-left-radius":Math.round(e[3])+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoxShadow",{get:function(){var e=ci(this.Peer,"box-shadow");if("none"===e)return{isInset:!1,xOffset:0,yOffset:0,BlurRadius:0,SpreadRadius:0,Color:"#00000000"};var t="inset"===(e=e.replace(/,.*$/,"").split(" "))[0];return t&&e.shift(),{isInset:t,xOffset:parseFloat(e[0]),yOffset:parseFloat(e[1]),BlurRadius:parseFloat(e[2]),SpreadRadius:parseFloat(e[3]),Color:$n(e[4])}},set:function(e){Et("box shadow",e),null!=e&&(ae("box shadow direction",e.isInset),Do("box shadow x offset",e.xOffset),Do("box shadow y offset",e.yOffset),$o("box shadow blur radius",e.BlurRadius),$o("box shadow spread radius",e.SpreadRadius),Pn("box shadow color",e.Color)),null==e?Ja(this,"box-shadow",null):"#00000000"===$n(e.Color)?Ja(this,"box-shadow","none"):Ja(this,"box-shadow",(e.isInset?"inset ":"")+Math.round(e.xOffset)+"px "+Math.round(e.yOffset)+"px "+Math.round(e.BlurRadius)+"px "+Math.round(e.SpreadRadius)+"px "+Jn($n(e.Color)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Cursor",{get:function(){var e=ci(this.Peer,"cursor");return e.indexOf(",")>0?e.replace(/^.*,\s*/,""):e},set:function(e){if(xn("cursor",e,lr),null==e)Ja(this,"cursor",null);else{var t=ci(this.Peer,"cursor");Ja(this,"cursor",(t.indexOf(",")>0?t.replace(/,[^,]+$/,", "):"")+e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customCursor",{get:function(){var e=/^url\(([^\)])\)(\s+\d+)?(\s+\d+)?,/.exec(ci(this.Peer,"cursor"));if(null!=e){var t=e[1],n=parseFloat(e[2]),r=parseFloat(e[3]);return"'\"".indexOf(t[0])>=0&&(t=t.slice(1,t.length-1)),b(n,0,31)||(n=0),b(r,0,31)||(r=0),{ImageURL:t,xOffset:n,yOffset:r}}},set:function(e){Et("custom cursor",e),null!=e&&(Wn("custom cursor image url",e.ImageURL),Oe("custom cursor x offset",e.xOffset,0,31),Oe("custom cursor y offset",e.yOffset,0,31));var t=ci(this.Peer,"cursor"),n=t.indexOf(",")>0?t.replace(/^.*,\s*/,""):t;Ja(this,"cursor",null==e?n:'url("'+e.ImageURL+'") '+Math.round(e.xOffset)+"px "+Math.round(e.yOffset)+"px, "+n)},enumerable:!1,configurable:!0}),e.prototype.trigger=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ea.apply(void 0,i([this],e))},e}(),Ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"Name",{get:function(){var e=di(La(this),"wat-name");return Oo(e)?e:void 0},set:function(e){ei("Name")},enumerable:!1,configurable:!0}),t.prototype.globalVisual=function(e){if(Ao("global visual name",e),"#"===e[0])return Oa(this,e);p("InvalidArgument: the given visual name is not a global one")},Object.defineProperty(t.prototype,"isBeingPreserved",{get:function(){return"isBeingPreserved"===_a(this).BackupStatus},set:function(e){ei("isBeingPreserved")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBeingRestored",{get:function(){return"isBeingRestored"===_a(this).BackupStatus},set:function(e){ei("isBeingRestored")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBeingRemoved",{get:function(){return"isBeingRemoved"===_a(this).BackupStatus},set:function(e){ei("isBeingRemoved")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CardList",{get:function(){var e=[];return ai(La(this).children,".WAT.Card").forEach((function(t){e.push(Wa(t))})),e},set:function(e){ei("CardList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CardLabelList",{get:function(){var e=[];return ai(La(this).children,".WAT.Card").forEach((function(t){e.push(Wa(t).Label)})),e},set:function(e){ei("CardLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CardCount",{get:function(){return ai(La(this).children,".WAT.Card").length},set:function(e){ei("CardCount")},enumerable:!1,configurable:!0}),t.prototype.Card=function(e){switch(!0){case Sr(e):return e.Applet===this?e:void 0;case w(e):return this.CardAtIndex(e);case go(e):return this.CardNamed(e);default:p("InvalidArgument: card, card name or card index expected")}},t.prototype.CardAtIndex=function(e){return Be("card index",e),this.CardList[e]},t.prototype.CardNamed=function(e){yo("card name",e);var t=void 0;return ai(this.Peer.children,".WAT.Card").forEach((function(n){var r=Va(n);r.Name===e&&(t=r)})),t},t.prototype.CardLabelled=function(e){Eo("card label",e);var t=void 0;return ai(this.Peer.children,".WAT.Card").forEach((function(n){var r=Va(n);r.Label===e&&(t=r)})),t},t.prototype.IndexOfCard=function(e){var t=this.Card(e);return null==t?-1:this.CardList.indexOf(t)},t.prototype.acceptsCardAt=function(e,t){var n=this.IndexOfCard(e);return n>=0?this.CardMayBeShiftedTo(n,t):!((n=null==t?this.CardCount:this.IndexOfCard(t))<0)},t.prototype.acceptsNewCardAt=function(e,t){return"Card"===ha(e).Category&&!((null==t?this.CardCount:this.IndexOfCard(t))<0)},t.prototype.newCardInsertedAt=function(e,t){var n=ha(e);"Card"!==n.Category&&p("InvalidMaster: the given master cannot be used for a (new) card");var r=null==t?this.CardCount:this.IndexOfCard(t);return r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),this.CardDeserializedFrom(n.Template,r)},t.prototype.DuplicateOfCard=function(e){var t=this.IndexOfCard(e);t<0&&p("InvalidArgument: the given card does not exist or is not part of this applet");var n=Li(this.CardList[t]);return this.CardDeserializedFrom(n,t+1)},t.prototype.CardDeserializedFrom=function(e,t){et("card serialization",e);var n=null==t?this.CardCount:this.IndexOfCard(t);n<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet");var r,o=hi(e),i=this.CardAtIndex(n);null==i?this.Peer.append(o):this.Peer.insertBefore(o,i.Peer);try{r=za(o,"Card")}catch(e){throw pi(o),e}return this.acceptsCardAt(r,n)||(pi(o),p("InvalidOperation: the given serialized card must not be inserted into this applet")),r},t.prototype.CardMayBeShiftedUp=function(e){return this.IndexOfCard(e)>0},t.prototype.CardMayBeShiftedDown=function(e){var t=this.IndexOfCard(e);return t>=0&&t<this.CardCount-1},t.prototype.CardMayBeShiftedTo=function(e,t){var n=this.IndexOfCard(e),r=this.IndexOfCard(t);return n>=0&&r>=0&&n!==r},t.prototype.shiftCardUp=function(e){var t,n=this.IndexOfCard(e);if(n<0&&p("InvalidArgument: the given card does not exist or is not part of this applet"),n>0){var r=this.CardAtIndex(n-1);null===(t=this.CardAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},t.prototype.shiftCardDown=function(e){var t,n=this.IndexOfCard(e);if(n<0&&p("InvalidArgument: the given card does not exist or is not part of this applet"),n<this.CardCount-1){var r=this.CardAtIndex(n+1);null===(t=this.CardAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},t.prototype.shiftCardTo=function(e,t){var n=this.IndexOfCard(e);n<0&&p("InvalidArgument: the given card does not exist or is not part of this applet");var r=this.IndexOfCard(t);if(r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.CardAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.CardAtIndex(r);null==i?this.Peer.append(o.Peer):o.Peer.insertAfter(i.Peer)}}},t.prototype.removeCard=function(e){var t=this.Card(e);null!=t&&(Ka(t,"recursively"),pi(t.Peer),0===this.CardCount&&ci(this.newCardInsertedAt("plainCard",0).Peer,"visibility","visible"))},Object.defineProperty(t.prototype,"shownCard",{get:function(){for(var e=this.CardList,t=0,n=e.length;t<n;t++)if(e[t].isVisible)return e[t];return 0===e.length&&(e=[this.newCardInsertedAt("plainCard",0)]),this.showCard(e[0]),e[0]},set:function(e){ei("shownCard")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shownCardIndex",{get:function(){for(var e=this.CardList,t=0,n=e.length;t<n;t++)if(e[t].isVisible)return t;return 0===e.length&&(e=[this.newCardInsertedAt("plainCard",0)]),this.showCard(e[0]),0},set:function(e){ei("shownCardIndex")},enumerable:!1,configurable:!0}),t.prototype.CardIsShown=function(e){var t=this.IndexOfCard(e);return t>=0&&this.CardAtIndex(t).isVisible},t.prototype.showCard=function(e){var t=this.IndexOfCard(e);if(t<0)p("InvalidArgument: the given card does not exist or is not part of this applet");else{var n=La(this.CardAtIndex(t));ai(this.Peer.children,".WAT.Card").forEach((function(e){ci(e,"visibility",e===n?"visible":"hidden")}))}},t.prototype.showFirstCard=function(){this.showCard(0)},t.prototype.showPrevCard=function(){this.showCard(Math.max(0,this.shownCardIndex-1))},t.prototype.showPreviousCard=function(){this.showCard(Math.max(0,this.shownCardIndex-1))},t.prototype.showNextCard=function(){this.showCard(Math.min(this.shownCardIndex+1,this.CardCount-1))},t.prototype.showLastCard=function(){this.showCard(this.CardCount-1)},Object.defineProperty(t.prototype,"OverlayList",{get:function(){var e=[];return ai(La(this).children,".WAT.Overlay").forEach((function(t){e.push(Wa(t))})),e},set:function(e){ei("OverlayList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OverlayLabelList",{get:function(){var e=[];return ai(La(this).children,".WAT.Overlay").forEach((function(t){e.push(Wa(t).Label)})),e},set:function(e){ei("OverlayLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"OverlayCount",{get:function(){return ai(La(this).children,".WAT.Overlay").length},set:function(e){ei("OverlayCount")},enumerable:!1,configurable:!0}),t.prototype.Overlay=function(e){switch(!0){case jr(e):return e.Applet===this?e:void 0;case w(e):return this.OverlayAtIndex(e);case go(e):return this.OverlayNamed(e);default:p("InvalidArgument: overlay, overlay name or overlay index expected")}},t.prototype.OverlayAtIndex=function(e){return Be("card index",e),this.OverlayList[e]},t.prototype.OverlayNamed=function(e){yo("overlay name",e);var t=void 0;return ai(this.Peer.children,".WAT.Overlay").forEach((function(n){var r=Va(n);r.Name===e&&(t=r)})),t},t.prototype.OverlayLabelled=function(e){Eo("overlay label",e);var t=void 0;return ai(this.Peer.children,".WAT.Overlay").forEach((function(n){var r=Va(n);r.Label===e&&(t=r)})),t},t.prototype.IndexOfOverlay=function(e){var t=this.Overlay(e);return null==t?-1:this.OverlayList.indexOf(t)},t.prototype.acceptsOverlayAt=function(e,t){var n=this.IndexOfOverlay(e);return n>=0?this.OverlayMayBeShiftedTo(n,t):!((n=null==t?this.OverlayCount:this.IndexOfOverlay(t))<0)},t.prototype.acceptsNewOverlayAt=function(e,t){return"Overlay"===ha(e).Category&&!((null==t?this.OverlayCount:this.IndexOfOverlay(t))<0)},t.prototype.newOverlayInsertedAt=function(e,t){var n=ha(e);"Overlay"!==n.Category&&p("InvalidMaster: the given master cannot be used for a (new) overlay");var r=null==t?this.OverlayCount:this.IndexOfOverlay(t);return r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),this.OverlayDeserializedFrom(n.Template,r)},t.prototype.DuplicateOfOverlay=function(e){var t=this.IndexOfOverlay(e);t<0&&p("InvalidArgument: the given overlay does not exist or is not part of this applet");var n=Li(this.OverlayList[t]);return this.OverlayDeserializedFrom(n,t+1)},t.prototype.OverlayDeserializedFrom=function(e,t){et("overlay serialization",e);var n=null==t?this.OverlayCount:this.IndexOfOverlay(t);n<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet");var r,o=hi(e),i=this.OverlayAtIndex(n);null==i?this.Peer.append(o):this.Peer.insertBefore(o,i.Peer);try{r=za(o,"Overlay")}catch(e){throw pi(o),e}return this.acceptsOverlayAt(r,n)||(pi(o),p("InvalidOperation: the given serialized overlay must not be inserted into this applet")),r},t.prototype.OverlayMayBeShiftedUp=function(e){return this.IndexOfOverlay(e)>0},t.prototype.OverlayMayBeShiftedDown=function(e){var t=this.IndexOfOverlay(e);return t>=0&&t<this.OverlayCount-1},t.prototype.OverlayMayBeShiftedTo=function(e,t){var n=this.IndexOfOverlay(e),r=this.IndexOfOverlay(t);return n>=0&&r>=0&&n!==r},t.prototype.shiftOverlayUp=function(e){var t,n=this.IndexOfOverlay(e);if(n<0&&p("InvalidArgument: the given overlay does not exist or is not part of this applet"),n>0){var r=this.OverlayAtIndex(n-1);null===(t=this.OverlayAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},t.prototype.shiftOverlayDown=function(e){var t,n=this.IndexOfOverlay(e);if(n<0&&p("InvalidArgument: the given overlay does not exist or is not part of this applet"),n<this.OverlayCount-1){var r=this.OverlayAtIndex(n+1);null===(t=this.OverlayAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},t.prototype.shiftOverlayTo=function(e,t){var n=this.IndexOfOverlay(e);n<0&&p("InvalidArgument: the given overlay does not exist or is not part of this applet");var r=this.IndexOfOverlay(t);if(r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.OverlayAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.OverlayAtIndex(r);null==i?this.Peer.append(o.Peer):o.Peer.insertAfter(i.Peer)}}},t.prototype.removeOverlay=function(e){var t=this.Overlay(e);null!=t&&(Ka(t,"recursively"),pi(t.Peer))},t.prototype.frontmostOverlayOfClass=function(e){yo("HTML class name",e);var t=ai(this.Peer.children,".WAT.Overlay."+e),n=t[t.length-1];return null==n?void 0:Wa(n)},t.prototype.bringOverlayToFrontOfClass=function(e,t){var n=this;yo("HTML class name",t);var r=this.Overlay(e);null==r&&p("InvalidArgument: the given overlay does not exist or is not part of this applet");var o=r.Peer;o.classList.contains(t)||p("InvalidArgument: the given overlay does not have class "+Ln(t)+" itself");var i=!1;ai(this.Peer.children,".WAT.Overlay."+t).forEach((function(e){switch(!0){case o===e:i=!0;break;case i:n.Peer.insertBefore(e,o)}}))},t}(Xa),el=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"ComponentList",{get:function(){var e=[];return ai(La(this).children,".WAT.Control,.WAT.Compound").forEach((function(t){e.push(Wa(t))})),e},set:function(e){ei("ComponentList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ComponentLabelList",{get:function(){var e=[];return ai(La(this).children,".WAT.Control,.WAT.Compound").forEach((function(t){e.push(Wa(t).Label)})),e},set:function(e){ei("ComponentLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ComponentCount",{get:function(){return ai(La(this).children,".WAT.Control,.WAT.Compound").length},set:function(e){ei("ComponentCount")},enumerable:!1,configurable:!0}),t.prototype.Component=function(e){switch(!0){case Vr(e):case Dr(e):return e.Container===this?e:void 0;case w(e):return this.ComponentAtIndex(e);case go(e):return this.ComponentNamed(e);default:p("InvalidArgument: component, component name or component index expected")}},t.prototype.ComponentAtIndex=function(e){return Be("component index",e),this.ComponentList[e]},t.prototype.ComponentNamed=function(e){yo("component name",e);var t=void 0;return ai(this.Peer.children,".WAT.Control,.WAT.Compound").forEach((function(n){var r=Va(n);r.Name===e&&(t=r)})),t},t.prototype.ComponentLabelled=function(e){Eo("component label",e);var t=void 0;return ai(this.Peer.children,".WAT.Control,.WAT.Compound").forEach((function(n){var r=Va(n);r.Label===e&&(t=r)})),t},t.prototype.IndexOfComponent=function(e){var t=this.Component(e);return null==t?-1:this.ComponentList.indexOf(t)},t.prototype.acceptsComponentAt=function(e,t){var n=this.IndexOfComponent(e);return n>=0?this.ComponentMayBeShiftedTo(n,t):!((n=null==t?this.ComponentCount:this.IndexOfComponent(t))<0)},t.prototype.acceptsNewComponentAt=function(e,t){var n=ha(e);return("Control"===n.Category||"Compound"===n.Category)&&!((null==t?this.ComponentCount:this.IndexOfComponent(t))<0)},t.prototype.newComponentInsertedAt=function(e,t){var n=ha(e);"Control"!==n.Category&&"Compound"!==n.Category&&p("InvalidMaster: the given master cannot be used for a (new) component");var r=null==t?this.ComponentCount:this.IndexOfComponent(t);return r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),this.ComponentDeserializedFrom(n.Template,r)},t.prototype.DuplicateOfComponent=function(e){var t=this.IndexOfComponent(e);t<0&&p("InvalidArgument: the given component does not exist or is not part of this applet");var n=Li(this.ComponentList[t]);return this.ComponentDeserializedFrom(n,t+1)},t.prototype.ComponentDeserializedFrom=function(e,t){et("component serialization",e);var n=null==t?this.ComponentCount:this.IndexOfComponent(t);n<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this container");var r,o=hi(e),i=this.ComponentAtIndex(n);null==i?this.Peer.append(o):this.Peer.insertBefore(o,i.Peer);try{r=za(o,"Component")}catch(e){throw pi(o),e}return this.acceptsComponentAt(r,n)||(pi(o),p("InvalidOperation: the given serialized component must not be inserted into this container")),r},t.prototype.ComponentMayBeShiftedUp=function(e){return this.IndexOfComponent(e)>0},t.prototype.ComponentMayBeShiftedDown=function(e){var t=this.IndexOfComponent(e);return t>=0&&t<this.ComponentCount-1},t.prototype.ComponentMayBeShiftedTo=function(e,t){var n=this.IndexOfComponent(e),r=this.IndexOfComponent(t);return n>=0&&r>=0&&n!==r},t.prototype.shiftComponentToTop=function(e){var t=this.IndexOfComponent(e);if(t<0&&p("InvalidArgument: the given component does not exist or is not part of this applet"),t>0){var n=this.ComponentAtIndex(t);this.Peer.prepend(n.Peer)}},t.prototype.shiftComponentUp=function(e){var t,n=this.IndexOfComponent(e);if(n<0&&p("InvalidArgument: the given component does not exist or is not part of this applet"),n>0){var r=this.ComponentAtIndex(n-1);null===(t=this.ComponentAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},t.prototype.shiftComponentDown=function(e){var t,n=this.IndexOfComponent(e);if(n<0&&p("InvalidArgument: the given component does not exist or is not part of this applet"),n<this.ComponentCount-1){var r=this.ComponentAtIndex(n+1);null===(t=this.ComponentAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},t.prototype.shiftComponentToBottom=function(e){var t=this.IndexOfComponent(e);if(t<0&&p("InvalidArgument: the given component does not exist or is not part of this applet"),t<this.ComponentCount-1){var n=this.ComponentAtIndex(t);this.Peer.append(n.Peer)}},t.prototype.shiftComponentTo=function(e,t){var n=this.IndexOfComponent(e);n<0&&p("InvalidArgument: the given component does not exist or is not part of this applet");var r=this.IndexOfComponent(t);if(r<0&&p("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.ComponentAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.ComponentAtIndex(r);null==i?this.Peer.append(o.Peer):this.Peer.insertAfter(o.Peer,i.Peer)}}},t.prototype.ComponentMayBeRemoved=function(e){return this.IndexOfComponent(e)>=0},t.prototype.removeComponent=function(e){var t=this.Component(e);null!=t&&(Ka(t,"recursively"),pi(t.Peer))},t}(Xa),tl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(el),nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){return"hidden"!==ci(this.Peer,"visibility")},set:function(e){ae("visibility",e),!0===e?this.Applet.showCard(this):p("InvalidArgument: a card cannot be explicitly hidden, please select another card to be shown instead")},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isVisible=!0},Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){return!1},set:function(e){ei("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){return!1},set:function(e){ei("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Applet.IndexOfCard(this)},set:function(e){ei("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Applet.CardMayBeShiftedUp(this)},set:function(e){ei("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Applet.CardMayBeShiftedDown(this)},set:function(e){ei("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Applet.CardMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Applet.shiftCardUp(this)},t.prototype.shiftDown=function(){this.Applet.shiftCardDown(this)},t.prototype.shiftTo=function(e){this.Applet.shiftCardTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Applet.CardMayBeRemoved(this)},set:function(e){ei("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Applet.removeCard(this)},t}(tl),rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){return!0},set:function(e){ei("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){return!0},set:function(e){ei("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Applet.IndexOfOverlay(this)},set:function(e){ei("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Applet.OverlayMayBeShiftedUp(this)},set:function(e){ei("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Applet.OverlayMayBeShiftedDown(this)},set:function(e){ei("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Applet.OverlayMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Applet.shiftOverlayUp(this)},t.prototype.shiftDown=function(){this.Applet.shiftOverlayDown(this)},t.prototype.shiftTo=function(e){this.Applet.shiftOverlayTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Applet.OverlayMayBeRemoved(this)},set:function(e){ei("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Applet.removeOverlay(this)},t.prototype.showAround=function(e,t,n){void 0===n&&(n="withinViewport"),Do("x coordinate",e),Do("y coordinate",t),Cn("positioning constraint",n,["withinApplet","withinViewport"]);var r=this.Applet;if("withinApplet"===n)Qi(this,e=Math.max(0,Math.min(e,r.Width-this.Peer.offsetWidth)),t=Math.max(0,Math.min(t,r.Height-this.Peer.offsetHeight)),void 0,void 0);else{var o=document.body.clientWidth,i=Math.max(window.innerHeight,document.body.clientHeight);e=Math.max(0,Math.min(e,o-this.Peer.offsetWidth)),t=Math.max(0,Math.min(t,i-this.Peer.offsetHeight));var a=r.GeometryOnDisplay;Qi(this,e-a.x,t-a.y,void 0,void 0)}},t.prototype.isFrontmostOfClass=function(e){return this.Applet.frontmostOverlayOfClass(e)===this},t.prototype.bringToFrontOfClass=function(e){this.Applet.bringOverlayToFrontOfClass(e)},t}(tl),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){var e=this.Container;if(null==e)return!1;var t=ea[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("left"in n||"width"in n&&"right"in n)||!("top"in n||"height"in n&&"bottom"in n)},set:function(e){ei("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){var e=this.Container;if(null==e)return!1;var t=ea[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("width"in n||"left"in n&&"right"in n)||!("height"in n||"top"in n&&"bottom"in n)},set:function(e){ei("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Container.IndexOfComponent(this)},set:function(e){ei("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Container.CompoundMayBeShiftedUp(this)},set:function(e){ei("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Container.CompoundMayBeShiftedDown(this)},set:function(e){ei("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Container.CompoundMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Container.shiftCompoundUp(this)},t.prototype.shiftDown=function(){this.Container.shiftCompoundDown(this)},t.prototype.shiftTo=function(e){this.Container.shiftCompoundTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Container.ComponentMayBeRemoved(this)},set:function(e){ei("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Container.removeCompound(this)},t}(el),il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){var e=this.Container;if(null==e)return!1;var t=ea[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("left"in n||"width"in n&&"right"in n)||!("top"in n||"height"in n&&"bottom"in n)},set:function(e){ei("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){var e=this.Container;if(null==e)return!1;var t=ea[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("width"in n||"left"in n&&"right"in n)||!("height"in n||"top"in n&&"bottom"in n)},set:function(e){ei("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Container.IndexOfComponent(this)},set:function(e){ei("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Container.CompoundMayBeShiftedUp(this)},set:function(e){ei("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Container.CompoundMayBeShiftedDown(this)},set:function(e){ei("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Container.CompoundMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Container.shiftCompoundUp(this)},t.prototype.shiftDown=function(){this.Container.shiftCompoundDown(this)},t.prototype.shiftTo=function(e){this.Container.shiftCompoundTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Container.ComponentMayBeRemoved(this)},set:function(e){ei("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Container.removeCompound(this)},t}(Xa);function al(){return ai(document.body.querySelectorAll(".WAT.Applet"),(function(e){return null==li(e,".WAT.Applet")}))}ea.plainApplet={Name:"plainApplet",Version:Ii(Ci("1.0.0")),Category:"Applet",Template:'<div class="WAT Applet"></div>',undesignablePropertySet:Object.assign(Object.create(null),{Name:!0,mayBeDeleted:!0,Overflows:!0,x:!0,y:!0,Width:!0,Height:!0,Position:!0,Size:!0,Geometry:!0,horizontalAnchoring:!0,verticalAnchoring:!0,horizontalOffsets:!0,verticalOffsets:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0}),UsageCount:0},ea.plainCard={Name:"plainCard",Version:Ii(Ci("1.0.0")),Category:"Card",Template:'<div class="WAT Card"></div>',undesignablePropertySet:Object.assign(Object.create(null),{x:!0,y:!0,Width:!0,Height:!0,Position:!0,Size:!0,Geometry:!0,horizontalAnchoring:!0,verticalAnchoring:!0,horizontalOffsets:!0,verticalOffsets:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0}),UsageCount:0},ea.plainOverlay={Name:"plainOverlay",Version:Ii(Ci("1.0.0")),Category:"Overlay",Template:'<div class="WAT Overlay"></div>',UsageCount:0},ea.plainControl={Name:"plainControl",Version:Ii(Ci("1.0.0")),Category:"Control",Template:'<div class="WAT Control"></div>',UsageCount:0},ea.plainCompound={Name:"plainCompound",Version:Ii(Ci("1.0.0")),Category:"Compound",Template:'<div class="WAT Compound"></div>',UsageCount:0};var ll=!1;function sl(e){if(st("function to call",e),ll&&!ul)return e();Zn.push(e)}var ul=!1;var cl=!1,fl=[];var dl=!1;function pl(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return ll=!0,function(){console.log("WAT is ready"),ul=!0;for(var e=0;e<Zn.length;e++)try{Zn[e]()}catch(e){console.error('registered WAT "ready" handler failed with ',e)}ul=!1}(),[4,hl()];case 1:return e.sent(),cl=!0,function(){console.log("WAT is running"),dl=!0;for(var e=0;e<fl.length;e++)try{fl[e]()}catch(e){console.error('registered WAT "running" handler failed with ',e)}dl=!1}(),[2]}}))}))}function hl(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,al().forEach((function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,vl(e)];case 1:return t.sent(),[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))}function vl(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return(n=Ni)?[4,Wi(e)]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return n?[4,Vi(e)]:[3,4];case 3:return t=r.sent(),[3,5];case 4:t=za(e,"Applet"),r.label=5;case 5:return t.trigger("applet-started",t),[2]}}))}))}function gl(){var e;!function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(oa[t]=t)}e(Xa.prototype),e(Ya.prototype),e(el.prototype),e(tl.prototype),e(nl.prototype),e(rl.prototype),e(ol.prototype),e(il.prototype),delete oa.Value}(),e=!1,ii(document.head.querySelectorAll('script[type="application/wat-master"]'),(function(t){try{var n=ta(t);la(n,{compatibleDowngrade:"ignore",incompatibleDowngrade:"abort",sameVersion:"ignore",compatibleUpgrade:"perform",incompatibleUpgrade:"perform"})&&ca(n)}catch(t){e=!0,console.warn("Error in Master Registration:",t)}})),e&&window.alert("The WAT masters bundled with this document could not be\nregistered without errors - see browser console for details"),mi(document,"click",".WAT-ErrorIndicator"),gi(document,"click",".WAT-ErrorIndicator",(function(e){var t=e.target,n=Wa(null==t?void 0:t.closest(".WAT"));if(null!=n){var r=ja(n);null!=r&&(null!=Qa&&n.Applet.mayBeDesigned?window.confirm(r.Title+"\n\n"+r.longMessage+(null!=r.Reason?"\n\nReason:\n"+r.Reason:"")+"\n\nDo you want to proceed to the Designer?")&&Qa.startDesigning(r.Sufferer,r.Property):window.alert(r.Title+"\n\n"+r.longMessage+(null!=r.Reason?"\n\nReason:\n"+r.Reason:"")))}else alert("WAT Error\n\nCould not find Visual for this Error Indicator")})),Ni?u.ready((function(){ki=u.createInstance({name:"WAT Applets"}),pl()})):pl()}"complete"===document.readyState||"interactive"===document.readyState?setTimeout(gl,1):window.addEventListener("DOMContentLoaded",gl),e.AppletDeserializedFrom=function(e,t){Ir("applet",e),et("serialization",t);var n=e.Peer;return zi(t,n),Wa(n)},e.AppletHasBackup=Wi,e.AppletMayBePreserved=function(e){return Ir("applet",e),Bi()&&go(e.Name)&&null!=_a(e)&&null==_a(e).BackupStatus},e.AppletPeersInDocument=al,e.AppletsMayBePreserved=Bi,e.CategoryOfMaster=function(e){return ha(e).Category},e.ClassesOfMaster=function(e){return ga(ha(e).Classes)},e.DuplicateOfMaster=function(e,t,n){yo("new master name",t),Ko("new master version",n),t in ea&&p("MasterExists: a master with the name "+Ln(t)+" exists already");var r=ha(e),o=Object.assign({},r);return o.Name=t,null!=n&&(o.Version=n),null!=r.Properties&&(o.Properties=[],r.Properties.forEach((function(e){return o.Properties.push(Object.assign({},e))}))),ca(o),o},e.ErrorInfoOfMaster=function(e){return ha(e).ErrorInfo},e.IndexOfPropertyOfMaster=wa,e.MasterHasProperty=ba,e.MasterLacksProperty=function(e,t){return!ba(e,t)},e.Masters=function(){var e=[];for(var t in ea)e.push(t);return e},e.MastersUsedByVisuals=xa,e.NameOfMaster=function(e){return ha(e),e},e.PropertiesOfMaster=function(e){var t=[],n=ha(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++)t.push(Object.assign({},n[r]));return t},e.PropertyCountOfMaster=function(e){var t=ha(e).Properties;return null==t?0:t.length},e.PropertyDescriptorFor=ni,e.PropertyNamesOfMaster=function(e){var t=[],n=ha(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++)t.push(n[r].Identifier);return t},e.PropertyOfMaster=function(e,t){Bo("property name",t),$i(t);var n=ha(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++){var i=n[r];if(i.Identifier===t)return Object.assign({},i)}},e.PropertyOfMasterMayBeMovedDown=function(e,t){var n=wa(e,t);return n>=0&&n<ea[e].Properties.length-1},e.PropertyOfMasterMayBeMovedUp=function(e,t){return wa(e,t)>0},e.ResourcesOfMaster=function(e){return ha(e).Resources},e.ScriptOfMaster=function(e){return ha(e).Script},e.StylesOfMaster=function(e){return ma(ha(e).Styles)},e.TemplateOfMaster=function(e){return ha(e).Template},e.UsageCountOfMaster=function(e){return ha(e).UsageCount},e.ValueIsApplet=xr,e.ValueIsCard=Sr,e.ValueIsComponent=$r,e.ValueIsCompound=Dr,e.ValueIsContainer=Qr,e.ValueIsControl=Vr,e.ValueIsDimension=Uo,e.ValueIsElement=fr,e.ValueIsId=uo,e.ValueIsIdentifier=No,e.ValueIsLabel=Po,e.ValueIsLocation=_o,e.ValueIsName=go,e.ValueIsOverlay=jr,e.ValueIsSemVer=Zo,e.ValueIsUniqueId=ro,e.ValueIsUniversalName=Oo,e.ValueIsVisual=gr,e.Version="0.1.0",e.VersionOfMaster=function(e){return function(e){return e.major+"."+(e.minor||"0")+"."+(e.Patch||"0")+(null==e.Build?"":"."+e.Build.toString(16))}(ha(e).Version)},e.VisualForElement=Va,e.WAT_Applet=Ya,e.WAT_BackgroundModes=ir,e.WAT_BorderStyles=ar,e.WAT_Card=nl,e.WAT_Categories=Kn,e.WAT_Compound=ol,e.WAT_Container=el,e.WAT_Control=il,e.WAT_Cursors=lr,e.WAT_FontStyles=tr,e.WAT_FontWeightValues=er,e.WAT_FontWeights=Yn,e.WAT_Layer=tl,e.WAT_Overflows=sr,e.WAT_Overlay=rl,e.WAT_PropertyEditorTypes=ra,e.WAT_TextAlignments=or,e.WAT_TextDecorationLines=nr,e.WAT_TextDecorationStyles=rr,e.WAT_TextOverflows=ur,e.WAT_Visual=Xa,e.WAT_horizontalAnchorings=Qn,e.WAT_verticalAnchorings=Xn,e.activatePendingClassesOfMaster=function(e){var t=ha(e);t.Classes=t.pendingClasses,delete t.pendingClasses,t.Version.Build=Si(),pa(e)},e.activatePendingResourcesOfMaster=function(e){var t=ha(e);fa(e),t.Resources=t.pendingResources,delete t.pendingResources,t.Version.Build=Si(),ca(t)},e.activatePendingScriptOfMaster=function(e){var t=ha(e);t.ErrorInfo=void 0,da(t.pendingScript,t),null==t.ErrorInfo?(t.Script=t.pendingScript,delete t.pendingScript,t.Version.Build=Si(),pa(e)):(t.ErrorInfo=void 0,da(t.Script,t),null!=t.ErrorInfo&&pa(e))},e.activatePendingStylesOfMaster=function(e){var t=ha(e);t.Styles=t.pendingStyles,delete t.pendingStyles,t.Version.Build=Si(),pa(e)},e.activatePendingTemplateOfMaster=function(e){var t=ha(e);null==t.pendingTemplate?t.Template='<div class="WAT '+e+'"></div>':(t.Template=t.pendingTemplate,delete t.pendingTemplate),t.Version.Build=Si()},e.allowApplet=Or,e.allowCard=Pr,e.allowComponent=Jr,e.allowCompound=zr,e.allowContainer=Xr,e.allowControl=Fr,e.allowDimension=Ho,e.allowElement=dr,e.allowId=co,e.allowIdentifier=Bo,e.allowLabel=To,e.allowLocation=Lo,e.allowName=mo,e.allowOverlay=kr,e.allowSemVer=Ko,e.allowUniqueId=oo,e.allowUniversalName=Co,e.allowVisual=mr,e.allowedApplet=Cr,e.allowedCard=Tr,e.allowedComponent=Gr,e.allowedCompound=Ur,e.allowedContainer=Yr,e.allowedControl=_r,e.allowedDimension=qo,e.allowedElement=pr,e.allowedId=fo,e.allowedIdentifier=Wo,e.allowedLabel=Mo,e.allowedLocation=Ro,e.allowedName=bo,e.allowedOverlay=Nr,e.allowedSemVer=Qo,e.allowedUniqueId=io,e.allowedUniversalName=Io,e.allowedVisual=br,e.changePropertyOfMaster=function(e,t,n){Vo("property identifier",t),$i(t);var r=qi("property specification",n);t!==r.Identifier&&ya(e,t,r.Identifier);var o=wa(e,t);ea[e].Properties[o]=r},e.createMaster=function(e,t,n,r){yo("master name",e),Cn("master category",t,Kn),Ko("master version",n),Xe("master template",r),e in ea&&p("MasterExists: a master with the name "+Ln(e)+" exists already"),ca({Name:e,Category:t,Version:Ii(Ci(n||"0.0.1")),Template:r||'<div class="WAT '+e+'"></div>',UsageCount:0})},e.deserializedMaster=Di,e.expectApplet=Ir,e.expectCard=Mr,e.expectComponent=Zr,e.expectCompound=Hr,e.expectContainer=eo,e.expectControl=Lr,e.expectDimension=$o,e.expectElement=hr,e.expectId=po,e.expectIdentifier=Vo,e.expectLabel=Eo,e.expectLocation=Do,e.expectName=yo,e.expectOverlay=Br,e.expectSemVer=Xo,e.expectUniqueId=ao,e.expectUniversalName=Ao,e.expectVisual=yr,e.expectedApplet=Ar,e.expectedCard=Er,e.expectedComponent=Kr,e.expectedCompound=qr,e.expectedContainer=to,e.expectedControl=Rr,e.expectedDimension=Jo,e.expectedElement=vr,e.expectedId=ho,e.expectedIdentifier=Fo,e.expectedLabel=jo,e.expectedLocation=zo,e.expectedName=wo,e.expectedOverlay=Wr,e.expectedSemVer=Yo,e.expectedUniqueId=lo,e.expectedUniversalName=So,e.expectedVisual=wr,e.hasMaster=function(e){return yo("master name",e),null!=ea[e]},e.insertPropertyOfMasterAt=function(e,t,n){ke("insertion index",n);var r=qi("property specification",t),o=r.Identifier;wa(e,o)>=0&&p("PropertyExists: a property with the name "+Ln(o)+" exists already");var i=ea[e],a=i.Properties;null==a?i.Properties=[r]:(n=null==n?a.length:Math.min(n,a.length),a.splice(n,0,r))},e.instantiableComponentMasters=function(){var e=[];for(var t in ea){var n=ea[t];"Control"!==n.Category&&"Compound"!==n.Category||e.push(t)}return e},e.instantiableLayerMasters=function(){var e=[];for(var t in ea){var n=ea[t];"Card"!==n.Category&&"Overlay"!==n.Category||e.push(t)}return e},e.instantiableMasters=function(){var e=[];for(var t in ea){"Applet"!==ea[t].Category&&e.push(t)}return e},e.lacksMaster=function(e){return yo("master name",e),null==ea[e]},e.missingMasters=function(){var e=Object.create(null);ii(document.body.querySelectorAll(".WAT[data-wat-master]"),(function(t){var n=di(t,"wat-master");go(n)&&!(n in ea)&&(e[n]=n)}));var t=[];for(var n in e)t.push(n);return t},e.movePropertyOfMasterDown=function(e,t){var n=ea[e].Properties,r=wa(e,t);if(r<n.length-1){var o=n.splice(r,1)[0];n.splice(r+1,0,o)}},e.movePropertyOfMasterTo=function(e,t,n){Be("property index",n);var r=wa(e,t);if(r<0&&p("NoSuchProperty: a property with the name "+Ln(t)+" does not exist"),r!==n){var o=ea[e].Properties,i=o.splice(r,1)[0];o.splice(n,0,i)}},e.movePropertyOfMasterToBottom=function(e,t){var n=ea[e].Properties,r=wa(e,t);if(r<n.length-1){var o=n.splice(r,1)[0];n.push(o)}},e.movePropertyOfMasterToTop=function(e,t){var n=wa(e,t);if(n>0){var r=ea[e].Properties,o=r.splice(n,1)[0];r.unshift(o)}},e.movePropertyOfMasterUp=function(e,t){var n=wa(e,t);if(n>0){var r=ea[e].Properties,o=r.splice(n,1)[0];r.splice(n-1,0,o)}},e.newUniqueId=$a,e.parsedSerialization=Ri,e.pendingClassesOfMaster=function(e){return ga(ha(e).pendingClasses)},e.pendingResourcesOfMaster=function(e){return ha(e).pendingResources},e.pendingScriptOfMaster=function(e){return ha(e).pendingScript},e.pendingStylesOfMaster=function(e){return ma(ha(e).pendingStyles)},e.pendingTemplateOfMaster=function(e){return ha(e).pendingTemplate},e.preserveApplet=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(o){switch(o.label){case 0:Ir("applet",e),Fi(e),t=_a(e),o.label=1;case 1:return o.trys.push([1,3,,4]),n=e.Name.startsWith("#")?e.Name.slice(1):e.Name,t.BackupStatus="isBeingPreserved",r=function(e,t,n,r,o){var i="";if(r||o){null==r&&(r="withUsedMasters");var a=void 0;if(a="withUsedMasters"===r?xa(e,"withoutIntrinsics"):function(){var e=Object.create(null);ii(document.head.querySelectorAll('script[type="application/wat-master"]'),(function(t){try{var n=ta(t).Name;go(n)&&n in ea&&(e[n]=n)}catch(e){}}));var t=[];for(var n in e)t.push(n);return t}(),o){var l=[];a.forEach((function(e){var t=ea[e];null!=t&&null!=t.Resources&&l.push(t.Resources)})),l.length>0&&(i+=(Pi=[],l.forEach((function(e){return ji(e,"collect")})),function(){for(var e="",t=0,n=Pi.length;t<n;t++)e+=Pi[t].outerHTML+"\n";return e}()+"\n"))}i+=function(e,t){var n=[];return e.forEach((function(e){e in ea&&n.push(_i(e,t))})),n.join("\n")}(a,n)+"\n"}return e.forEach((function(e){return i+=Li(e,t)})),i}([e],void 0,"withPendingSettings","withAllMasters"),[4,ki.setItem(n,r)];case 2:return o.sent(),delete t.BackupStatus,[3,4];case 3:return i=o.sent(),delete t.BackupStatus,console.error('applet "'+e.Name+" could not be preserved, reason: ",i),p("applet could not be preserved (see browser console)"),[3,4];case 4:return[2]}}))}))},e.ready=sl,e.registerDesigner=function(e){kt("WAT designer",e),E(e.startDesigning)&&E(e.inhibitsEventsFrom)||p("InvalidArgument: the given object is no valid WAT Designer"),null==Qa?Qa=e:Qa!==e&&p("DesignerExists: another WAT Designer has already been registered")},e.registerMasterFromSerialization=function(e){et("serialization",e),ca(na(JSON.parse(e)))},e.registerResources=Mi,e.removeBackupOfApplet=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:Ir("applet",e),Fi(e),t=_a(e),o.label=1;case 1:return o.trys.push([1,3,,4]),n=e.Name.startsWith("#")?e.Name.slice(1):e.Name,t.BackupStatus="isBeingRemoved",[4,ki.removeItem(n)];case 2:return o.sent(),delete t.BackupStatus,[3,4];case 3:return r=o.sent(),delete t.BackupStatus,console.error('applet "'+e.Name+" could not be removed, reason: ",r),p("applet could not be removed (see browser console)"),[3,4];case 4:return[2]}}))}))},e.removePropertyOfMaster=function(e,t){var n=wa(e,t);if(n>=0){var r=ea[e].Properties;r.splice(n,1),0===r.length&&delete ea[e].Properties}},e.renameMaster=va,e.renamePropertyOfMaster=ya,e.restoreApplet=function(e,t){return r(this,void 0,void 0,(function(){var t,n,r,i,a;return o(this,(function(o){switch(o.label){case 0:Ir("applet",e),t=e.Name,Fi(e),r=_a(e),o.label=1;case 1:return o.trys.push([1,3,,4]),i=t.startsWith("#")?t.slice(1):t,r.BackupStatus="isBeingRestored",[4,ki.getItem(i)];case 2:return n=o.sent(),delete r.BackupStatus,[3,4];case 3:return a=o.sent(),delete r.BackupStatus,console.error('applet "'+t+" could not be restored, reason: ",a),p("applet could not be restored (see browser console)"),[3,4];case 4:return zi(n,e.Peer),[2]}}))}))},e.running=function(e){if(st("function to call",e),cl&&!dl)return e();fl.push(e)},e.serializedMaster=_i,e.setNameOfMaster=function(e,t){va(e,t,!0)},e.setPendingClassesOfMaster=function(e,t){Xe("new master classes",t);var n=ha(e);null==t||""===t.trim()?delete n.pendingClasses:n.pendingClasses=ia(t)},e.setPendingResourcesOfMaster=function(e,t){Xe("new master resources",t);var n=ha(e);null==t||""===t.trim()?delete n.pendingResources:n.pendingResources=t},e.setPendingScriptOfMaster=function(e,t){Xe("new master script",t);var n=ha(e);null==t||""===t.trim()?delete n.pendingScript:n.pendingScript=t},e.setPendingStylesOfMaster=function(e,t){Xe("new master styles",t);var n=ha(e);null==t||""===t.trim()?delete n.pendingStyles:n.pendingStyles=aa(t)},e.setPendingTemplateOfMaster=function(e,t){Xe("new master template",t);var n=ha(e);null==t||""===t.trim()?delete n.pendingTemplate:n.pendingTemplate=t},e.setVersionOfMaster=function(e,t){var n,r,o=ha(e),i=Ii(Ci(t));n=o.Version,r=i,(n.major>r.major||n.major===r.major&&(n.minor>r.minor||n.minor===r.minor&&(n.Patch>r.Patch||n.Patch===r.Patch&&n.Build>r.Build)))&&p("InvalidArgument: the new version of a master must be greater than the existing one"),o.Version=i,o.Version.Build=Si()},e.throwReadOnlyError=ei,e.throwWriteOnlyError=ti,e.unregisterMaster=fa,e.unregisterResources=Ei,e.unusedMasters=function(){var e=[];for(var t in ea){ea[t].UsageCount<=0&&e.push(t)}return e},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=webapp-tinkerer-runtime.min.js.map
