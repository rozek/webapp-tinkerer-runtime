!function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(jQuery),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function l(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var c={exports:{}};c.exports=function e(t,n,r){function o(a,l){if(!n[a]){if(!t[a]){if(!l&&u)return u(a);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return o(n||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var i=u,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(c),l=e.document.createTextNode("");a.observe(l,{characterData:!0}),n=function(){l.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var s=new e.MessageChannel;s.port1.onmessage=c,n=function(){s.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function f(e){1!==u.push(e)||r||n()}t.exports=f}).call(this,void 0!==s?s:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],l=["FULFILLED"],s=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var l=h(a);"error"===l.status&&r(l.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function v(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),l=0,s=-1,u=new this(o);++s<n;)c(e[s],s);return u;function c(e,o){function s(e){a[o]=e,++l!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(s,(function(e){r||(r=!0,i.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,l=new this(o);++a<n;)s(e[a]);return l;function s(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(l,e))}),(function(e){r||(r=!0,i.reject(l,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===l||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==s?f(n,this.state===l?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){i.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=h(d,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=l,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=v,u.reject=m,u.all=g,u.race=b},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==s?s:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function l(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",v=void 0,m={},g=Object.prototype.toString,b="readonly",y="readwrite";function x(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function w(e){return new u((function(t){var n=e.transaction(h,y),r=s([""]);n.objectStore(h).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function C(e){return"boolean"==typeof v?u.resolve(v):w(e).then((function(e){return v=e}))}function O(e){var t=m[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function I(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function A(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function S(e,t){return new u((function(n,r){if(m[e.name]=m[e.name]||_(),e.db){if(!t)return n(e.db);O(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),I(e)}}))}function P(e){return S(e,!1)}function T(e){return S(e,!0)}function M(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function j(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function E(e){return s([x(atob(e.data))],{type:e.type})}function N(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(n,e,e),n}function W(e){O(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,P(e).then((function(t){return e.db=t,M(e)?T(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw A(e,t),t}))}function B(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return W(e).then((function(){B(e,t,n,r-1)}))})).catch(n);n(o)}}function _(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=_(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k);var i=[];function a(){return u.resolve()}for(var l=0;l<o.forages.length;l++){var s=o.forages[l];s!==t&&i.push(s._initReady().catch(a))}var c=o.forages.slice(0);return u.all(i).then((function(){return n.db=o.db,P(n)})).then((function(e){return n.db=e,M(n,t._defaultConfig.version)?T(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var i=c[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function L(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){B(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),N(e)&&(e=E(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function F(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){B(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),l=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;N(r)&&(r=E(r));var o=e(r,n.key,l++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function D(e,t,n){var r=this;e=d(e);var o=new u((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(t)?C(i.db).then((function(e){return e?t:j(t)})):t})).then((function(t){B(r._dbInfo,y,(function(i,a){if(i)return o(i);try{var l=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=l.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=s.error?s.error:s.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return c(o,n),o}function R(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){B(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){B(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function U(e){var t=this,n=new u((function(e,n){t.ready().then((function(){B(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function $(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){B(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),l=!1,s=a.openKeyCursor();s.onsuccess=function(){var n=s.result;n?0===e||l?t(n.key):(l=!0,n.advance(e)):t(null)},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function H(e){var t=this,n=new u((function(e,n){t.ready().then((function(){B(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function q(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):P(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;O(e);var r=m[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var l=o[i];l._dbInfo.db=null,l._dbInfo.version=n}return new u((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,I(n._dbInfo)}})).catch((function(t){throw(A(e,t)||u.resolve()).catch((function(){})),t}))}})):i.then((function(t){O(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new u((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)I(r[t]._dbInfo)})).catch((function(t){throw(A(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return c(r,t),r}var J={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:F,getItem:L,setItem:D,removeItem:R,clear:z,length:U,key:$,keys:H,dropInstance:q};function G(){return"function"==typeof openDatabase}var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Y=X.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",le="ur16",se="ui32",ue="fl32",ce="fl64",fe=Y+ee.length,de=Object.prototype.toString;function pe(e){var t,n,r,o,i,a=.75*e.length,l=e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<l;t+=4)n=Q.indexOf(e[t]),r=Q.indexOf(e[t+1]),o=Q.indexOf(e[t+2]),i=Q.indexOf(e[t+3]),c[s++]=n<<2|r>>4,c[s++]=(15&r)<<4|o>>2,c[s++]=(3&o)<<6|63&i;return u}function he(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Q[n[t]>>2],r+=Q[(3&n[t])<<4|n[t+1]>>4],r+=Q[(15&n[t+1])<<2|n[t+2]>>6],r+=Q[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ve(e,t){var n="";if(e&&(n=de.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var r,o=X;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=le:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=se:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=ce:t(new Error("Failed to get type for BinaryArray"))),t(o+he(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Z+e.type+"~"+he(this.result);t(X+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,Y)!==X)return JSON.parse(e);var t,n=e.substring(fe),r=e.substring(Y,fe);if(r===te&&K.test(n)){var o=n.match(K);t=o[1],n=n.substring(o[0].length)}var i=pe(n);switch(r){case ee:return i;case te:return s([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case le:return new Uint16Array(i);case ae:return new Int32Array(i);case se:return new Uint32Array(i);case ue:return new Float32Array(i);case ce:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ge={serialize:ve,deserialize:me,stringToBuffer:pe,bufferToString:he};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){be(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,o}function xe(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,l){l.rows.length?i(e,a):be(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function we(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xe(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Ce(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xe(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,l=0;l<a;l++){var s=i.item(l),u=s.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,s.key,l+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Oe(e,t,n,r){var o=this;e=d(e);var i=new u((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var l=t,s=o._dbInfo;s.serializer.serialize(t,(function(t,u){u?a(u):s.db.transaction((function(n){xe(n,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(l)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Oe.apply(o,[e,l,n,r-1]));a(t)}}))}))})).catch(a)}));return c(i,n),i}function Ie(e,t,n){return Oe.apply(this,[e,t,n,1])}function Ae(e,t){var n=this;e=d(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xe(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Se(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){xe(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Pe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){xe(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Te(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xe(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Me(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){xe(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function je(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ee(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return c(r=e.name?new u((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(je(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function o(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,l=e.storeNames.length;a<l;a++)i.push(o(e.storeNames[a]));u.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),t),r}var Ne={_driver:"webSQLStorage",_initStorage:ye,_support:G(),iterate:Ce,getItem:we,setItem:Ie,removeItem:Ae,clear:Se,length:Pe,key:Te,keys:Me,dropInstance:Ee};function ke(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function We(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Be(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function _e(){return!Be()||localStorage.length>0}function Ve(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=We(e,t._defaultConfig),_e()?(t._dbInfo=n,n.serializer=ge,u.resolve()):u.reject()}function Le(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(n,e),n}function Fe(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return c(r,t),r}function De(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,l=0;l<i;l++){var s=localStorage.key(l);if(0===s.indexOf(r)){var u=localStorage.getItem(s);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,s.substring(o),a++)))return u}}}));return c(r,t),r}function Re(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return c(r,t),r}function ze(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return c(n,e),n}function Ue(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t}function $e(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(r,t),r}function He(e,t,n){var r=this;e=d(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return c(o,n),o}function qe(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return c(r=e.name?new u((function(t){e.storeName?t(We(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),t),r}var Je={_driver:"localStorageWrapper",_initStorage:Ve,_support:ke(),iterate:De,getItem:Fe,setItem:He,removeItem:$e,clear:Le,length:Ue,key:Re,keys:ze,dropInstance:qe},Ge=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Qe=function(e,t){for(var n=e.length,r=0;r<n;){if(Ge(e[r],t))return!0;r++}return!1},Ze=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ke={},Xe={},Ye={INDEXEDDB:J,WEBSQL:Ne,LOCALSTORAGE:Je},et=[Ye.INDEXEDDB._driver,Ye.WEBSQL._driver,Ye.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ze(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=new(function(){function e(t){for(var n in o(this,e),Ye)if(Ye.hasOwnProperty(n)){var r=Ye[n],i=r._driver;this[n]=i,Ke[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,l=i.length;a<l;a++){var s=i[a];if((!Qe(tt,s)||e[s])&&"function"!=typeof e[s])return void n(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return c(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}}();var f=function(n){Ke[r]&&console.info("Redefining LocalForage driver: "+r),Ke[r]=e,Xe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return f(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ke[e]?u.resolve(Ke[e]):u.reject(new Error("Driver not found."));return f(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ge);return f(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ze(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function l(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var l=new Error("No available storage method found.");return r._driverSet=u.reject(l),r._driverSet}return n()}}var s=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=s.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=l(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),f(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=at},{3:3}]},{},[4])(4);var f=c.exports,d=Function("return this")();function p(e,t){return null==e||"hasOwnProperty"in e&&"function"==typeof e.hasOwnProperty?e.hasOwnProperty(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){return null==e||"isPrototypeOf"in e&&"function"==typeof e.isPrototypeOf?e.isPrototypeOf(t):Object.prototype.isPrototypeOf.call(e,t)}function v(e){var t=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==t)throw new Error(e);var n=new Error(t[2]);throw n.name=t[1],n}function m(e){return"boolean"==typeof e||e instanceof Boolean}function g(e){return"number"==typeof e||e instanceof Number}function b(e){return("number"==typeof e||e instanceof Number)&&isFinite(e.valueOf())}function y(e){return("number"==typeof e||e instanceof Number)&&isNaN(e.valueOf())}function x(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),!g(e)||isNaN(e))return!1;if(b(t)){if(b(n)){if(e<t||!r&&e===t||e>n||!o&&e===n)return!1}else if(e<t||!r&&e===t)return!1}else if(b(n)&&(e>n||!o&&e===n))return!1;return!0}function w(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e)}function C(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e&&e>=0)}function O(e){return("number"==typeof e||e instanceof Number)&&(e=e.valueOf(),isFinite(e)&&Math.round(e)===e&&e>=1)}function I(e){return"string"==typeof e||e instanceof String}var A=/^\s*$/;function S(e){return("string"==typeof e||e instanceof String)&&!A.test(e.valueOf())}function P(e,t){return("string"==typeof e||e instanceof String)&&t.test(e.valueOf())}var T=/^[^\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function M(e){return P(e,T)}var j=/^[^\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function E(e){return P(e,j)}function N(e){return"function"==typeof e}function k(e){return"function"==typeof e&&(null==e.name||""===e.name)}function W(e){return"function"==typeof e&&null!=e.name&&""!==e.name}function B(e){return"function"==typeof e&&/^function\s*[^(]*\(\)\s*\{\s*\[native code\]\s*\}\s*$/.test(e.toString())}function _(e){return"function"==typeof e&&!/^function\s*[^(]*\(\)\s*\{\s*\[native code\]\s*\}\s*$/.test(e.toString())}function V(e){return null!=e&&"object"==typeof e}function L(e){return null!=e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function F(e){return null!=e&&"object"==typeof e&&!(e instanceof Object)}var D=Array.isArray;function R(e,t,n){if(D(e)){for(var r=0,o=e.length;r<o;r++)if(void 0===e[r])return!1;return!(null!=t&&e.length<t)&&!(null!=n&&e.length>n)}return!1}function z(e,t,n,r){if(D(e))try{for(var o=0,i=e.length;o<i;o++)if(0==t(e[o]))return!1;return!(null!=n&&e.length<n)&&!(null!=r&&e.length>r)}catch(e){}return!1}function U(e){return e instanceof Date}function $(e){return e instanceof Error}function H(e){return null!=e&&"function"==typeof e.then}function q(e){return e instanceof RegExp}function J(e,t){return t.indexOf(e)>=0}function G(e){return I(e)&&(Jn.hasOwnProperty(e)||/^#[a-fA-F0-9]{6}$/.test(e)||/^#[a-fA-F0-9]{8}$/.test(e)||/^rgb\([0-9]+,\s*[0-9]+,\s*[0-9]+\)$/.test(e)||/^rgba\([0-9]+,\s*[0-9]+,\s*[0-9]+,([01]|[0]?[.][0-9]+)\)$/.test(e))}var Q=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function Z(e){return P(e,Q)}var K=/^[^\s\x00-\x1F\x7F-\x9F\u2028\u2029\uFFF9-\uFFFB]*$/;function X(e){if(!P(e,K)||""===e)return!1;try{return new URL(e,"file://"),!0}catch(e){return!1}}var Y=!1,ee=!0;function te(e,t,n,r,o){if(null==t){if(r)return t;v("MissingArgument: no "+Fn(e)+" given")}else if(n(t))switch(!0){case t instanceof Boolean:case t instanceof Number:case t instanceof String:return t.valueOf();default:return t}else v("InvalidArgument: the given "+Fn(e)+" is no valid "+Fn(o))}function ne(e,t,n){var r=function(r,o){return te(r,o,e,t,n)},o=e.name;return null!=o&&/^ValueIs/.test(o)?re(r,o.replace(/^ValueIs/,t?"allow":"expect")):r}function re(e,t){if(null==e&&v("MissingArgument: no function given"),"function"!=typeof e&&v("InvalidArgument: the given 1st Argument is not a JavaScript function"),null==t&&v("MissingArgument: no desired name given"),"string"==typeof t||t instanceof String||v("InvalidArgument: the given desired name is not a string"),e.name===t)return e;try{if(Object.defineProperty(e,"name",{value:t}),e.name===t)return e}catch(e){}return new Function("originalFunction","return function "+t+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(e)}function oe(e,t){if(null!=t)return t.valueOf();v("MissingArgument: no "+Fn(e)+" given")}var ie=oe,ae=ne(m,ee,"boolean value"),le=ae,se=ne(m,Y,"boolean value"),ue=se,ce=ne(g,ee,"numeric value"),fe=ce,de=ne(g,Y,"numeric value"),pe=de,he=ne(b,ee,"finite numeric value"),ve=he,me=ne(b,Y,"finite numeric value"),ge=me,be=ne(y,ee,"NaN value"),ye=be,xe=ne(y,Y,"NaN value"),we=xe;function Ce(e,t,n,r,o,i){return null==t?t:Ae(e,t,n,r,o,i)}var Oe=Ce;function Ie(e,t,n,r,o,i){if(de(e,t),isNaN(t)&&v("InvalidArgument: the given "+Fn(e)+" is not-a-number"),null==o&&(o=!0),null==i&&(i=!0),null!=n&&isFinite(n)){if(null!=r&&isFinite(r)){if(t<n||!o&&t===n||t>r||!i&&t===r)throw new RangeError("the given "+Fn(e)+" ("+t+") is outside the allowed range ("+n+"..."+r+")")}else if(t<n||!o&&t===n)throw new RangeError("the given "+Fn(e)+" is below the allowed minimum ("+t+" "+(o?"<":"<=")+" "+n+")")}else if(null!=r&&isFinite(r)&&(t>r||!i&&t===r))throw new RangeError("the given "+Fn(e)+" exceeds the allowed maximum ("+t+" "+(i?">":">=")+" "+r+")");return t.valueOf()}var Ae=Ie,Se=ne(w,ee,"integral numeric value"),Pe=Se,Te=ne(w,Y,"integral numeric value"),Me=Te;function je(e,t,n,r){return null==t?t:ke(e,t,n,r)}var Ee=je;function Ne(e,t,n,r){if(Te(e,t),isNaN(t)&&v("InvalidArgument: the given "+Fn(e)+" is not-a-number"),null!=n&&isFinite(n)){if(null!=r&&isFinite(r)){if(t<n||t>r)throw new RangeError("the given "+Fn(e)+" ("+t+") is outside the allowed range ("+n+"..."+r+")")}else if(t<n)throw new RangeError("the given "+Fn(e)+" is below the allowed minimum ("+t+" < "+n+")")}else if(null!=r&&isFinite(r)&&t>r)throw new RangeError("the given "+Fn(e)+" exceeds the allowed maximum ("+t+" > "+r+")");return t.valueOf()}var ke=Ne,We=ne(C,ee,"ordinal number"),Be=We,_e=ne(C,Y,"ordinal number"),Ve=_e,Le=ne(O,ee,"cardinal number"),Fe=Le,De=ne(O,Y,"cardinal number"),Re=De,ze=ne(I,ee,"literal string"),Ue=ze,$e=ne(I,Y,"literal string"),He=$e,qe=ne(S,ee,"non-empty literal string"),Je=qe,Ge=ne(S,Y,"non-empty literal string"),Qe=Ge;function Ze(e,t,n){return null==t?t:Ye(e,t,n)}var Ke=Ze;function Xe(e,t,n){if($e(e,t),n.test(t))return t.valueOf();v("InvalidArgument: the given "+Fn(e)+" does not match the specified pattern")}var Ye=Xe,et=ne(M,ee,"literal text"),tt=et,nt=ne(M,Y,"literal text"),rt=nt,ot=ne(E,ee,"single line of text"),it=ot,at=ne(E,Y,"single line of text"),lt=at,st=ne(N,ee,"JavaScript function"),ut=st,ct=ne(N,Y,"JavaScript function"),ft=ct,dt=ne(k,ee,"anonymous JavaScript function"),pt=dt,ht=ne(k,Y,"anonymous JavaScript function"),vt=ht,mt=ne(W,ee,"named JavaScript function"),gt=mt,bt=ne(W,Y,"named JavaScript function"),yt=bt,xt=ne(B,ee,"native JavaScript function"),wt=xt,Ct=ne(B,Y,"native JavaScript function"),Ot=Ct,It=ne(_,ee,"scripted JavaScript function"),At=It,St=ne(_,Y,"scripted JavaScript function"),Pt=St,Tt=ne(V,ee,"JavaScript object"),Mt=Tt,jt=ne(V,Y,"JavaScript object"),Et=jt,Nt=ne(L,ee,'"plain" JavaScript object'),kt=Nt,Wt=ne(L,Y,'"plain" JavaScript object'),Bt=Wt,_t=ne(F,ee,'"vanilla" JavaScript object'),Vt=_t,Lt=ne(F,Y,'"vanilla" JavaScript object'),Ft=Lt;function Dt(e,t){return null==t?t:Ut(e,t)}var Rt=Dt;function zt(e,t){if(null==t&&v("MissingArgument: no "+Fn(e)+" given"),D(t))return t;v("InvalidArgument: the given "+Fn(e)+" is no JavaScript array")}var Ut=zt;function $t(e,t,n,r,o){return null==t?t:Jt(e,t,n,r,o)}var Ht=$t;function qt(e,t,n,r,o){if(null==t&&v("MissingArgument: no "+Fn(e)+" given"),R(t,r,o))return t;v("InvalidArgument: the given "+Fn(e)+" is "+(null==n?"either not a list or contains an invalid number of elements":"no "+Fn(n)))}var Jt=qt;function Gt(e,t,n,r,o,i){return null==t?t:Kt(e,t,n,r,o,i)}var Qt=Gt;function Zt(e,t,n,r,o,i){if(null==t&&v("MissingArgument: no "+Fn(e)+" given"),z(t,n,o,i))return t;v("InvalidArgument: the given "+Fn(e)+" is "+(null==r?"either not a list or contains invalid elements":"no "+Fn(r)))}var Kt=Zt;function Xt(e,t,n,r){return null==t?t:tn(e,t,n,r)}var Yt=Xt;function en(e,t,n,r){return null==t&&v("MissingArgument: no "+Fn(e)+" given"),t instanceof n||v("InvalidArgument: the given "+Fn(e)+" is no "+Fn(r)),t}var tn=en;function nn(e,t,n,r){return null==t?t:an(e,t,n,r)}var rn=nn;function on(e,t,n,r){if(null==t&&v("MissingArgument: no "+Fn(e)+" given"),n.isPrototypeOf(t))return t;v("InvalidArgument: the given "+Fn(e)+" is no "+Fn(r))}var an=on,ln=ne(U,ee,"JavaScript Date object"),sn=ln,un=ne(U,Y,"JavaScript Date object"),cn=un,fn=ne($,ee,"JavaScript Error object"),dn=fn,pn=ne($,Y,"JavaScript Error object"),hn=pn,vn=ne(H,ee,'JavaScript Promise (or "Thenable") object'),mn=vn,gn=ne(H,Y,'JavaScript Promise (or "Thenable") object'),bn=gn,yn=ne(q,ee,"JavaScript RegExp object"),xn=yn,wn=ne(q,Y,"JavaScript RegExp object"),Cn=wn;function On(e,t,n){return null==t?t:Sn(e,t,n)}var In=On;function An(e,t,n){if(null==t&&v("MissingArgument: no "+Fn(e)+" given"),J(t,n))return null==t||"function"!=typeof t.valueOf?t:t.valueOf();v("InvalidArgument: the given "+Fn(e)+" is not among the supported values")}var Sn=An,Pn=ne(G,ee,"valid CSS color specification"),Tn=Pn,Mn=ne(G,Y,"valid CSS color specification"),jn=Mn,En=ne(Z,ee,"valid EMail address"),Nn=En,kn=ne(Z,Y,"valid EMail address"),Wn=kn,Bn=ne(X,ee,"valid URL"),_n=Bn,Vn=ne(X,Y,"valid URL"),Ln=Vn;function Fn(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function Dn(e,t){void 0===t&&(t='"');return e.replace("'"===t?/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|'/g:/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?|"/g,(function(e){switch(e){case"'":return"\\'";case'"':return'\\"';case"\\":return"\\\\";default:return e}})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var t=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(t.length)+t}}))}function Rn(e,t){return void 0===t&&(t='"'),t+Dn(e,t)+t}function zn(e,t){return t=(t||"").trim()||"<br/>",e.replace(/[&<>"'\u0000-\u001F\u007F-\u009F\\]/g,(function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"\b":return"&#92;b";case"\f":return"&#92;f";case"\n":return t;case"\r":return"&#92;r";case"\t":return"&#92;t";case"\v":return"&#92;v";case"\\":return"&#92;";default:var n=e.charCodeAt(0).toString(16);return"&#x0000".substring(3,7-n.length)+n+";"}}))}function Un(e,t){if(e===t)return!1;var n=typeof e;if(n!==typeof t)return!0;switch(n){case"undefined":case"boolean":case"string":case"function":return!0;case"number":return isNaN(e)!==isNaN(t)||Math.abs(e-t)>Number.EPSILON;case"object":return null==e||(null==t||(Array.isArray(e)?function(e,t){if(!Array.isArray(t))return!0;if(e.length!==t.length)return!0;for(var n=0,r=e.length;n<r;n++)if(Un(e[n],t[n]))return!0;return!1}(e,t):function(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!0;for(var n in e)if(!(n in t))return!0;for(var n in t){if(!(n in e))return!0;if(Un(e[n],t[n]))return!0}return!1}(e,t)));default:return!0}return!0}function $n(e,t){return!Un(e,t)}function Hn(e){for(var t in jt("candidate",e),e)if(p(e,t))return!1;return!0}function qn(e){return/^\s*$/.test(e)}var Jn={transparent:"rgba(0,0,0,0,0.0)",aliceblue:"rgba(240,248,255,1.0)",lightpink:"rgba(255,182,193,1.0)",antiquewhite:"rgba(250,235,215,1.0)",lightsalmon:"rgba(255,160,122,1.0)",aqua:"rgba(0,255,255,1.0)",lightseagreen:"rgba(32,178,170,1.0)",aquamarine:"rgba(127,255,212,1.0)",lightskyblue:"rgba(135,206,250,1.0)",azure:"rgba(240,255,255,1.0)",lightslategray:"rgba(119,136,153,1.0)",beige:"rgba(245,245,220,1.0)",lightslategrey:"rgba(119,136,153,1.0)",bisque:"rgba(255,228,196,1.0)",lightsteelblue:"rgba(176,196,222,1.0)",black:"rgba(0,0,0,1.0)",lightyellow:"rgba(255,255,224,1.0)",blanchedalmond:"rgba(255,235,205,1.0)",lime:"rgba(0,255,0,1.0)",blue:"rgba(0,0,255,1.0)",limegreen:"rgba(50,205,50,1.0)",blueviolet:"rgba(138,43,226,1.0)",linen:"rgba(250,240,230,1.0)",brown:"rgba(165,42,42,1.0)",magenta:"rgba(255,0,255,1.0)",burlywood:"rgba(222,184,135,1.0)",maroon:"rgba(128,0,0,1.0)",cadetblue:"rgba(95,158,160,1.0)",mediumaquamarine:"rgba(102,205,170,1.0)",chartreuse:"rgba(127,255,0,1.0)",mediumblue:"rgba(0,0,205,1.0)",chocolate:"rgba(210,105,30,1.0)",mediumorchid:"rgba(186,85,211,1.0)",coral:"rgba(255,127,80,1.0)",mediumpurple:"rgba(147,112,219,1.0)",cornflowerblue:"rgba(100,149,237,1.0)",mediumseagreen:"rgba(60,179,113,1.0)",cornsilk:"rgba(255,248,220,1.0)",mediumslateblue:"rgba(123,104,238,1.0)",crimson:"rgba(220,20,60,1.0)",mediumspringgreen:"rgba(0,250,154,1.0)",cyan:"rgba(0,255,255,1.0)",mediumturquoise:"rgba(72,209,204,1.0)",darkblue:"rgba(0,0,139,1.0)",mediumvioletred:"rgba(199,21,133,1.0)",darkcyan:"rgba(0,139,139,1.0)",midnightblue:"rgba(25,25,112,1.0)",darkgoldenrod:"rgba(184,134,11,1.0)",mintcream:"rgba(245,255,250,1.0)",darkgray:"rgba(169,169,169,1.0)",mistyrose:"rgba(255,228,225,1.0)",darkgreen:"rgba(0,100,0,1.0)",moccasin:"rgba(255,228,181,1.0)",darkgrey:"rgba(169,169,169,1.0)",navajowhite:"rgba(255,222,173,1.0)",darkkhaki:"rgba(189,183,107,1.0)",navy:"rgba(0,0,128,1.0)",darkmagenta:"rgba(139,0,139,1.0)",oldlace:"rgba(253,245,230,1.0)",darkolivegreen:"rgba(85,107,47,1.0)",olive:"rgba(128,128,0,1.0)",darkorange:"rgba(255,140,0,1.0)",olivedrab:"rgba(107,142,35,1.0)",darkorchid:"rgba(153,50,204,1.0)",orange:"rgba(255,165,0,1.0)",darkred:"rgba(139,0,0,1.0)",orangered:"rgba(255,69,0,1.0)",darksalmon:"rgba(233,150,122,1.0)",orchid:"rgba(218,112,214,1.0)",darkseagreen:"rgba(143,188,143,1.0)",palegoldenrod:"rgba(238,232,170,1.0)",darkslateblue:"rgba(72,61,139,1.0)",palegreen:"rgba(152,251,152,1.0)",darkslategray:"rgba(47,79,79,1.0)",paleturquoise:"rgba(175,238,238,1.0)",darkslategrey:"rgba(47,79,79,1.0)",palevioletred:"rgba(219,112,147,1.0)",darkturquoise:"rgba(0,206,209,1.0)",papayawhip:"rgba(255,239,213,1.0)",darkviolet:"rgba(148,0,211,1.0)",peachpuff:"rgba(255,218,185,1.0)",deeppink:"rgba(255,20,147,1.0)",peru:"rgba(205,133,63,1.0)",deepskyblue:"rgba(0,191,255,1.0)",pink:"rgba(255,192,203,1.0)",dimgray:"rgba(105,105,105,1.0)",plum:"rgba(221,160,221,1.0)",dimgrey:"rgba(105,105,105,1.0)",powderblue:"rgba(176,224,230,1.0)",dodgerblue:"rgba(30,144,255,1.0)",purple:"rgba(128,0,128,1.0)",firebrick:"rgba(178,34,34,1.0)",red:"rgba(255,0,0,1.0)",floralwhite:"rgba(255,250,240,1.0)",rosybrown:"rgba(188,143,143,1.0)",forestgreen:"rgba(34,139,34,1.0)",royalblue:"rgba(65,105,225,1.0)",fuchsia:"rgba(255,0,255,1.0)",saddlebrown:"rgba(139,69,19,1.0)",gainsboro:"rgba(220,220,220,1.0)",salmon:"rgba(250,128,114,1.0)",ghostwhite:"rgba(248,248,255,1.0)",sandybrown:"rgba(244,164,96,1.0)",gold:"rgba(255,215,0,1.0)",seagreen:"rgba(46,139,87,1.0)",goldenrod:"rgba(218,165,32,1.0)",seashell:"rgba(255,245,238,1.0)",gray:"rgba(128,128,128,1.0)",sienna:"rgba(160,82,45,1.0)",green:"rgba(0,128,0,1.0)",silver:"rgba(192,192,192,1.0)",greenyellow:"rgba(173,255,47,1.0)",skyblue:"rgba(135,206,235,1.0)",grey:"rgba(128,128,128,1.0)",slateblue:"rgba(106,90,205,1.0)",honeydew:"rgba(240,255,240,1.0)",slategray:"rgba(112,128,144,1.0)",hotpink:"rgba(255,105,180,1.0)",slategrey:"rgba(112,128,144,1.0)",indianred:"rgba(205,92,92,1.0)",snow:"rgba(255,250,250,1.0)",indigo:"rgba(75,0,130,1.0)",springgreen:"rgba(0,255,127,1.0)",ivory:"rgba(255,255,240,1.0)",steelblue:"rgba(70,130,180,1.0)",khaki:"rgba(240,230,140,1.0)",tan:"rgba(210,180,140,1.0)",lavender:"rgba(230,230,250,1.0)",teal:"rgba(0,128,128,1.0)",lavenderblush:"rgba(255,240,245,1.0)",thistle:"rgba(216,191,216,1.0)",lawngreen:"rgba(124,252,0,1.0)",tomato:"rgba(255,99,71,1.0)",lemonchiffon:"rgba(255,250,205,1.0)",turquoise:"rgba(64,224,208,1.0)",lightblue:"rgba(173,216,230,1.0)",violet:"rgba(238,130,238,1.0)",lightcoral:"rgba(240,128,128,1.0)",wheat:"rgba(245,222,179,1.0)",lightcyan:"rgba(224,255,255,1.0)",white:"rgba(255,255,255,1.0)",lightgoldenrodyellow:"rgba(250,250,210,1.0)",whitesmoke:"rgba(245,245,245,1.0)",lightgray:"rgba(211,211,211,1.0)",yellow:"rgba(255,255,0,1.0)",lightgreen:"rgba(144,238,144,1.0)",yellowgreen:"rgba(154,205,50,1.0)",lightgrey:"rgba(211,211,211,1.0)"};function Gn(e){var t=e.toLowerCase();if(Jn.hasOwnProperty(t)&&(e=Jn[t]),/^#[a-fA-F0-9]{6}$/.test(e))return e+"FF";if(/^#[a-fA-F0-9]{8}$/.test(e))return e;var n="0123456789ABCDEF";function r(e){return e>255&&(e=255),n[Math.trunc(e/16)]+n[e%16]}var o=/^rgb\(([0-9]+),\s*([0-9]+),\s*([0-9]+)\)$/i.exec(e);if(null!=o)return"#"+r(parseInt(o[1],10))+r(parseInt(o[2],10))+r(parseInt(o[3],10))+"FF";if(null!=(o=/^rgba\(([(0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([01]?[.][0-9]+|[01])\)$/i.exec(e)))return"#"+r(parseInt(o[1],10))+r(parseInt(o[2],10))+r(parseInt(o[3],10))+r(parseFloat(o[4]));v("InvalidArgument: the given Value is not a valid CSS Color specification")}function Qn(e){return Gn(e).slice(0,7)}var Zn,Kn=Object.freeze({__proto__:null,ColorSet:Jn,FunctionWithName:re,HTMLsafe:zn,HexColor:Gn,MarkDownSafe:function(e,t){return zn(e,t).replace(/:/g,"&#58;")},ObjectIsEmpty:Hn,ObjectIsNotEmpty:function(e){return!Hn(e)},ObjectMergedWith:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t.length;r<o;r++){var i=t[r];if(null!=i)if("object"==typeof i)for(var a in i){var l=Object.getOwnPropertyDescriptor(i,a);null!=l&&Object.defineProperty(e,a,l)}else v("InvalidArgument: argument #"+(r+1)+" is not an object")}return e},Object_hasOwnProperty:p,Object_isPrototypeOf:h,Object_propertyIsEnumerable:function(e,t){return null==e||"propertyIsEnumerable"in e&&"function"==typeof e.propertyIsEnumerable?e.propertyIsEnumerable(t):Object.prototype.propertyIsEnumerable.call(e,t)},Object_toLocaleString:function(e){return null==e||"toLocaleString"in e&&"function"==typeof e.toLocaleString?e.toLocaleString():Object.prototype.toString.call(e)},Object_toString:function(e){return null==e||"toString"in e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)},Object_valueOf:function(e){return null==e||"valueOf"in e&&"function"==typeof e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)},RGBAColor:function(e){var t=e.toLowerCase();if(Jn.hasOwnProperty(t))return Jn[t];if(/^#[a-fA-F0-9]{6}$/.test(e))return"rgba("+parseInt(e.slice(1,3),16)+","+parseInt(e.slice(3,5),16)+","+parseInt(e.slice(5,7),16)+", 1)";if(/^#[a-fA-F0-9]{8}$/.test(e))return"rgba("+parseInt(e.slice(1,3),16)+","+parseInt(e.slice(3,5),16)+","+parseInt(e.slice(5,7),16)+","+parseInt(e.slice(7),16)/255+")";var n=/^rgb\(([0-9]+),\s*([0-9]+),\s*([0-9]+)\)$/i.exec(e);if(null!=n)return e.slice(0,e.length-1)+",1)";if(null!=(n=/^rgba\(([(0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0]?[.][0-9]+|[01])\)$/i.exec(e)))return e;v("InvalidArgument: the given Value is not a valid CSS Color specification")},StringIsEmpty:qn,StringIsNotEmpty:function(e){return!qn(e)},ValidatorForClassifier:ne,ValueExists:function(e){return null!=e},ValueInheritsFrom:function(e,t){return h(t,e)},ValueIsAnonymousFunction:k,ValueIsArray:D,ValueIsBoolean:m,ValueIsCardinal:O,ValueIsColor:G,ValueIsDate:U,ValueIsEMailAddress:Z,ValueIsEmptyString:function(e){return("string"==typeof e||e instanceof String)&&A.test(e.valueOf())},ValueIsError:$,ValueIsFiniteNumber:b,ValueIsFunction:N,ValueIsInstanceOf:function(e,t){return e instanceof t},ValueIsInteger:w,ValueIsIntegerInRange:function(e,t,n){if(!w(e)||isNaN(e))return!1;if(b(t)){if(b(n)){if(e<t||e>n)return!1}else if(e<t)return!1}else if(b(n)&&e>n)return!1;return!0},ValueIsList:R,ValueIsListSatisfying:z,ValueIsMissing:function(e){return null==e},ValueIsNaN:y,ValueIsNamedFunction:W,ValueIsNativeFunction:B,ValueIsNonEmptyString:S,ValueIsNumber:g,ValueIsNumberInRange:x,ValueIsObject:V,ValueIsOneOf:J,ValueIsOrdinal:C,ValueIsPlainObject:L,ValueIsPromise:H,ValueIsRegExp:q,ValueIsScriptedFunction:_,ValueIsString:I,ValueIsStringMatching:P,ValueIsText:M,ValueIsTextline:E,ValueIsURL:X,ValueIsVanillaObject:F,ValuesAreEqual:$n,ValuesDiffer:Un,acceptNil:ee,allowAnonymousFunction:dt,allowArray:Dt,allowBoolean:ae,allowCardinal:Le,allowColor:Pn,allowDate:ln,allowEMailAddress:En,allowError:fn,allowFiniteNumber:he,allowFunction:st,allowInstanceOf:Xt,allowInteger:Se,allowIntegerInRange:je,allowList:$t,allowListSatisfying:Gt,allowNaN:be,allowNamedFunction:mt,allowNativeFunction:xt,allowNonEmptyString:qe,allowNumber:ce,allowNumberInRange:Ce,allowObject:Tt,allowOneOf:On,allowOrdinal:We,allowPlainObject:Nt,allowPromise:vn,allowRegExp:yn,allowScriptedFunction:It,allowString:ze,allowStringMatching:Ze,allowText:et,allowTextline:ot,allowURL:Bn,allowValueInheritingFrom:nn,allowVanillaObject:_t,allowedAnonymousFunction:pt,allowedArray:Rt,allowedBoolean:le,allowedCardinal:Fe,allowedColor:Tn,allowedDate:sn,allowedEMailAddress:Nn,allowedError:dn,allowedFiniteNumber:ve,allowedFunction:ut,allowedInstanceOf:Yt,allowedInteger:Pe,allowedIntegerInRange:Ee,allowedList:Ht,allowedListSatisfying:Qt,allowedNaN:ye,allowedNamedFunction:gt,allowedNativeFunction:wt,allowedNonEmptyString:Je,allowedNumber:fe,allowedNumberInRange:Oe,allowedObject:Mt,allowedOneOf:In,allowedOrdinal:Be,allowedPlainObject:kt,allowedPromise:mn,allowedRegExp:xn,allowedScriptedFunction:At,allowedString:Ue,allowedStringMatching:Ke,allowedText:tt,allowedTextline:it,allowedURL:_n,allowedValueInheritingFrom:rn,allowedVanillaObject:Vt,constrained:function(e,t,n){return void 0===t&&(t=-1/0),void 0===n&&(n=1/0),Math.max(t,Math.min(e,n))},escaped:Fn,expectAnonymousFunction:ht,expectArray:zt,expectBoolean:se,expectCardinal:De,expectColor:Mn,expectDate:un,expectEMailAddress:kn,expectError:pn,expectFiniteNumber:me,expectFunction:ct,expectInstanceOf:en,expectInteger:Te,expectIntegerInRange:Ne,expectList:qt,expectListSatisfying:Zt,expectNaN:xe,expectNamedFunction:bt,expectNativeFunction:Ct,expectNonEmptyString:Ge,expectNumber:de,expectNumberInRange:Ie,expectObject:jt,expectOneOf:An,expectOrdinal:_e,expectPlainObject:Wt,expectPromise:gn,expectRegExp:wn,expectScriptedFunction:St,expectString:$e,expectStringMatching:Xe,expectText:nt,expectTextline:at,expectURL:Vn,expectValue:oe,expectValueInheritingFrom:on,expectVanillaObject:Lt,expectedAnonymousFunction:vt,expectedArray:Ut,expectedBoolean:ue,expectedCardinal:Re,expectedColor:jn,expectedDate:cn,expectedEMailAddress:Wn,expectedError:hn,expectedFiniteNumber:ge,expectedFunction:ft,expectedInstanceOf:tn,expectedInteger:Me,expectedIntegerInRange:ke,expectedList:Jt,expectedListSatisfying:Kt,expectedNaN:we,expectedNamedFunction:yt,expectedNativeFunction:Ot,expectedNonEmptyString:Qe,expectedNumber:pe,expectedNumberInRange:Ae,expectedObject:Et,expectedOneOf:Sn,expectedOrdinal:Ve,expectedPlainObject:Bt,expectedPromise:bn,expectedRegExp:Cn,expectedScriptedFunction:Pt,expectedString:He,expectedStringMatching:Ye,expectedText:rt,expectedTextline:lt,expectedURL:Ln,expectedValue:ie,expectedValueInheritingFrom:an,expectedVanillaObject:Ft,global:d,quotable:Dn,quoted:Rn,rejectNil:Y,shortHexColor:Qn,throwError:v,unescaped:function(e){return e.replace(/\\[0bfnrtv'"\\\/]|\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}/g,(function(e){switch(e){case"\\0":return"\0";case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\v":return"\v";case"\\'":return"'";case'\\"':return'"';case"\\\\":return"\\";default:var t=parseInt(e.slice(2),16);return String.fromCharCode(t)}}))},validatedArgument:te});!function(e){if(e.Version="0.1.0","function"!=typeof jQuery||null==jQuery.fn)throw window.alert('"jQuery" not found\n\nThe WebApp Tinkerer needs "jQuery" to be loaded first'),new Error('MissingDependency: "jQuery" not found');e.WAT_Categories=["Applet","Card","Overlay","Control","Compound"],e.WAT_horizontalAnchorings=["left-width","left-right","width-right"],e.WAT_verticalAnchorings=["top-height","top-bottom","height-bottom"],e.WAT_FontWeights=["thin","extra-light","light","normal","medium","semi-bold","bold","extra-bold","heavy","lighter","bolder"];var t=Object.assign(Object.create(null),{thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,heavy:900});for(var r in e.WAT_FontStyles=["normal","italic"],e.WAT_TextDecorationLines=["none","underline","overline","line-through"],e.WAT_TextDecorationStyles=["solid","double","dotted","dashed","wavy"],e.WAT_TextAlignments=["left","center","right","justify"],e.WAT_BackgroundModes=["normal","contain","cover","fill","tile"],e.WAT_BorderStyles=["none","dotted","dashed","solid","double","groove","ridge","inset","outset"],e.WAT_Cursors=["alias","all-scroll","auto","cell","context-menu","col-resize","copy","crosshair","default","e-resize","ew-resize","grab","grabbing","help","move","n-resize","ne-resize","nesw-resize","ns-resize","nw-resize","nwse-resize","no-drop","none","not-allowed","pointer","progress","row-resize","s-resize","se-resize","sw-resize","text","vertical-text","w-resize","wait","zoom-in","zoom-out"],e.WAT_Overflows=["visible","hidden","scroll","auto"],e.WAT_TextOverflows=["clip","ellipsis"],Kn)Object.prototype.hasOwnProperty.call(Kn,r)&&(e[r]=Kn[r]);function s(e){return e instanceof HTMLElement}function u(e){return e instanceof n.default}function c(e){return e instanceof ln}function p(e){return e instanceof sn}function h(e){return e instanceof fn}function g(e){return e instanceof dn}function y(e){return e instanceof vn}function w(e){return e instanceof pn}function O(e){return e instanceof vn||e instanceof pn}function A(e){return e instanceof un}e.ValueIsElement=s,e.allowElement=ne(s,ee,"DOM element"),e.allowedElement=e.allowElement,e.expectElement=ne(s,Y,"DOM element"),e.expectedElement=e.expectElement,e.ValueIs$Instance=u,e.allow$Instance=ne(u,ee,'"jQuery" instance'),e.allowed$Instance=e.allow$Instance,e.expect$Instance=ne(u,Y,'"jQuery" instance'),e.expected$Instance=e.expect$Instance,e.ValueIsVisual=c,e.allowVisual=ne(c,ee,"WAT visual"),e.allowedVisual=e.allowVisual,e.expectVisual=ne(c,Y,"WAT visual"),e.expectedVisual=e.expectVisual,e.ValueIsApplet=p,e.allowApplet=ne(p,ee,"WAT applet"),e.allowedApplet=e.allowApplet,e.expectApplet=ne(p,Y,"WAT applet"),e.expectedApplet=e.expectApplet,e.ValueIsCard=h,e.allowCard=ne(h,ee,"WAT card"),e.allowedCard=e.allowCard,e.expectCard=ne(h,Y,"WAT card"),e.expectedCard=e.expectCard,e.ValueIsOverlay=g,e.allowOverlay=ne(g,ee,"WAT overlay"),e.allowedOverlay=e.allowOverlay,e.expectOverlay=ne(g,Y,"WAT overlay"),e.expectedOverlay=e.expectOverlay,e.ValueIsControl=y,e.allowControl=ne(y,ee,"WAT control"),e.allowedControl=e.allowControl,e.expectControl=ne(y,Y,"WAT control"),e.expectedControl=e.expectControl,e.ValueIsCompound=w,e.allowCompound=ne(w,ee,"WAT compound"),e.allowedCompound=e.allowCompound,e.expectCompound=ne(w,Y,"WAT compound"),e.expectedCompound=e.expectCompound,e.ValueIsComponent=O,e.allowComponent=ne(O,ee,"WAT component"),e.allowedComponent=e.allowComponent,e.expectComponent=ne(O,Y,"WAT component"),e.expectedComponent=e.expectComponent,e.ValueIsContainer=A,e.allowContainer=ne(A,ee,"WAT container"),e.allowedContainer=e.allowContainer,e.expectContainer=ne(A,Y,"WAT container"),e.expectedContainer=e.expectContainer;var S=/^wat-[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}$/i;function T(e){return I(e)&&S.test(e)}e.ValueIsUniqueId=T,e.allowUniqueId=ne(T,ee,"unique WAT id"),e.allowedUniqueId=e.allowUniqueId,e.expectUniqueId=ne(T,Y,"unique WAT id"),e.expectedUniqueId=e.expectUniqueId;var j=/^[a-z][-_a-z.0-9]*$/i;function k(e){return P(e,j)}e.ValueIsId=k,e.allowId=ne(k,ee,"WAT HTML id"),e.allowedId=e.allowId,e.expectId=ne(k,Y,"WAT HTML id"),e.expectedId=e.expectId;var W=/^[a-z$_][a-z$_0-9]*(-[a-z$_][a-z$_0-9]*)*$/i;function B(e){return P(e,W)}e.ValueIsName=B,e.allowName=ne(B,ee,"WAT name"),e.allowedName=e.allowName,e.expectName=ne(B,Y,"WAT name"),e.expectedName=e.expectName;var _=/^#?[a-z$_][a-z$_0-9]*(-[a-z$_][a-z$_0-9]*)*$/i;function V(e){return P(e,_)}function L(e){return E(e)}e.ValueIsUniversalName=V,e.allowUniversalName=ne(V,ee,"WAT name"),e.allowedUniversalName=e.allowUniversalName,e.expectUniversalName=ne(V,Y,"WAT name"),e.expectedUniversalName=e.expectUniversalName,e.ValueIsLabel=L,e.allowLabel=ne(L,ee,"WAT visual label"),e.allowedLabel=e.allowLabel,e.expectLabel=ne(L,Y,"WAT visual label"),e.expectedLabel=e.expectLabel;var F=/^[a-z$_][a-z$_0-9]*$/i;function R(e){return P(e,F)}function z(e){return x(e,0,1/0,!0,!1)}function U(e){return b(e)&&e>=0}e.ValueIsIdentifier=R,e.allowIdentifier=ne(R,ee,"WAT identifier"),e.allowedIdentifier=e.allowIdentifier,e.expectIdentifier=ne(R,Y,"WAT identifier"),e.expectedIdentifier=e.expectIdentifier,e.ValueIsLocation=z,e.allowLocation=ne(z,ee,"coordinate"),e.allowedLocation=e.allowLocation,e.expectLocation=ne(z,Y,"coordinate"),e.expectedLocation=e.expectLocation,e.ValueIsDimension=U,e.allowDimension=ne(U,ee,"extent"),e.allowedDimension=e.allowDimension,e.expectDimension=ne(U,Y,"extent"),e.expectedDimension=e.expectDimension;var $=/^(0|[1-9]\d*)(?:[.](0|[1-9]\d*)(?:[.](0|[1-9]\d*)(-[-0-9A-Za-z.]+)?)?)?$/;function H(e){return P(e,$)}function q(e){v("ReadOnlyProperty: property "+Rn(e)+" must not be set")}function G(e){v("WriteOnlyProperty: property "+Rn(e)+" must not be read")}function Q(e,t){for(null==e&&v("InvalidArgument: the given target object is null or undefined");null!=e;){var n=Object.getOwnPropertyDescriptor(e,t);if(null!=n)return n;e=Object.getPrototypeOf(e)}}function Z(e,t){var n=/^<([-a-z0-9_]+)((?:[\s\xA0]+[-a-z0-9_]+(?:[\s\xA0]*=[\s\xA0]*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s\xA0]+))?)*)[\s\xA0]*(\/?)>/i,r=/^<\/([-a-z0-9_]+)[^>]*>/i,o=/([-a-z0-9]+)(?:[\s\xA0]*=[\s\xA0]*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s\xA0]+)))?/gi;function i(e){for(var t=e.split(","),n=Object.create(null),r=0,o=t.length;r<o;r++)n[t[r]]=!0;return n}var a=i("area,base,basefont,br,col,embed,frame,hr,img,input,isIndex,keygen,link,meta,param,source,track,wbr"),l=i("address,article,aside,audio,blockquote,canvas,center,dd,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,isIndex,li,main,menu,nav,noframes,noscript,ol,output,p,pre,section,table,tbody,td,tfoot,th,thead,tr,ul,video,applet"),s=i("a,abbr,acronym,Applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,Object,q,s,samp,Script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=i("area,base,basefont,bgsound,br,col,colgroup,dd,dt,embed,frame,hr,img,input,isIndex,keygen,li,link,menuitem,meta,options,p,param,source,td,tfoot,th,thead,tr,track,wbr"),c=i("script,style,svelte:options"),f=i("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),d=function(){},p=t.processStartTag||d,h=t.processEndTag||d,m=t.processText||d,g=t.processComment||d,b=[];function y(e,t,n,r){if(t=t.toLowerCase(),l[t])for(;null!=b.last()&&s[b.last()];)x("",b.last());if(u[t]&&b.last()===t&&x("",t),(r=a[t]||!!r)||b.push(t),p!==d){var i=[];n.replace(o,(function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:f[t]?t:"";return i.push({Name:t,Value:n,escapedValue:n.replace(/(^|[^\\])"/g,'$1\\"')}),""})),p(t,i,r,b.length===(r?0:1))}return""}function x(e,t){var n;if(null==t)n=0;else for(t=t.toLowerCase(),n=b.length-1;n>=0&&b[n]!==t;n--);if(n>=0){for(var r=b.length-1;r>=n;r--)h(b[r],0===r);b.length=n}return""}b.last=function(){return this[this.length-1]};for(var w=e;""!==e;){var C=!0;if(null!=b.last()&&c[b.last()])e=e.replace(new RegExp("^((?:.|\n)*?)</"+b.last()+"[^>]*>","i"),(function(e,t){return t=t.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),m(t,0===b.length),""})),x(0,b.last());else{if(e.startsWith("\x3c!--"))(I=e.indexOf("--\x3e",4))>0&&(g(e.slice(4,I)),e=e.slice(I+3),C=!1);else if(e.startsWith("</")){null!=(O=e.match(r))&&(e=e.slice(O[0].length),O[0].replace(r,x),C=!1)}else if(e.startsWith("<")){var O;null!=(O=e.match(n))&&(e=e.slice(O[0].length),O[0].replace(n,y),C=!1)}if(C){var I,A=(I=e.indexOf("<"))<0?e:e.slice(0,I);e=I<0?"":e.slice(I),m(A,0===b.length)}}if(e===w)switch(!0){case e.startsWith("<"):e=e.slice(1),m("&lt;",0===b.length);break;default:v('HTMLParseError: could not parse "'+e+'"')}w=e}x()}function K(e,t){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(o.Name===e)return o.Value}}function te(e,t,n){for(var r="<"+e,o=0,i=t.length;o<i;o++){var a=t[o];r+=" "+a.Name+'="'+a.escapedValue+'"'}return r+(n?"/>":">")}e.ValueIsSemVer=H,e.allowSemVer=ne(H,ee,"version specification"),e.allowedSemVer=e.allowSemVer,e.expectSemVer=ne(H,Y,"version specification"),e.expectedSemVer=e.expectSemVer,e.throwReadOnlyError=q,e.throwWriteOnlyError=G,e.PropertyDescriptorFor=Q;var re=/^(\d+)(?:[.](\d+)(?:[.](\d+)(-[-0-9A-Za-z.]+)?)?)?$/;function oe(e){var t=re.exec(e);return{major:parseInt(t[1],10),minor:null==t[2]?void 0:parseInt(t[2],10),Patch:null==t[3]?void 0:parseInt(t[3],10),Build:null==t[4]?void 0:parseInt(t[4].slice(1),16)}}function ie(e){var t=e.major,n=e.minor,r=e.Patch;e.Build;return 1,{major:t,minor:n=n||0,Patch:r=r||(0===t&&0===n?1:0),Build:1}}var le=new Date("2020-02-02").getTime();function ce(){return Date.now()-le}var fe,de=new WeakMap;function he(e){nt("resource",e),me(e||"","register")}function ve(e){et("resource",e),null!=e&&me(e||"","unregister")}function me(e,t){""!==e.trim()&&function(e){var t,n,r=[];function o(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].Name.toLowerCase()]=e[n];return t}function i(e){r.forEach((function(t){!function(e,t){if(e.Form!==t.Form)return!1;switch(e.Form){case"literalStyle":case"externalStyle":return e.Type===t.Type&&e.Media===t.Media&&e.Title===t.Title&&(e.Value||"").trim()===(t.Value||"").trim();case"literalScript":case"externalScript":return e.Type===t.Type&&e.noModule===t.noModule&&(e.Value||"").trim()===(t.Value||"").trim();default:v("InternalError: unforeseen resource form")}}(t,e)?r.push(e):v("DuplicateResources: the given set of resources contains duplicates")}))}return Z(e,{processStartTag:function(e,r,a,l){if(l){switch(e){case"link":if(K("rel",r)==="stylesheet"){i({Form:"externalStyle",Type:K("type",r)||"text/css",Media:K("media",r)||"all",Title:K("title",r)||undefined,Value:K("href",r),AttributeSet:o(r)})}return;case"script":case"style":t=o(r);n="";return;default:v("InvalidResourceSet: a WAT resource set must only contain "+"style, script or link elements (the latter only with "+'relation "stylesheet")')}}else{if(n!==undefined){n+=te(e,r,a)}}},processEndTag:function(e,r){if(r){switch(e){case"script":i({Form:t.src==null?"literalScript":"externalScript",Type:(t===null||t===void 0?void 0:t.type.Value)||"application/javascript",noModule:"nomodule"in t,Value:t.src==null?n:t.src.Value,AttributeSet:t});break;case"style":i({Form:"literalStyle",Type:(t===null||t===void 0?void 0:t.type.Value)||"text/css",Media:(t===null||t===void 0?void 0:t.media.Value)||"all",Title:(t===null||t===void 0?void 0:t.title.Value)||undefined,Value:n,AttributeSet:t})}t={};n=undefined}else{if(n!==undefined){n+="</"+e+">"}}},processText:function(e,t){if(n!==undefined){n+=e}}}),r}(e).forEach((function(e){!function(e,t){var r,o=function(e){var t=void 0;return n.default(document.head).children("link,style,script").each((function(){var r=n.default(this);(function(e,t){switch(e.Form){case"literalStyle":return"STYLE"===t[0].tagName&&"text/css"===(t.attr("type")||"text/css")&&(t.attr("media")||"all")===e.Media&&(t.attr("title")||void 0)===e.Title&&t.text().trim()===e.Value;case"externalStyle":return"LINK"===t[0].tagName&&"stylesheet"===t.attr("rel")&&"text/css"===(t.attr("type")||"text/css")&&(t.attr("media")||"all")===e.Media&&(t.attr("title")||void 0)===e.Title&&t.attr("href")===e.Value;case"literalScript":return"SCRIPT"===t[0].tagName&&(null==t.attr("type")||"application/javascript"===t.attr("type")||"text/javascript"===t.attr("type"))&&(t.attr("nomodule")||!1)===e.noModule&&t.text().trim()===e.Value;case"externalScript":return"SCRIPT"===t[0].tagName&&(null==t.attr("type")||"application/javascript"===t.attr("type")||"text/javascript"===t.attr("type"))&&(t.attr("nomodule")||!1)===e.noModule&&t.attr("src")===e.Value;default:v("InternalError: unforeseen resource form")}})(e,r)&&(t=r)})),t||n.default()}(e);if(null==o)switch(t){case"register":break;case"unregister":return;case"collect":v("NoSuchResource: an expected resource has already been removed")}else switch(t){case"register":return void function(e){var t=e[0];de.set(t,(de.get(t)||0)+1)}(o);case"unregister":return void function(e){var t=e[0];de.set(t,Math.max(0,(de.get(t)||0)-1))}(o);case"collect":return void function(e){for(var t=e[0],n=0,r=fe.length;n<r;n++)if(fe[n]===t)return;fe.push(t)}(o)}switch(e.Form){case"literalStyle":(r=n.default("<style></style>")).html(e.Value||"");break;case"externalStyle":r=n.default("<link></link>");break;case"literalScript":(r=n.default("<script><\/script>")).html(e.Value||"");break;case"externalScript":r=n.default("<script><\/script>");break;default:v("InternalError: unforeseen resource form")}var i=e.AttributeSet||{};for(var a in i)i.hasOwnProperty(a)&&r.attr(a,i[a].Value);switch(e.Form){case"literalStyle":case"externalStyle":n.default(document.head).append(r);break;case"literalScript":try{n.default(document.head).append(r)}catch(e){throw console.warn("could not attach literal script",e),e}break;case"externalScript":document.head.appendChild(r[0]);break;default:v("InternalError: unforeseen resource form")}de.set(r[0],1)}(e,t)}))}e.registerResources=he,e.unregisterResources=ve;var ge,be=!1;try{f.config({driver:[f.INDEXEDDB,f.WEBSQL]}),be=!0}catch(e){}function ye(){return null!=ge}function xe(e){return i(this,void 0,void 0,(function(){var t,n,r,o,i;return a(this,(function(a){switch(a.label){case 0:switch(!0){case p(e):if(null==(t=e.Name))return[2,!1];break;case u(e):if(!B(n=e.data("wat-name")))return[2,!1];t=n;break;default:v("InvalidArgument: applet or applet name expected")}if(!ye())return[2,!1];a.label=1;case 1:return a.trys.push([1,3,,4]),r=t.startsWith("#")?t.slice(1):t,o=I,[4,ge.getItem(r)];case 2:return[2,o.apply(void 0,[a.sent()])];case 3:return i=a.sent(),console.error('backup of applet "'+t+" could not be checked, reason: ",i),[2,!1];case 4:return[2]}}))}))}function we(t){return i(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){switch(a.label){case 0:e.expect$Instance("applet peer",t),B(n=t.data("wat-name"))||v("InvalidArgument: the given applet peer does not have a valid name"),a.label=1;case 1:return a.trys.push([1,3,,4]),o=n.startsWith("#")?n.slice(1):n,[4,ge.getItem(o)];case 2:return r=a.sent(),[3,4];case 3:return i=a.sent(),console.error('applet "'+n+" could not be restored, reason: ",i),v("applet could not be restored (see browser console)"),[3,4];case 4:return Ee(r,t),[2,$t(t[0])]}}))}))}function Oe(e){switch(ye()||v("NotSupported: WAT applets can not be preserved in this environment"),B(e.Name)||v("InvalidArgument: the given applet does not have a valid name"),Jt(e).BackupStatus){case"isBeingPreserved":v("ForbiddenOperation: this applet is currently being backed-up");case"isBeingRestored":v("ForbiddenOperation: this applet is currently being restored from its backup");case"isBeingRemoved":v("ForbiddenOperation: the backup of this applet is currently being removed")}}function Se(t,n){e.expectName("master name",t);var r=Qe[t];function o(e){e.split(" ").forEach((function(e){var t=r[e];null!=t&&(I(t)&&""!==t||D(t)&&t.length>0)&&(i[e]=t)}))}null==r&&v("NoSuchMaster: no master named "+Rn(t)+" found");var i={};o("Name Version Category Resources Template Classes Styles Script Properties");var a=[];for(var l in r.undesignablePropertySet)a.push(l);return i.undesignableProperties=a.join(" "),"withPendingSettings"===n&&o("pendingResources pendingTemplate pendingClasses pendingStyles pendingScript"),'<script type="application/wat-master">\n'+JSON.stringify(i)+"\n<\/script>"}function Pe(e,t,r){function o(t){switch(e.trigger(t),e.Category){case"Applet":e.CardList.forEach((function(e){return e.trigger(t)}))(e).OverlayList.forEach((function(e){return e.trigger(t)}));break;case"Card":case"Overlay":case"Compound":e.ComponentList.forEach((function(e){return e.trigger(t)}))}}o("before-serialization"),t&&function e(t){var r=zt.get(t[0]);t.attr("data-wat-unique-id",qt.get(r).uniqueId),t.children(".WAT.Card,.WAT.Overlay,.WAT.Control,.WAT.Compound").toArray().forEach((function(){e(n.default(this))}))}(e.Peer);var i=e.Peer[0].outerHTML;return t&&function e(t){t.attr("data-wat-unique-id",null),t.children(".WAT.Card,.WAT.Overlay,.WAT.Control,.WAT.Compound").toArray().forEach((function(){e(n.default(this))}))}(e.Peer),o("after-serialization"),i}function Te(e){nt("serialization",e);var t,n,r=[],o=[],i=[],a=[],l=[],s=[];return Z(e,{processStartTag:function(e,o,i,a){if(a)switch(e){case"link":"stylesheet"===K("rel",o)&&X(K("href",o))?r.push(te(e,o,i)):v('InvalidSerialization: invalid "link" element encountered');break;case"style":var l=K("type",o);null==l||"text/css"===l?(t="literalStyle",n=te(e,o,!1)):v('InvalidSerialization: invalid "style" element encountered');break;case"script":switch(K("type",o)){case"application/wat-master":t="Master",n=te(e,o,!1);break;case"application/javascript":case"text/javascript":t=null==K("src",o)?"literalScript":"externalScript",n=te(e,o,!1);break;default:v('InvalidSerialization: invalid "script" element encountered')}break;case"div":var s=K("class",o)||"";if(/(^|\s)WAT(\s|$)/.test(s)){switch(!0){case/(^|\s)Applet(\s|$)/.test(s):t="Applet";break;case/(^|\s)Card(\s|$)/.test(s):t="Card";break;case/(^|\s)Overlay(\s|$)/.test(s):t="Overlay";break;case/(^|\s)(Control|Compound)(\s|$)/.test(s):t="Component";break;default:v('InvalidSerialization: invalid "div" element encountered')}n=te(e,o,!1)}else v('InvalidSerialization: invalid "div" element encountered');default:v('InvalidSerialization: invalid "'+e.toLowerCase()+'" element encountered')}else void 0!==n&&(n+=te(e,o,i))},processEndTag:function(e,u){if(u){switch(n+="</"+e+">",e){case"style":r.push(n);break;case"script":switch(t){case"Master":o.push(n);break;case"literalScript":case"externalScript":r.push(n)}break;case"div":switch(n+="</"+e+">",t){case"Applet":i.push(n);break;case"Card":a.push(n);break;case"Overlay":l.push(n);break;case"Component":s.push(n)}}t=n=void 0}else void 0!==n&&(n+="</"+e+">")},processText:function(e,t){void 0!==n&&(n+=e)}}),{serializedResources:r,serializedMasters:o,serializedApplets:i,serializedCards:a,serializedOverlays:l,serializedComponents:s}}function Me(e){var t;nt("serialization",e);try{t=JSON.parse(e)}catch(e){v("InvalidSerialization: the given serialized master does not contain a master specification")}return Ke(t)}function Ee(e,t,r){var o=Te(e),i=o.serializedMasters,a=o.serializedApplets;if(0===a.length&&v("InvalidSerialization: the given serialization does not contain any applets"),a.length>1&&v("InvalidSerialization: the given serialization contains multiple applets"),gn&&!xn)t.html("");else{var l=$t(t[0]);l.CardList.forEach((function(e){return e.remove()})),l.OverlayList.forEach((function(e){return e.remove()})),t.html(""),qt.delete(l)}if(i.length>0){var s=[];i.forEach((function(e){return s.push(Me(e))})),s.forEach((function(e){ht(e.Name)||vt(e)}))}for(var u=n.default(a[0])[0],c=t[0];u.hasChildNodes();)c.appendChild(u.firstChild);for(var f=u.attributes,d=0,p=f.length;d<p;d++){var h=f[d].name;switch(h){case"id":case"class":case"style":break;default:t.attr(h,f[d].value)}}var m=u.style;for(var g in m)switch(g){case"display":case"position":case"left":case"width":case"right":case"top":case"height":case"bottom":break;default:m.hasOwnProperty(g)&&t.css(g,m[g])}Kt(t,"Applet")}function Ne(e,t,r){var o=n.default(e),i=t.CardAtIndex(r);return null==i?t.Peer.append(o):o.insertBefore(i.Peer),Kt(o,"Card")}function Be(e,t,r){var o=n.default(e),i=t.OverlayAtIndex(r);return null==i?t.Peer.append(o):o.insertBefore(i.Peer),Kt(o,"Overlay")}function Ve(e,t,r){var o=n.default(e),i=t.ComponentAtIndex(r);return null==i?t.Peer.append(o):o.insertBefore(i.Peer),Kt(o,"Component")}e.AppletsMayBePreserved=ye,e.AppletMayBePreserved=function(t){return e.expectApplet("applet",t),ye()&&B(t.Name)&&null!=Jt(t)&&null==Jt(t).BackupStatus},e.AppletHasBackup=xe,e.preserveApplet=function(t){return i(this,void 0,void 0,(function(){var r,o,i,l;return a(this,(function(a){switch(a.label){case 0:e.expectApplet("applet",t),Oe(t),r=Jt(t),a.label=1;case 1:return a.trys.push([1,3,,4]),o=t.Name.startsWith("#")?t.Name.slice(1):t.Name,r.BackupStatus="isBeingPreserved",i=function(e,t,r,o,i){var a="";if(o||i){null==o&&(o="withUsedMasters");var l=void 0;if(l="withUsedMasters"===o?function(e,t){var n=Object.create(null);function r(e){switch(n[e.Master]=!0,e.Category){case"Applet":e.CardList.forEach((function(e){return r(e)}))(e).OverlayList.forEach((function(e){return r(e)}));break;case"Card":case"Overlay":case"Compound":e.ComponentList.forEach((function(e){return r(e)}))}}e.forEach((function(e){return r(e)})),t&&(delete n.plainApplet,delete n.plainCard,delete n.plainOverlay,delete n.plainControl,delete n.plainCompound);var o=[];for(var i in n)o.push(i);return o}(e,"withoutIntrinsics"):function(){var e=Object.create(null);n.default('script[type="application/wat-master"]').each((function(){try{var t=Ze(n.default(this)).Name;B(t)&&t in Qe&&(e[t]=t)}catch(e){}}));var t=[];for(var r in e)t.push(r);return t}(),i){var s=[];l.forEach((function(e){var t=Qe[e];null!=t&&null!=t.Resources&&s.push(t.Resources)})),s.length>0&&(a+=(fe=[],s.forEach((function(e){return me(e,"collect")})),function(){for(var e="",t=0,n=fe.length;t<n;t++)e+=fe[t].outerHTML+"\n";return e}()+"\n"))}a+=function(e,t){var n=[];return e.forEach((function(e){e in Qe&&n.push(Se(e,t))})),n.join("\n")}(l,r)+"\n"}return e.forEach((function(e){return a+=Pe(e,t)})),a}([t],void 0,"withPendingSettings","withAllMasters"),[4,ge.setItem(o,i)];case 2:return a.sent(),delete r.BackupStatus,[3,4];case 3:return l=a.sent(),delete r.BackupStatus,console.error('applet "'+t.Name+" could not be preserved, reason: ",l),v("applet could not be preserved (see browser console)"),[3,4];case 4:return[2]}}))}))},e.restoreApplet=function(t,n){return i(this,void 0,void 0,(function(){var n,r,o,i,l;return a(this,(function(a){switch(a.label){case 0:e.expectApplet("applet",t),n=t.Name,Oe(t),o=Jt(t),a.label=1;case 1:return a.trys.push([1,3,,4]),i=n.startsWith("#")?n.slice(1):n,o.BackupStatus="isBeingRestored",[4,ge.getItem(i)];case 2:return r=a.sent(),delete o.BackupStatus,[3,4];case 3:return l=a.sent(),delete o.BackupStatus,console.error('applet "'+n+" could not be restored, reason: ",l),v("applet could not be restored (see browser console)"),[3,4];case 4:return Ee(r,t.Peer),[2]}}))}))},e.removeBackupOfApplet=function(t){return i(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:e.expectApplet("applet",t),Oe(t),n=Jt(t),i.label=1;case 1:return i.trys.push([1,3,,4]),r=t.Name.startsWith("#")?t.Name.slice(1):t.Name,n.BackupStatus="isBeingRemoved",[4,ge.removeItem(r)];case 2:return i.sent(),delete n.BackupStatus,[3,4];case 3:return o=i.sent(),delete n.BackupStatus,console.error('applet "'+t.Name+" could not be removed, reason: ",o),v("applet could not be removed (see browser console)"),[3,4];case 4:return[2]}}))}))},e.serializedMaster=Se,e.parsedSerialization=Te,e.deserializedMaster=Me,e.AppletDeserializedFrom=function(t,n){e.expectApplet("applet",t),nt("serialization",n);var r=t.Peer;return Ee(n,r),$t(r[0])},e.deserializeCardInto=function(t,n,r){nt("card serialization",t),e.expectApplet("applet",n),_e("card index",r),Ne(t,n,r)},e.deserializeOverlayInto=function(t,n,r){nt("overlay serialization",t),e.expectApplet("applet",n),_e("overlay index",r),Be(t,n,r)},e.deserializeComponentInto=function(t,n,r){nt("component serialization",t),e.expectContainer("container",n),_e("component index",r),Ve(t,n,r)};var Le="\n    uniqueId Id Name Label Category Master ErrorInfo mayBeDesigned mayBeDeleted\n    Classes isVisible isEnabled Value Script pendingScript pendingScriptError\n    TabIndex PointerSensitivity Overflows TextOverflow Opacity\n    x y Width Height Position Size Geometry GeometryOnDisplay\n    horizontalAnchoring verticalAnchoring horizontalOffsets verticalOffsets\n    minWidth maxWidth minHeight maxHeight\n    FontFamily FoltSize FontWeight FontStyle TextDecoration TextShadow\n    TextAlignment ForegroundColor Color BackgroundColor BackgroundTexture\n    BorderWidths BorderColors BorderStyles BorderRadii BoxShadow\n    Cursor customCursor\n  ".trim().replace(/\s+/g," ").split(" "),Fe=Object.create(null);function De(t,n){Wt(t,n);var r=n.Identifier;R(r)||v("InvalidArgument: invalid property name "+Rn(r)),Re(r);var o=n.Label;switch(!0){case null==o:o=r;break;case E(o):o=o.trim()||r;break;default:v("InvalidArgument: the label of property "+Rn(r)+" does not consist of a single line of text")}var i=n.EditorType;switch(!0){case null==i:v("InvalidArgument: missing editor type for property "+Rn(r));case!J(i,e.WAT_PropertyEditorTypes):v("InvalidArgument: invalid editor type given for property "+Rn(r))}var a,l={Identifier:r,Label:o,EditorType:i};switch(i){case"checkbox":break;case"choice":l.FalseValue=lt('label for value "false"',n.FalseValue),l.TrueValue=lt('label for value "true"',n.TrueValue);break;case"textline-input":case"password-input":case"email-address-input":case"phone-number-input":case"url-input":case"search-input":null!=n.minLength&&(l.minLength=ke("minimal input length",n.minLength,0)),null!=n.maxLength&&(l.maxLength=ke("maximal input length",n.maxLength,0)),null!=n.multiple&&"email-address-input"===i&&(l.multiple=ue("multi-value flag",n.multiple)),null!=n.Pattern&&(l.Pattern=lt("input pattern",n.Pattern));break;case"number-input":null!=n.minValue&&(l.minValue=pe("minimal allowed value",n.minValue)),null!=n.maxValue&&(l.maxValue=pe("maximal allowed value",n.maxValue)),null!=n.StepValue&&("any"===n.StepValue?l.StepValue="any":l.StepValue=Ae("step value",n.StepValue,0,1/0,!1));break;case"time-input":a=/^[0-9]{2}:[0-9]{2}$/;case"date-time-input":a=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/;case"date-input":a=a||/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;case"month-input":a=a||/^[0-9]{4}-[0-9]{2}$/;case"week-input":a=a||/^[0-9]{4}-W[0-9]{2}$/,null!=n.minValue&&(l.minValue=Ye("minimal allowed value",n.minValue,a)),null!=n.maxValue&&(l.maxValue=Ye("maximal allowed value",n.maxValue,a)),null!=n.StepValue&&("any"===n.StepValue?l.StepValue="any":l.StepValue=ke("step value",n.StepValue,0));break;case"color-input":break;case"drop-down":l.ValueList=Ut("list of allowed values",n.ValueList);for(var s=0,u=l.ValueList.length;s<u;s++)E(l.ValueList[s])||v("InvalidArgument: element #"+(s+1)+" of the list of foreseen drop-down values is not a valid line of text");break;case"slider":null!=n.minValue&&(l.minValue=pe("minimal allowed value",n.minValue)),null!=n.maxValue&&(l.maxValue=pe("maximal allowed value",n.maxValue)),null!=n.StepValue&&("any"===n.StepValue?l.StepValue="any":l.StepValue=Ae("step value",n.StepValue,0,1/0,!1));break;case"text-input":case"html-input":case"css-input":case"javascript-input":case"json-input":null!=n.minLength&&(l.minLength=ke("minimal input length",n.minLength,0)),null!=n.maxLength&&(l.maxLength=ke("maximal input length",n.maxLength,0))}return l}function Re(e){e in Xe&&v("InvalidArgument: forbidden property name "+Rn(e))}function Ue(t,n,r){e.expectIdentifier("property name",n),st("property getter",r);var o=Q(t,n);null==o?o={get:r,set:function(){q(n)},configurable:!0,enumerable:!0}:("function"==typeof o.value&&v("InvalidProperty: method "+Rn(n)+" must not be redefined as a property"),0==o.configurable&&v("InvalidProperty: property "+Rn(n)+" cannot be redefined"),delete o.value,delete o.writable,o.get=r,o.set=o.set||function(){q(n)}),Object.defineProperty(t,n,o)}function $e(t,n,r){e.expectIdentifier("property name",n),st("property setter",r);var o=Q(t,n);null==o?o={get:function(){G(n)},set:r,configurable:!0,enumerable:!0}:("function"==typeof o.value&&v("InvalidProperty: method "+Rn(n)+" must not be redefined as a property"),0==o.configurable&&v("InvalidProperty: property "+Rn(n)+" cannot be redefined"),delete o.value,delete o.writable,o.get=o.get||function(){G(n)},o.set=r),Object.defineProperty(t,n,o)}function He(e){var t=Gt(e);return{x:t[0].offsetLeft,Width:t[0].offsetWidth,y:t[0].offsetTop,Height:t[0].offsetHeight}}function qe(e,t,n,r,o){var i,a,l,s,u,c,f,d,p=Gt(e),h={};function v(e){Object.assign(h,e)}if(null==t&&null==r||(i=Je(e),a=Math.round(p[0].offsetLeft),l=Math.round(p[0].offsetWidth)),null!=t){s="left-width"===i?NaN:p.parent()[0].offsetWidth-a-l;var m=(t=Math.round(t))-a;switch(i){case"left-width":v({left:t+"px"});break;case"width-right":v({right:s-m+"px"});break;case"left-right":v({left:t+"px",right:s-m+"px"})}}if(null!=r&&(r=Math.round(r),v("left-right"===i?{right:(s=null!=h.right?parseFloat(h.right):p.parent()[0].offsetWidth-a-l)-(r-l)+"px"}:{width:r+"px"})),null==n&&null==o||(u=Ge(e),c=Math.round(p[0].offsetTop),f=Math.round(p[0].offsetHeight)),null!=n){d="top-height"===u?NaN:p.parent()[0].offsetHeight-c-f;var g=(n=Math.round(n))-c;switch(u){case"top-height":v({top:n+"px"});break;case"height-bottom":v({bottom:d-g+"px"});break;case"top-bottom":v({top:n+"px",bottom:d-g+"px"})}}null!=o&&(o=Math.round(o),v("top-bottom"===u?{bottom:(d=null!=h.bottom?parseFloat(h.bottom):p.parent()[0].offsetHeight-c-f)-(o-f)+"px"}:{height:o+"px"})),Hn(h)||rn(e,h)}function Je(e){var t=Gt(e),n=t[0].style.left||"auto",r=t[0].style.right||"auto",o=t[0].style.width||"auto";return"auto"===r?"left-width":"auto"===o?"left-right":"auto"===n?"width-right":(console.error("could not determine horizontal anchors of given Visual\ngot left:"+n+", right:"+r+", width:"+o),"left-width")}function Ge(e){var t=Gt(e),n=t[0].style.top||"auto",r=t[0].style.bottom||"auto",o=t[0].style.height||"auto";return"auto"===r?"top-height":"auto"===o?"top-bottom":"auto"===n?"height-bottom":(console.error("could not determine vertical anchors of given Visual\ngot top:"+n+", bottom:"+r+", height:"+o),"top-height")}Le.forEach((function(e){return Fe[e]=e}));var Qe=Object.create(null);function Ze(e){return Ke(JSON.parse(e.html()))}function Ke(t){Wt("master specification",t);var n=e.expectedName("master name",t.Name);n.startsWith("#")&&v("InvalidImport: the name of a master must not be global");var r=ie(oe(e.allowedSemVer("master version",t.Version)||"0.0.1")),o=Sn("master category",t.Category,e.WAT_Categories),i=tt("master resources",t.Resources);null!=i&&""===i.trim()&&(i=null);var a=tt("pending master resources",t.pendingResources);null!=a&&""===a.trim()&&(a=null);var l=tt("master template",t.Template);null!=l&&""===l.trim()&&(l='<div class="WAT '+n+'"></div>');var s=tt("pending master template",t.pendingTemplate);null!=s&&""===s.trim()&&(s=null);var u=rt(t.Classes),c=it("pending master classes",t.pendingClasses),f=at(t.Styles),d=tt("pending master CSS styles",t.pendingStyles),p=tt("master script",t.Script),h=tt("pending master script",t.pendingScript),m=function(e){if(Dt("list of custom properties",e),null==e||0===e.length)return[];var t=[],n=Object.create(null);return e.forEach((function(e){var r=De("property specification",e);t.push(n[r.Identifier]=r)})),t}(t.Properties),g=function(t){et("list of undesignable properties",t);var n=Object.create(null);if(null==t)return n;return t.trim().replace(/\s+/g," ").split(" ").forEach((function(t){e.allowIdentifier("name of an undesignable property",t),n[t]=t})),n}(t.undesignableProperties),b="plain"+o;if(n!==b)for(var y in Qe[b].undesignablePropertySet)g[y]=y;return{Name:n,Version:r,Category:o,Resources:i,pendingResources:a,Template:l,pendingTemplate:s,Classes:u,pendingClasses:c,Styles:f,pendingStyles:d,Script:p,pendingScript:h,Properties:m,undesignablePropertySet:g,ErrorInfo:void 0,compiledScript:void 0,UsageCount:0}}e.WAT_PropertyEditorTypes=["checkbox","choice","textline-input","password-input","number-input","search-input","phone-number-input","email-address-input","url-input","time-input","date-time-input","date-input","month-input","week-input","color-input","drop-down","slider","text-input","html-input","css-input","javascript-input","json-input"];var Xe=Object.create(null);function rt(e){if(et("master class presets",e),null==e)return[];var t=e.trim().replace(/\s+/g," ").split(" ");return 0===t.length?[]:(t.forEach((function(e){B(e)||v("InvalidSpecification: master specification contains invalid class name "+Rn(e))})),t)}function at(e){var t;if(et("master style presets",e),null!=e&&""!==(e=e.trim())){var n=document.createElement("style");n.textContent="#"+Math.round(9999*Math.random())+" {"+e+"}",document.implementation.createHTMLDocument("").body.appendChild(n);for(var r=(null===(t=n.sheet)||void 0===t?void 0:t.cssRules[0]).style,o=Object.create(null),i=0,a=r.length;i<a;i++){var l=r[i],s=r.getPropertyValue(l);o[l]=s}return o}}function dt(e,t){var n=e.Name;if(ht(n)&&v("ForbiddenRegistration: intrinsic master "+Rn(n)+" must not be replaced"),n in Qe){var r=function(e,t){switch(!0){case function(e,t){return e.major===t.major&&(e.minor||0)===(t.minor||0)&&(e.Patch||0)===(t.Patch||0)&&(e.Build||1)===(t.Build||1)}(e,t):return"sameVersion";case e.major<t.major:return"incompatibleDowngrade";case e.major>t.major:return"incompatibleUpgrade";case 0===e.major&&e.minor<t.minor:return"incompatibleDowngrade";case 0===e.major&&e.minor>t.minor:return"incompatibleUpgrade";case 0===e.major&&e.Patch<t.Patch:return"incompatibleDowngrade";case 0===e.major&&e.Patch>t.Patch:return"compatibleUpgrade";case 0===e.major&&e.Build<t.Build:return"compatibleDowngrade";case 0===e.major&&e.Build>t.Build:return"compatibleUpgrade";case e.minor<t.minor:return"incompatibleDowngrade";case e.minor>t.minor:return"compatibleUpgrade";case e.Patch<t.Patch:return"compatibleDowngrade";case e.Patch>t.Patch:return"compatibleUpgrade";case e.Build<t.Build:return"compatibleDowngrade";case e.Build>t.Build:return"compatibleUpgrade";default:v("InternalError: unforeseen version relationship")}}(e.Version,Qe[n].Version);switch(t[r]){case"perform":return!0;case"ignore":return!1;case"abort":switch(r){case"compatibleDowngrade":v("ForbiddenImport: this import would result in a downgrade of master "+Rn(n));case"incompatibleDowngrade":v("ForbiddenImport: this import would result in an incompatible downgrade of master "+Rn(n));case"sameVersion":v("ForbiddenImport: this import would overwrite master "+Rn(n));case"compatibleUpgrade":v("ForbiddenImport: this import would result in an upgrade of master "+Rn(n));case"incompatibleUpgrade":v("ForbiddenImport: this import would result in an incompatible upgrade of master "+Rn(n))}}return!1}return!0}var pt=Object.create(null);function ht(e){return null!=pt[e]}function vt(e){ht(e.Name)&&v("ForbiddenOperation: an intrinsic master must not be (re-)registered"),e.ErrorInfo=void 0,null!=e.Resources&&he(e.Resources),null!=e.Script&&gt(e.Script,e),e.UsageCount=0;var t=e.Name;Qe[t]=e,xn&&bt(t)}function mt(e){(ht(e)&&v("ForbiddenOperation: an intrinsic master must not be unregistered"),e in Qe)&&(null!=Qe[e].Resources&&ve(Qe[e].Resources),function(e){var t=Qe[e];if(null==t)return;n.default(document.body).off("mousedown mousemove mouseup","."+e),n.default(document.body).off("mouseenter mouseleave","."+e),n.default(document.body).off("keydown keypress keyup","."+e),n.default(document.body).off("input change click","."+e);var r=t.Resources;null!=r&&ve(r)}(e),delete Qe[e],xn&&bt(e))}function gt(e,t){if(delete t.compiledScript,null!=e)try{t.compiledScript=new Function("toGet","toSet","on","off","trigger","$",e)}catch(e){t.ErrorInfo={Title:"Compilation Error",longMessage:"Script of Master "+Rn(t.Name)+" could not be compiled",shortMessage:e.message,Reason:e,Applet:(n=mn().first(),$t(n[0])),Sufferer:t.Name,Property:"Script"}}var n}function bt(e){xn&&n.default(document.body).find('.WAT[data-wat-master="'+e+'"]').each((function(){on($t(this))}))}function yt(t){e.expectName("master name",t);var n=Qe[t];return null==n&&v("NoSuchMaster: a master with the name "+Rn(t)+" does not exist"),n}function xt(t,r,o){void 0===o&&(o=!0),e.expectName("new master name",r),ae("master instance update setting",o);var i=yt(t);t!==r&&(Qe[r],null!=r&&v("MasterExists: a master with the name "+Rn(r)+" exists already"),delete Qe[t],i.Name=r,i.Version.Build=ce(),Qe[r]=i,o?(n.default(document.body).find('.WAT[data-wat-master="'+t+'"]').each((function(){n.default(this).data("wat-master",r)})),xn&&bt(r)):xn&&(bt(t),bt(r)))}function wt(e){return null==e?"":e.join(" ")}function Ct(e){var t="";if(null!=e)for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+"; ");return t}function Ot(t,n){if(e.allowIdentifier("property name",n),n in Xe)return!1;var r=yt(t).Properties;if(null!=r)for(var o=0,i=r.length;o<i;o++){if(r[o].Identifier===n)return!0}return!1}function It(t,n,r){if(e.expectIdentifier("old property identifier",n),e.expectIdentifier("new property identifier",r),Re(n),Re(r),n!==r){var o=At(t,n);o<0&&v("NoSuchProperty: a property with the name "+Rn(n)+" does not exist"),At(t,r)>=0&&v("PropertyExists: a property with the name "+Rn(r)+" exists already"),Qe[t].Properties[o].Identifier=r}}function At(t,n){e.expectIdentifier("property name",n),Re(n);var r=yt(t).Properties;if(null!=r)for(var o=0,i=r.length;o<i;o++)if(r[o].Identifier===n)return o;return-1}function St(e,t){return Jt(e).globalVisualSet[t]}function Pt(e,t){var n=Jt(e).globalVisualSet,r=t.Name;r in n&&v('VisualExists: a visual with the global name "'+r+'" exists already'),n[r]=t}function Tt(e,t){var n=t.Name;delete Jt(e).globalVisualSet[n]}function Mt(e){var t,n,r,o,i,a,l,s,u,c,f,d;function p(){s=!1,c=Object.create(null),f=Object.create(null),d=[]}function h(t){if(r.length>0&&function(e,t){for(var n=0,r=e.length;n<r;n++)x(e[n],t)}(r,t),"#"===t[0]){var o=St(e,t);null!=o&&(n[t]=o.Value)}return n[t]}function g(t,r,o,a){void 0===o&&(o=!1);var h=$n(n[t],r);if(!h||o){if(t in c){if(h)return;throw new Error('CircularDependency: trigger variable "'+t+'" has been changed during an ongoing recalculation')}if(n[t]=r,c[t]=r,"#"===t[0]&&!a){var v=St(e,t);null!=v&&(v.Value=r)}if(function(e){var t=l[e];if(null==t)return;var n=!1;for(var r in t)r in f||(n=!0,f[r]=t[r]);if(!n)return;for(var r in d=[],f)d.push(r);d.sort((function(e,t){var n=i.get(f[e])||0,r=i.get(f[t])||0;switch(!0){case n<r:return-1;case n===r:return 0;default:return 1}}))}(t),!s&&(function(){s=!0,u=void 0;for(;d.length>0;){var e=d.shift(),t=f[e];delete f[e];try{w(t)}catch(e){console.error("error during automatic recalculation of reactive functions",e),u=e}}p()}(),null!=u))throw u}}function b(e,n,r,l){void 0===r&&(r=""),void 0===l&&(l=!1);var s=t.get(n);if(null==s){s="BRE-"+(Et+=1),t.set(n,s);var u=Jt(e).reactiveFunctionList;if(null==u?Jt(e).reactiveFunctionList=[n]:u.push(n),o.set(n,Object.create(null)),i.set(n,0),""!==(r=r.trim().replace(/\s+/g," "))){for(var c=r.split(" "),f=0,d=c.length;f<d;f++)x(n,c[f]);if(!l){var p=o.get(n),h=[];for(var v in p)h.push(v);return void a.set(n,h)}}}w(n)}function y(e,n){var r=t.get(n);if(null!=r){var i=Jt(e).reactiveFunctionList;if(null!=i){var a=i.indexOf(n);a>=0&&i.splice(a,1)}var s=o.get(n);for(var u in s){var c=l[u];delete c[r],Hn(c)&&delete l[u]}}}function x(e,n){var r=o.get(e);if(null==r&&v("InternalError: unregistered function"),!(n in r)){r[n]=!0,i.set(e,(i.get(e)||0)+1);var a=l[n];null==a&&(a=l[n]=Object.create(null));var s=t.get(e);null==s&&v("InternalError: unregistered function"),a[s]=e}}function w(e){var t=void 0,o=a.get(e);if(null!=o){t=Object.create(null);for(var i=0,l=o.length;i<l;i++){var s=o[i];t[s]=n[s]}}r.unshift(e);try{e(t),r.shift()}catch(e){throw r.shift(),e}}return t=new WeakMap,n=Object.create(null),r=[],o=new WeakMap,i=new WeakMap,a=new WeakMap,l=Object.create(null),p(),{$:function(e,t,n,r){switch(arguments.length-1){case 0:v("MissingArgument: reactive variable name or function expected");case 1:if(I(t))return h(t);if(N(t))return b(e,t);break;case 2:if(I(t))return g(t,n,!1);if(N(t)){if(m(n))return 1==n?b(e,t):y(e,t);if(I(n))return b(e,t,n,!1)}break;case 3:if(I(t)&&m(r))return g(t,n,r);if(N(t)&&I(n)&&m(r))return b(e,t,n,r)}v("InvalidArguments: variable name (with opt. value) or function (with opt. variable names) expected")},setReactiveVariable:g,clearReactiveVariable:function(e){delete n[e]},unregisterReactiveFunctionsOfVisual:function(e){var t=Jt(e).reactiveFunctionList;if(null!=t)for(var n=0,r=t.length;n<r;n++)y(e,t[0])}}}"Applet Card Overlay Compound Control".split(" ").forEach((function(e){return pt["plain"+e]=!0})),e.registerMasterFromSerialization=function(e){nt("serialization",e),vt(Ke(JSON.parse(e)))},e.hasMaster=function(t){return e.expectName("master name",t),null!=Qe[t]},e.lacksMaster=function(t){return e.expectName("master name",t),null==Qe[t]},e.createMaster=function(t,n,r,o){e.expectName("master name",t),An("master category",n,e.WAT_Categories),e.allowSemVer("master version",r),et("master template",o),t in Qe&&v("MasterExists: a master with the name "+Rn(t)+" exists already"),vt({Name:t,Category:n,Version:ie(oe(r||"0.0.1")),Template:o||'<div class="WAT '+t+'"></div>',UsageCount:0})},e.DuplicateOfMaster=function(t,n,r){e.expectName("new master name",n),e.allowSemVer("new master version",r),n in Qe&&v("MasterExists: a master with the name "+Rn(n)+" exists already");var o=yt(t),i=Object.assign({},o);return i.Name=n,null!=r&&(i.Version=r),null!=o.Properties&&(i.Properties=[],o.Properties.forEach((function(e){return i.Properties.push(Object.assign({},e))}))),vt(i),i},e.renameMaster=xt,e.NameOfMaster=function(e){return yt(e),e},e.setNameOfMaster=function(e,t){xt(e,t,!0)},e.CategoryOfMaster=function(e){return yt(e).Category},e.VersionOfMaster=function(e){var t,n=yt(e);return(t=n.Version).major+"."+(t.minor||"0")+"."+(t.Patch||"0")+(null==t.Build?"":"."+t.Build.toString(16))},e.setVersionOfMaster=function(e,t){var n,r,o=yt(e),i=ie(oe(t));n=o.Version,r=i,(n.major>r.major||n.major===r.major&&((n.minor||0)>(r.minor||0)||(n.minor||0)===(r.minor||0)&&((n.Patch||0)>(r.Patch||0)||(n.Patch||0)===(r.Patch||0)&&(n.Build||1)>(r.Build||1))))&&v("InvalidArgument: the new version of a master must be greater than the existing one"),o.Version=i,o.Version.Build=ce()},e.ResourcesOfMaster=function(e){return yt(e).Resources},e.pendingResourcesOfMaster=function(e){return yt(e).pendingResources},e.setPendingResourcesOfMaster=function(e,t){et("new master resources",t);var n=yt(e);null==t||""===t.trim()?delete n.pendingResources:n.pendingResources=t},e.activatePendingResourcesOfMaster=function(e){var t=yt(e);mt(e),t.Resources=t.pendingResources,delete t.pendingResources,t.Version.Build=ce(),vt(t)},e.TemplateOfMaster=function(e){return yt(e).Template},e.pendingTemplateOfMaster=function(e){return yt(e).pendingTemplate},e.setPendingTemplateOfMaster=function(e,t){et("new master template",t);var n=yt(e);null==t||""===t.trim()?delete n.pendingTemplate:n.pendingTemplate=t},e.activatePendingTemplateOfMaster=function(e){var t=yt(e);null==t.pendingTemplate?t.Template='<div class="WAT '+e+'"></div>':(t.Template=t.pendingTemplate,delete t.pendingTemplate),t.Version.Build=ce()},e.ClassesOfMaster=function(e){return wt(yt(e).Classes)},e.pendingClassesOfMaster=function(e){return wt(yt(e).pendingClasses)},e.setPendingClassesOfMaster=function(e,t){et("new master classes",t);var n=yt(e);null==t||""===t.trim()?delete n.pendingClasses:n.pendingClasses=rt(t)},e.activatePendingClassesOfMaster=function(e){var t=yt(e);t.Classes=t.pendingClasses,delete t.pendingClasses,t.Version.Build=ce(),bt(e)},e.StylesOfMaster=function(e){return Ct(yt(e).Styles)},e.pendingStylesOfMaster=function(e){return Ct(yt(e).pendingStyles)},e.setPendingStylesOfMaster=function(e,t){et("new master styles",t);var n=yt(e);null==t||""===t.trim()?delete n.pendingStyles:n.pendingStyles=at(t)},e.activatePendingStylesOfMaster=function(e){var t=yt(e);t.Styles=t.pendingStyles,delete t.pendingStyles,t.Version.Build=ce(),bt(e)},e.ScriptOfMaster=function(e){return yt(e).Script},e.pendingScriptOfMaster=function(e){return yt(e).pendingScript},e.setPendingScriptOfMaster=function(e,t){et("new master script",t);var n=yt(e);null==t||""===t.trim()?delete n.pendingScript:n.pendingScript=t},e.activatePendingScriptOfMaster=function(e){var t=yt(e);t.ErrorInfo=void 0,gt(t.pendingScript,t),null==t.ErrorInfo?(t.Script=t.pendingScript,delete t.pendingScript,t.Version.Build=ce(),bt(e)):(t.ErrorInfo=void 0,gt(t.Script,t),null!=t.ErrorInfo&&bt(e))},e.PropertiesOfMaster=function(e){var t=[],n=yt(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++)t.push(Object.assign({},n[r]));return t},e.PropertyNamesOfMaster=function(e){var t=[],n=yt(e).Properties;if(null!=n)for(var r=0,o=n.length;r<o;r++)t.push(n[r].Identifier);return t},e.PropertyOfMaster=function(t,n){e.allowIdentifier("property name",n),Re(n);var r=yt(t).Properties;if(null!=r)for(var o=0,i=r.length;o<i;o++){var a=r[o];if(a.Identifier===n)return Object.assign({},a)}},e.MasterHasProperty=Ot,e.MasterLacksProperty=function(e,t){return!Ot(e,t)},e.insertPropertyOfMasterAt=function(e,t,n){We("insertion index",n);var r=De("property specification",t),o=r.Identifier;At(e,o)>=0&&v("PropertyExists: a property with the name "+Rn(o)+" exists already");var i=Qe[e],a=i.Properties;null==a?i.Properties=[r]:(n=null==n?a.length:Math.min(n,a.length),a.splice(n,0,r))},e.renamePropertyOfMaster=It,e.changePropertyOfMaster=function(t,n,r){e.expectIdentifier("property identifier",n),Re(n);var o=De("property specification",r);n!==o.Identifier&&It(t,n,o.Identifier);var i=At(t,n);Qe[t].Properties[i]=o},e.IndexOfPropertyOfMaster=At,e.PropertyCountOfMaster=function(e){var t=yt(e).Properties;return null==t?0:t.length},e.PropertyOfMasterMayBeMovedUp=function(e,t){return At(e,t)>0},e.PropertyOfMasterMayBeMovedDown=function(e,t){var n=At(e,t);return n>=0&&n<Qe[e].Properties.length-1},e.movePropertyOfMasterToTop=function(e,t){var n=At(e,t);if(n>0){var r=Qe[e].Properties,o=r.splice(n,1)[0];r.unshift(o)}},e.movePropertyOfMasterUp=function(e,t){var n=At(e,t);if(n>0){var r=Qe[e].Properties,o=r.splice(n,1)[0];r.splice(n-1,0,o)}},e.movePropertyOfMasterDown=function(e,t){var n=Qe[e].Properties,r=At(e,t);if(r<n.length-1){var o=n.splice(r,1)[0];n.splice(r+1,0,o)}},e.movePropertyOfMasterToBottom=function(e,t){var n=Qe[e].Properties,r=At(e,t);if(r<n.length-1){var o=n.splice(r,1)[0];n.push(o)}},e.movePropertyOfMasterTo=function(e,t,n){_e("property index",n);var r=At(e,t);if(r<0&&v("NoSuchProperty: a property with the name "+Rn(t)+" does not exist"),r!==n){var o=Qe[e].Properties,i=o.splice(r,1)[0];o.splice(n,0,i)}},e.removePropertyOfMaster=function(e,t){var n=At(e,t);if(n>=0){var r=Qe[e].Properties;r.splice(n,1),0===r.length&&delete Qe[e].Properties}},e.ErrorInfoOfMaster=function(e){return yt(e).ErrorInfo},e.UsageCountOfMaster=function(e){return yt(e).UsageCount},e.Masters=function(){var e=[];for(var t in Qe)e.push(t);return e},e.instantiableMasters=function(){var e=[];for(var t in Qe){"Applet"!==Qe[t].Category&&e.push(t)}return e},e.instantiableLayerMasters=function(){var e=[];for(var t in Qe){var n=Qe[t];"Card"!==n.Category&&"Overlay"!==n.Category||e.push(t)}return e},e.instantiableComponentMasters=function(){var e=[];for(var t in Qe){var n=Qe[t];"Control"!==n.Category&&"Compound"!==n.Category||e.push(t)}return e};var Et=0;function kt(e){if(null!=hn){var t=n.default(e.target).closest(".WAT.Applet");if(0!==t.length){var r=$t(t[0]);null!=r&&hn.layoutsApplet(r)&&(e.stopPropagation(),e.preventDefault())}}}function Bt(t){for(var n,r,o,i,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(I(a[0])&&a[0].startsWith("@")){var s=a.shift().slice(1),u=void 0;"."===s[0]?(e.expectName("tap point master name",s.slice(1)),u=t.Peer.parent().closest(".WAT"+s)):(e.expectUniversalName("tap point name",s),u=t.Peer.parent(".WAT").filter((function(){return $t(this).Name===s}))),u.length>0&&(n=$t(u[0]))}else n=t;if(r=e.expectedName("event name",a.shift()),o=I(a[0])?a.shift():void 0,i=ft("event handler",a.shift()),null!=n){var c=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var a=e[0];if(null!=hn&&hn.layoutsApplet(t.Applet))return a.stopPropagation(),void a.preventDefault();n===t&&null==o&&a.target!==t.Peer[0]||i.apply(t,e)},f=qt.get(t),d=f.EventHandlers;null==d&&(f.EventHandlers=d=[]);for(var p=0,h=d.length;p<h;p++){var v=d[p];if(v.TapPoint===n&&v.EventSelector===o&&v.EventName===r&&v.EventHandler===i)return}d.push({TapPoint:n,EventName:r,EventSelector:o,EventHandler:i,actualHandler:c}),null==o?n.Peer.on(r,c):n.Peer.on(r,o,c)}}function _t(t){for(var n,r,o,i,a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];if(I(a[0])&&a[0].startsWith("@")){var s=a.shift().slice(1),u=void 0;"."===s[0]?(e.expectName("tap point master name",s.slice(1)),u=t.Peer.parent().closest(".WAT"+s)):(e.expectUniversalName("tap point name",s),u=t.Peer.parent(".WAT").filter((function(){return $t(this).Name===s}))),u.length>0&&(n=$t(u[0]))}else n=t;if(r=e.allowedName("event name",a.shift()),o=I(a[0])?a.shift():null,i=ut("event handler",a.shift()),null!=n){var c=qt.get(t),f=c.EventHandlers;if(null!=f){for(var d=f.length-1;d>=0;d--){var p=f[d];if(!(p.TapPoint!==n||null!=r&&p.EventName!==r||p.EventSelector!==o||null!=i&&p.EventHandler!==i)){var h=p.actualHandler;null==p.EventSelector?n.Peer.off(p.EventName,h):n.Peer.off(p.EventName,p.EventSelector,h),f.splice(d,1)}}0===f.length&&delete c.EventHandlers}}}function Vt(t){for(var n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(I(r[0])&&r[0].startsWith("@")){var i=r.shift().slice(1),a=void 0;"."===i[0]?(e.expectName("injection point master name",i.slice(1)),a=t.Peer.parent().closest(".WAT"+i)):(e.expectUniversalName("injection point name",i),a=t.Peer.parent(".WAT").filter((function(){return $t(this).Name===i}))),a.length>0&&(n=$t(a[0]))}else n=t;if(null!=n){var l=r.shift();n.Peer.trigger(l,r)}}function Lt(e){return Jt(e).ErrorInfo}function Ft(e,t){var n=Jt(e);null==t?(delete n.ErrorInfo,n.Peer.children(".WAT-ErrorIndicator").remove()):null==n.ErrorInfo&&(n.ErrorInfo=t,n.Peer.children(".WAT-ErrorIndicator").remove(),n.Peer.append('<button class="WAT-ErrorIndicator"></button>'))}n.default(document.body).on("value-changed",(function(e,t){var n,r=$t(e.target);if(null!=r){var o=r.Name;"#"===(o||"")[0]&&(null===(n=Jt(r.Applet).ReactivityContext)||void 0===n||n.setReactiveVariable(o,t&&t[0],!1,"wasControlValueChange"))}})),n.default(document.body).on("mousedown",kt),n.default(document.body).on("mousemove",kt),n.default(document.body).on("mouseup",kt),n.default(document.body).on("mouseenter",kt),n.default(document.body).on("mouseleave",kt),n.default(document.body).on("keydown",kt),n.default(document.body).on("keypress",kt),n.default(document.body).on("keyup",kt),n.default(document.body).on("input",kt),n.default(document.body).on("change",kt),n.default(document.body).on("click",kt);var Rt=Object.create(null),zt=new WeakMap;function $t(e){return zt.get(e)}function Ht(t){e.expectElement("element",t);var r=zt.get(t);return null!=r?r:null==(t=n.default(t).closest(".WAT")[0])?void 0:zt.get(t)}e.VisualForElement=Ht;var qt=new WeakMap;function Jt(e){return qt.get(e)}function Gt(e){return qt.get(e).Peer}function Qt(e){return $t(e.closest(".WAT.Applet")[0])}function Zt(e,t){var n=e.data("wat-master");return B(n)?n:null==t?"plainVisual":"plain"+t}function Kt(e,t){var r=function(e,t){switch(!0){case e.hasClass("Applet"):return"Applet";case e.hasClass("Card"):return"Card";case e.hasClass("Overlay"):return"Overlay";case e.hasClass("Control"):return"Control";case e.hasClass("Compound"):return"Compound";default:switch(t){case"Applet":return"Applet";case"Layer":case"Card":return"Card";case"Overlay":return"Overlay";case"Component":return e.children(".WAT.Control,.WAT.Compound").length>0?"Compound":"Control";case"Control":return"Control";case"Compound":return"Compound";default:v("BrokenVisual: cannot determine category of given visual")}}}(e,t);if(function(e,t){switch(t){case"Applet":return"Applet"!==e;case"Layer":return"Card"!==e&&"Overlay"!==e;case"Card":return"Card"!==e;case"Overlay":return"Overlay"!==e;case"Component":return"Control"!==e&&"Compound"!==e;case"Control":return"Control"!==e;case"Compound":return"Compound"!==e;default:v("InternalError: unforeseen visual category")}}(r,t)){var o=r;switch(t){case"Layer":r="Card";break;case"Component":r=e.children(".WAT.Control,.WAT.Compound").length>0?"Compound":"Control";default:r=t}var i=en(r,e);return Ft(i,{Title:"Inappropriate Category",longMessage:"This visual belongs to category "+Rn(o)+", which is not allowed here",shortMessage:"inappropriate category "+Rn(o),Applet:Qt(e),Sufferer:i,Property:"Category"}),a(),i}function a(){switch(r){case"Applet":e.children(".WAT.Card,.WAT.Overlay").each((function(){Xt(n.default(this),"Layer")}));break;case"Card":case"Overlay":case"Compound":e.children(".WAT.Control,.WAT.Compound").each((function(){Xt(n.default(this),"Component")}))}}var l=en(r,e),s=Qt(e),u=Zt(e,r),c=Qe[u];if(null==c)return Ft(l,{Title:"No such Master",longMessage:"A visual master called "+Rn(u)+" is not available",shortMessage:"unknown master "+Rn(u),Applet:s,Sufferer:l,Property:"Master"}),a(),l;var f=c.Classes;if(null!=f&&f.forEach((function(t){e.addClass(t)})),c.Category!==r)return Ft(l,{Title:"Inappropriate Master",longMessage:"Master "+Rn(u)+" is not foreseen for category "+Rn(r),shortMessage:"inappropriate master "+Rn(u),Applet:s,Sufferer:l,Property:"Master"}),a(),l;var d=function(e){var t=e.data("wat-master-version");return H(t)?oe(t):void 0}(e);if(null!=d&&!function(e,t){if(null==e.major)return!0;if(e.major!==t.major)return!1;if(null==e.minor)return!0;if(0===t.major){if(e.minor!==t.minor)return!1}else if(e.minor>t.minor)return!1;return null==e.Patch||e.Patch<=t.Patch}(d,c.Version))return Ft(l,{Title:"Inappropriate Version",longMessage:"This visual requires a different version of master "+Rn(u)+" than available",shortMessage:"inappropriate master "+Rn(u),Applet:s,Sufferer:l,Property:"Version"}),a(),l;if(null!=c.ErrorInfo)return Ft(l,c.ErrorInfo),a(),l;"Applet"===r&&0===e.children(".WAT.Card").length&&e.prepend('<div class="WAT Card" data-wat-master="plainCard" style="visibility:visible"></div>');var p=function(e){var t=e.data("wat-name");return V(t)?t:void 0}(e);if(null!=p&&"#"===p[0])try{Pt(s,l)}catch(e){return Ft(l,{Title:"Global name Collision",longMessage:"The global name of this visual "+Rn(p)+" has already been used",shortMessage:"global name collision "+Rn(p),Applet:s,Sufferer:l,Property:"Name"}),a(),l}var h=function(e){var t=e.data("wat-state");if(null==t)return null;try{return JSON.parse(t)}catch(e){return null}}(e);null!=h&&(Jt(l).State=h);var m=function(e){var t=e.data("wat-script");return M(t)?t:void 0}(e);if(null!=c.compiledScript||null!=m){var g=Ue.bind(null,l),b=$e.bind(null,l),y=Bt.bind(null,l),x=_t.bind(null,l),w=Vt.bind(null,l),C=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.unshift(l),null===(e=Jt(s).ReactivityContext)||void 0===e?void 0:e.$.apply(null,t)};if(null!=c.compiledScript)try{c.compiledScript.call(l,g,b,y,x,w,C)}catch(e){return Ft(l,{Title:"Execution Error in Master Script",longMessage:"The script of master "+Rn(u)+" could not be applied to this visual",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Master"}),a(),l}var O=void 0;if(null!=m){try{O=new Function("toGet","toSet","on","off","trigger","$",m)}catch(e){return Ft(l,{Title:"Compilation Error",longMessage:"The script of this visual could not be compiled",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Script"}),a(),l}try{O.call(l,g,b,y,x,w,C)}catch(e){return Ft(l,{Title:"Execution Error in Visual Script",longMessage:"The script of this visual failed",shortMessage:e.message,Reason:e,Applet:s,Sufferer:l,Property:"Script"}),a(),l}}}return a(),l}function Xt(e,t){Kt(e,t)}var Yt=0;function en(e,t){var n,r,o=zt.get(t[0]);if(null==o){var i=t.attr("data-wat-unique-id");if(null!=i){var a=parseInt(i,10);C(a)&&a<Yt&&null==Rt[a]&&(n=a),t.attr("data-wat-unique-id",null)}}else n=qt.get(o).uniqueId;switch(null==n&&(n=tn()),e){case"Applet":r=new sn;break;case"Card":r=new fn;break;case"Overlay":r=new dn;break;case"Control":r=new vn;break;case"Compound":r=new pn;break;default:v("InternalError: unforeseen visual category")}if(zt.set(t[0],r),Rt[n]=r,t.addClass("WAT").addClass(e),qt.set(r,{uniqueId:n,Peer:t}),"Applet"===e){var l=qt.get(r);l.globalVisualSet=Object.create(null),l.ReactivityContext=Mt(r)}return r}function tn(){return++Yt}function nn(e,t,n){var r=Qe[e.Master];if(null!=(null==r?void 0:r.Styles)&&t in r.Styles){var o=r.Styles[t];if("initial"===o)return;n=o}Gt(e).css(t,n)}function rn(e,t){var n=void 0,r=Qe[e.Master];if(null==(null==r?void 0:r.Styles))for(var o in t)t.hasOwnProperty(o)&&null!==t[o]&&(null==n&&(n={}),n[o]=t[o]);else{var i=r.Styles;for(var o in t)t.hasOwnProperty(o)&&!(o in i)&&(null==n&&(n={}),n[o]=t[o])}null!=n&&Gt(e).css(n)}function on(e,t){var n=e.Peer;null!=t&&(Zt(n),n.data("wat-master",t)),e.trigger("prepare-refresh"),an(e),Xt(n,e.Category)}function an(e,t){var n;!function(e){var t=qt.get(e),n=t.EventHandlers;if(null!=n){for(var r=0,o=n.length;r<o;r++){var i=n[r],a=i[0],l=i[1],s=i[2],u=i[3];null==s?a.Peer.off(l,u):a.Peer.off(l,s,u)}delete t.EventHandlers}}(e);var r=e.uniqueId;C(r)&&delete Rt[r];var o=e.Name;null!=o&&"#"===o[0]&&Tt(e.Applet,e),null===(n=Jt(e.Applet).ReactivityContext)||void 0===n||n.unregisterReactiveFunctionsOfVisual(e),t&&e.Peer.children(".WAT.Card,.WAT.Overlay,.WAT.Compound,.WAT.Control").each((function(){an($t(this),t)}))}e.newUniqueId=tn;var ln=function(){function n(){}return Object.defineProperty(n.prototype,"uniqueId",{get:function(){return Jt(this).uniqueId},set:function(e){_e("new unique id",e);var t=Jt(this).uniqueId;switch(!0){case e===t:return;case e>Yt:v("InvalidArgument: forbidden id value given");case null!=Rt[e]:v("InvalidArgument: the given id is not unique")}delete Rt[t],Rt[e]=this,Jt(this).uniqueId=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Peer",{get:function(){return Jt(this).Peer},set:function(e){q("Peer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAttached",{get:function(){return document.body.contains(Jt(this).Peer[0])},set:function(e){q("isAttached")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Id",{get:function(){var e=Gt(this).attr("id");return k(e)?e:void 0},set:function(t){e.allowId("id",t);var n=Gt(this);t!=n.attr("id")&&(null==t?n.attr("id",null):null==document.getElementById(t)?n.attr("id",t):v("InvalidArgument: the given HTML id is not unique"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Name",{get:function(){var e=Gt(this).data("wat-name");return V(e)?e:void 0},set:function(t){var n,r,o,i;e.allowUniversalName("name",t);var a=Gt(this),l=a.data("wat-name");if(t!=l){var s=this.Applet;l.startsWith("#")&&(Tt(s,l),null===(r=null===(n=Jt(this.Applet))||void 0===n?void 0:n.ReactivityContext)||void 0===r||r.clearReactiveVariable(l)),a.data("wat-name",t||null),t.startsWith("#")&&(Pt(s,this),null===(i=null===(o=Jt(this.Applet))||void 0===o?void 0:o.ReactivityContext)||void 0===i||i.setReactiveVariable(t,this.Value))}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Label",{get:function(){var e=Gt(this).data("wat-label");return L(e)?e:void 0},set:function(t){e.allowLabel("label",t),Gt(this).data("wat-label",t||null)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Category",{get:function(){var e=Gt(this);switch(!0){case e.hasClass("Applet"):return"Applet";case e.hasClass("Card"):return"Card";case e.hasClass("Overlay"):return"Overlay";case e.hasClass("Control"):return"Control";case e.hasClass("Compound"):return"Compound";default:v("BrokenVisual: cannot determine category of given visual")}},set:function(e){q("Category")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Master",{get:function(){var e=Gt(this).data("wat-master");if(B(e))return e;v("InvalidVisual: the given visual does not have a master")},set:function(t){if(e.allowName("master",t),null==t)t="plain"+this.Category;else{var n=Qe[t];null!=n&&n.Category!==this.Category&&v("InvalidArgument: the given master is not made for visuals of type "+Rn(this.Category))}var r=Gt(this);t!=r.data("wat-master")&&(r.data("wat-master",t),on(this))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ErrorInfo",{get:function(){return Lt(this)},set:function(e){q("ErrorInfo")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Container",{get:function(){var e=Gt(this).parent(".WAT.Card,.WAT.Overlay,.WAT.Compound");return 0===e.length?void 0:$t(e[0])},set:function(e){q("Container")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layer",{get:function(){var e=Gt(this).parent(".WAT.Card,.WAT.Overlay");return 0===e.length?void 0:$t(e[0])},set:function(e){q("Layer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Applet",{get:function(){var e=Gt(this).closest(".WAT.Applet");return 0===e.length?void 0:$t(e[0])},set:function(e){q("Applet")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mayBeDesigned",{get:function(){return"false"!==this.Peer.data("wat-designability")},set:function(e){se("designability",e),this.Peer.data("wat-designability",!1===e?"false":null)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mayBeDeleted",{get:function(){return"false"!==this.Peer.data("wat-deletability")},set:function(e){se("deletability",e),this.Peer.data("wat-deletability",!1===e?"false":null)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return"hidden"!==this.Peer.css("visibility")},set:function(e){se("visibility",e),nn(this,"visibility",!0===e?"visible":"hidden")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isShown",{get:function(){var e=this.Peer;if(!document.body.contains(e[0]))return!1;for(;e[0]!==document.body;){if("none"===e.css("display")||"hidden"===e.css("visibility"))return!1;e=e.parent()}return!0},set:function(e){q("isShown")},enumerable:!1,configurable:!0}),n.prototype.show=function(){this.isVisible=!0},n.prototype.hide=function(){this.isVisible=!1},Object.defineProperty(n.prototype,"isEnabled",{get:function(){return!this.Peer[0].disabled},set:function(e){se("enabling",e),this.Peer[0].disabled=!e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return this.Peer[0].disabled},set:function(e){se("disabling",e),this.Peer[0].disabled=e},enumerable:!1,configurable:!0}),n.prototype.enable=function(){this.isEnabled=!1},n.prototype.disable=function(){this.isEnabled=!0},Object.defineProperty(n.prototype,"PropertySet",{get:function(){var e=Object.create(null),t=Qe[this.Master];if(null==t)return e;var n=t.Properties;if(null==n)return e;for(var r=0,o=n.length;r<o;r++){var i=n[r];e[i.Identifier]=Object.assign(Object.create(null),i),null!=i.ValueList&&(e[i.Identifier].ValueList=i.ValueList.slice())}return e},set:function(e){q("PropertySet")},enumerable:!1,configurable:!0}),n.prototype.PropertyMayBeDesigned=function(t){e.expectIdentifier("property name",t);var n=Qe[this.Master];return null==(null==n?void 0:n.undesignablePropertySet)||!(t in n.undesignablePropertySet)},Object.defineProperty(n.prototype,"State",{get:function(){return Jt(this).State},set:function(e){null==e?delete Jt(this).State:Jt(this).State=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Value",{get:function(){var e=Jt(this).State;return null==e?void 0:e.Value},set:function(e){var t=Jt(this).State;null==e?null!=t&&delete t.Value:(null==t&&(t=Jt(this).State={}),t.Value=e),this.trigger("value-changed",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Script",{get:function(){return this.Peer.data("wat-script")},set:function(e){q("Script")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pendingScript",{get:function(){return this.Peer.data("wat-pending-script")},set:function(e){et("script",e),this.Peer.data("wat-pending-script",""===(e||"").trim()?null:e)},enumerable:!1,configurable:!0}),n.prototype.activatePendingScript=function(){this.clearPendingScriptError();var e=Jt(this),t=this.pendingScript;if(null==t)""!==(this.Script||"").trim()&&(this.Peer.data("wat-script",null),on(this));else{var n=void 0;try{new Function("toGet","toSet","on","off","trigger","$",t)}catch(t){n={Title:"Compilation Error",longMessage:"pending visual script could not be compiled",shortMessage:t.message,Reason:t,Applet:this.Applet,Sufferer:this,Property:"pendingScript"},e.pendingScriptError=n}null==n&&(this.Peer.data("wat-script",t),this.Peer.data("wat-pending-script",null),on(this))}},Object.defineProperty(n.prototype,"pendingScriptError",{get:function(){return Jt(this).pendingScriptError},set:function(e){q("pendingScriptError")},enumerable:!1,configurable:!0}),n.prototype.clearPendingScriptError=function(){delete Jt(this).pendingScriptError},Object.defineProperty(n.prototype,"Classes",{get:function(){return this.Peer[0].classList.slice().sort().join(" ")},set:function(e){ze("class list",e);for(var t=e.trim().replace(/\s+/g," ").split(" "),n=0,r=t.length;n<r;n++){B(u=t[n])||v("InvalidArgument: invalid class name "+Rn(u)+" given")}var o,i,a=(o=t,i=Object.create(null),o.forEach((function(e){return i[e]=e})),i);a.WAT=!0,a[this.Category]=!0;var l=Qe[this.Master];null!=(null==l?void 0:l.Classes)&&l.Classes.forEach((function(e){return a[e]=!0}));var s=[];for(var u in a)s.push(u);this.Peer[0].className=s.join(" ")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"TabIndex",{get:function(){var e=this.Peer.attr("tabindex");return null==e?void 0:parseInt(e,10)},set:function(e){je("tab index",e,-1,32767),this.Peer.attr("tabindex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"PointerSensitivity",{get:function(){return"none"!==this.Peer.css("pointer-events")},set:function(e){se("pointer sensitivity",e),nn(this,"pointer-events",!0===e?"auto":"none")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Overflows",{get:function(){function e(e){switch(e){case"visible":case"hidden":case"scroll":case"auto":return e;case"clip":return"hidden";case"overlay":default:return"auto"}}var t=this.Peer.css("overflow").split(" "),n=e(t[0]);return[n,e(t[1]||n)]},set:function(t){Dt("list of overflow settings",t),null!=t&&(An("horizontal overflow",t[0],e.WAT_Overflows),An("vertical overflow",t[1],e.WAT_Overflows)),nn(this,"overflow",null==t?null:t.join(" "))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"TextOverflow",{get:function(){return"clip"===this.Peer.css("text-overflow")?"clip":"ellipsis"},set:function(t){On("text overflow",t,e.WAT_TextOverflows),nn(this,"text-overflow",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Opacity",{get:function(){return Math.round(100*parseFloat(this.Peer.css("opacity")))},set:function(e){Ce("opacity",e,0,1),nn(this,"opacity",Math.round(e)+"%")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return He(this).x},set:function(t){e.expectLocation("x coordinate",t),qe(this,t,void 0,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return He(this).y},set:function(t){e.expectLocation("y coordinate",t),qe(this,void 0,t,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Width",{get:function(){return He(this).Width},set:function(t){e.expectDimension("width",t),qe(this,void 0,void 0,t,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Height",{get:function(){return He(this).Height},set:function(t){e.expectDimension("height",t),qe(this,void 0,void 0,void 0,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Position",{get:function(){var e=He(this);return{x:e.x,y:e.y}},set:function(t){Wt("position",t),e.expectLocation("x coordinate",t.x),e.expectLocation("y coordinate",t.y),qe(this,t.x,t.y,void 0,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Size",{get:function(){var e=He(this);return{Width:e.Width,Height:e.Height}},set:function(t){Wt("size",t),e.expectDimension("width",t.Width),e.expectDimension("height",t.Height),qe(this,void 0,void 0,t.Width,t.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Geometry",{get:function(){return He(this)},set:function(t){jt("visual geometry",t),e.expectLocation("x coordinate",t.x),e.expectLocation("y coordinate",t.y),e.expectDimension("width",t.Width),e.expectDimension("height",t.Height),qe(this,t.x,t.y,t.Width,t.Height)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"GeometryOnDisplay",{get:function(){return{x:(e=Gt(this)[0].getBoundingClientRect()).left,Width:e.width,y:e.top,Height:e.height};var e},set:function(e){q("GeometryOnDisplay")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAnchoring",{get:function(){return Je(this)},set:function(t){An("horizontal anchoring",t,e.WAT_horizontalAnchorings),function(e,t){if(Je(e)!==t){var n,r=Gt(e),o=Math.round(r[0].offsetLeft),i=Math.round(r[0].offsetWidth),a=Math.round(r.parent()[0].offsetWidth-o-i);switch(t){case"left-width":n={left:o+"px",width:i+"px",right:"auto"};break;case"width-right":n={left:"auto",width:i+"px",right:a+"px"};break;case"left-right":n={left:o+"px",width:"auto",right:a+"px"};break;default:v("InternalError: unforeseen horizontal anchoring")}rn(e,n)}}(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"verticalAnchoring",{get:function(){return Ge(this)},set:function(t){An("vertical anchoring",t,e.WAT_verticalAnchorings),function(e,t){if(Ge(e)!==t){var n,r=Gt(e),o=Math.round(r[0].offsetTop),i=Math.round(r[0].offsetHeight),a=Math.round(r.parent()[0].offsetHeight-o-i);switch(t){case"top-height":n={top:o+"px",height:i+"px",bottom:"auto"};break;case"height-bottom":n={top:"auto",height:i+"px",bottom:a+"px"};break;case"top-bottom":n={top:o+"px",height:"auto",bottom:a+"px"};break;default:v("InternalError: unforeseen vertical anchoring")}rn(e,n)}}(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"horizontalOffsets",{get:function(){return function(e){var t=Gt(e),n=Math.round(t[0].offsetLeft),r=Math.round(t[0].offsetWidth),o=Math.round(t.parent()[0].offsetWidth-n-r);switch(Je(e)){case"left-width":return[n,r];case"width-right":return[r,o];case"left-right":return[n,o];default:return[n,r]}}(this)},set:function(t){switch(Je(this)){case"left-width":e.allowLocation('"left" offset',t[0]),e.allowDimension('"width" offset',t[1]);break;case"width-right":e.allowDimension('"width" offset',t[0]),e.allowLocation('"right" offset',t[1]);break;case"left-right":e.allowLocation('"left" offset',t[0]),e.allowLocation('"right" offset',t[1])}!function(e,t){switch(Gt(e),Je(e)){case"left-width":null!=t[0]&&nn(e,"left",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"width",Math.round(t[1])+"px");break;case"width-right":null!=t[0]&&nn(e,"width",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"right",Math.round(t[1])+"px");break;case"left-right":null!=t[0]&&nn(e,"left",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"right",Math.round(t[1])+"px")}}(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"verticalOffsets",{get:function(){return function(e){var t=Gt(e),n=Math.round(t[0].offsetTop),r=Math.round(t[0].offsetHeight),o=Math.round(t.parent()[0].offsetHeight-n-r);switch(Ge(e)){case"top-height":return[n,r];case"height-bottom":return[r,o];case"top-bottom":return[n,o];default:return[n,r]}}(this)},set:function(t){switch(Ge(this)){case"top-height":e.allowLocation('"top" offset',t[0]),e.allowDimension('"height" offset',t[1]);break;case"height-bottom":e.allowDimension('"height" offset',t[0]),e.allowLocation('"bottom" offset',t[1]);break;case"top-bottom":e.allowLocation('"top" offset',t[0]),e.allowLocation('"bottom" offset',t[1])}!function(e,t){switch(Ge(e)){case"top-height":null!=t[0]&&nn(e,"top",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"height",Math.round(t[1])+"px");break;case"height-bottom":null!=t[0]&&nn(e,"height",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"bottom",Math.round(t[1])+"px");break;case"top-bottom":null!=t[0]&&nn(e,"top",Math.round(t[0])+"px"),null!=t[1]&&nn(e,"bottom",Math.round(t[1])+"px")}}(this,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minWidth",{get:function(){return parseFloat(this.Peer.css("min-width"))},set:function(t){e.allowDimension("minimal width",t),nn(this,"min-width",Math.round(t)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){var e=this.Peer.css("max-width");return"none"===e?1/0:parseFloat(e)},set:function(t){e.allowDimension("maximal width",t),nn(this,"max-width",t===1/0?"none":Math.round(t)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minHeight",{get:function(){return parseFloat(this.Peer.css("min-height"))},set:function(t){e.allowDimension("minimal height",t),nn(this,"min-height",Math.round(t)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){var e=this.Peer.css("max-height");return"none"===e?1/0:parseFloat(e)},set:function(t){e.allowDimension("maximal height",t),nn(this,"max-height",t===1/0?"none":Math.round(t)+"px")},enumerable:!1,configurable:!0}),n.prototype.coversPointOnDisplay=function(t,n){e.expectLocation("x coordinate",t),e.expectLocation("y coordinate",n);var r=this.GeometryOnDisplay;return t>=r.x&&t<r.x+r.Width&&n>=r.y&&n<r.y+r.Height},Object.defineProperty(n.prototype,"FontFamily",{get:function(){return this.Peer.css("font-family")},set:function(e){ot("font family",e),nn(this,"font-family",e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"FontSize",{get:function(){return parseFloat(this.Peer.css("font-size"))},set:function(t){e.allowDimension("font size",t),nn(this,"font-size",null==t?null:Math.round(t)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"FontWeight",{get:function(){var t=this.Peer.css("font-weight");switch(t){case"lighter":case"normal":case"bolder":case"bold":return t;default:var n=Math.max(1,Math.min(9,Math.round(parseFloat(t)/100)))-1;return e.WAT_FontWeights[n]}},set:function(n){switch(On("font weight",n,e.WAT_FontWeights),n){case null:case void 0:nn(this,"font-weight",null);break;case"lighter":case"normal":case"bolder":case"bold":nn(this,"font-weight",n);break;default:nn(this,"font-weight",t[n])}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"FontStyle",{get:function(){var e=this.Peer.css("font-style");switch(e){case"normal":case"italic":return e;default:return e.startsWith("oblique")?"italic":"normal"}},set:function(t){On("font weight",t,e.WAT_FontStyles),nn(this,"font-style",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"LineHeight",{get:function(){var e=this.Peer.css("line-height");switch(!0){case"normal"===e:return Math.round(1.5*this.FontSize);case e.indexOf("%")>0:return Math.round(100*this.FontSize*parseFloat(e));default:return parseFloat(e)}},set:function(t){e.allowDimension("line height",t),nn(this,"line-height",null==t?null:Math.round(t)+"px")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"TextDecoration",{get:function(){var t=window.getComputedStyle(this.Peer[0]),n=t.textDecorationColor,r=t.textDecorationLine,o=t.textDecorationStyle,i=t.textDecorationThickness;if("none"!==r&&J(r,e.WAT_TextDecorationLines)){var a=parseFloat(i);return{Line:r,Color:Gn(n||"#000000"),Style:J(o,e.WAT_TextDecorationStyles)?o:"solid",Thickness:isNaN(a)?1:Math.round(a)}}return{Line:"none"}},set:function(t){Nt("text decoration",t),null!=t&&(An("text decoration shape",t.Line,e.WAT_TextDecorationLines),Pn("text decoration color",t.Color),An("text decoration style",t.Style,e.WAT_TextDecorationStyles),e.allowDimension("text decoration thickness",t.Thickness)),null==t?rn(this,{"text-decoration-color":void 0,"text-decoration-line":void 0,"text-decoration-style":void 0,"text-decoration-thickness":void 0}):"none"===t.Line?nn(this,"text-decoration-line","none"):rn(this,{"text-decoration-color":null==t.Color?"currentColor":Qn(Gn(t.Color)),"text-decoration-line":t.Line,"text-decoration-style":t.Style,"text-decoration-thickness":null==t.Thickness?"from-font":Math.round(t.Thickness)+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"TextShadow",{get:function(){var e=this.Peer.css("text-shadow");return"none"===e?{xOffset:0,yOffset:0,BlurRadius:0,Color:"#00000000"}:(e=e.replace(/,.*$/,"").split(" "),{xOffset:parseFloat(e[0]),yOffset:parseFloat(e[1]),BlurRadius:parseFloat(e[2]),Color:Gn(e[3])})},set:function(t){if(Nt("text shadow",t),null!=t&&(e.expectLocation("text shadow x offset",t.xOffset),e.expectLocation("text shadow y offset",t.yOffset),e.expectDimension("text shadow blur radius",t.BlurRadius),Mn("text shadow color",t.Color)),null==t)nn(this,"text-shadow",null);else{var n=Gn(t.Color);nn(this,"text-shadow","#00000000"===n?"none":Math.round(t.xOffset)+"px "+Math.round(t.yOffset)+"px "+Math.round(t.BlurRadius)+"px "+Qn(n))}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"TextAlignment",{get:function(){return this.Peer.css("text-align")},set:function(t){On("text alignment",t,e.WAT_TextAlignments),nn(this,"text-align",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ForegroundColor",{get:function(){return Gn(this.Peer.css("color"))},set:function(e){Pn("foreground color",e),nn(this,"color",null==e?null:Gn(e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Color",{get:function(){return this.ForegroundColor},set:function(e){this.ForegroundColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BackgroundColor",{get:function(){return Gn(this.Peer.css("background-color"))},set:function(e){Pn("background color",e),nn(this,"background-color",null==e?null:Gn(e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BackgroundTexture",{get:function(){var e=window.getComputedStyle(this.Peer[0]),t=e.backgroundImage,n=e.backgroundPosition,r=e.backgroundSize,o=e.backgroundRepeat,i={ImageURL:"",Mode:"normal",xOffset:0,yOffset:0};"none"!==t&&(i.ImageURL=t.slice(5,t.length-2));var a=n.split(" ");if(a[0].endsWith("px")&&(i.xOffset=Math.round(parseFloat(a[0]))),a[1].endsWith("px")&&(i.yOffset=Math.round(parseFloat(a[1]))),"no-repeat"===o)switch(r){case"contain":case"cover":i.Mode=r;break;case"100% 100%":i.Mode="fill"}else i.Mode="tile";return i},set:function(t){if(Nt("background texture",t),null!=t&&(Vn("background image url",t.ImageURL),An("background image mode",t.Mode,e.WAT_BackgroundModes),e.expectLocation("background image x offset",t.xOffset),e.expectLocation("background image y offset",t.yOffset)),null==t)rn(this,{"background-image":void 0,"background-position":void 0,"background-size":void 0,"background-repeat":void 0});else{var n=void 0;switch(t.Mode){case"contain":case"cover":n=t.Mode;break;case"fill":n="100% 100%";break;case"tile":n="auto auto"}rn(this,{"background-image":'url("'+t.ImageURL+'")',"background-position":Math.round(t.xOffset)+"px "+Math.round(t.yOffset)+"px","background-size":n,"background-repeat":"tile"===t.Mode?"repeat":"no-repeat"})}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BorderWidths",{get:function(){var e=this.Peer;return[parseFloat(e.css("border-top-width")),parseFloat(e.css("border-right-width")),parseFloat(e.css("border-bottom-width")),parseFloat(e.css("border-left-width"))]},set:function(t){Dt("list of border widths",t),null!=t&&(e.expectDimension("top border width",t[0]),e.expectDimension("right border width",t[1]),e.expectDimension("bottom border width",t[2]),e.expectDimension("left border width",t[3])),rn(this,null==t?{"border-top-width":void 0,"border-right-width":void 0,"border-bottom-width":void 0,"border-left-width":void 0}:{"border-top-width":Math.round(t[0])+"px","border-right-width":Math.round(t[1])+"px","border-bottom-width":Math.round(t[2])+"px","border-left-width":Math.round(t[3])+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BorderColors",{get:function(){var e=this.Peer;return[Gn(e.css("border-top-color")),Gn(e.css("border-right-color")),Gn(e.css("border-bottom-color")),Gn(e.css("border-left-color"))]},set:function(e){Dt("list of border colors",e),null!=e&&(Mn("top border color",e[0]),Mn("right border color",e[1]),Mn("bottom border color",e[2]),Mn("left border color",e[3])),rn(this,null==e?{"border-top-color":void 0,"border-right-color":void 0,"border-bottom-color":void 0,"border-left-color":void 0}:{"border-top-color":e[0],"border-right-color":e[1],"border-bottom-color":e[2],"border-left-color":e[3]})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BorderStyles",{get:function(){function t(t){return J(t,e.WAT_BorderStyles)?t:"none"}var n=this.Peer;return[t(n.css("border-top-style")),t(n.css("border-right-style")),t(n.css("border-bottom-style")),t(n.css("border-left-style"))]},set:function(t){Dt("list of border styles",t),null!=t&&(An("top border style",t[0],e.WAT_BorderStyles),An("right border style",t[1],e.WAT_BorderStyles),An("bottom border style",t[2],e.WAT_BorderStyles),An("left border style",t[3],e.WAT_BorderStyles)),rn(this,null==t?{"border-top-style":void 0,"border-right-style":void 0,"border-bottom-style":void 0,"border-left-style":void 0}:{"border-top-style":t[0],"border-right-style":t[1],"border-bottom-style":t[2],"border-left-style":t[3]})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BorderRadii",{get:function(){var e=this.Peer;return[parseFloat(e.css("border-top-left-radius")),parseFloat(e.css("border-top-right-radius")),parseFloat(e.css("border-bottom-right-radius")),parseFloat(e.css("border-bottom-left-radius"))]},set:function(t){Dt("list of border radii",t),null!=t&&(e.expectDimension("top-left border radius",t[0]),e.expectDimension("top-right border radius",t[1]),e.expectDimension("bottom-right border radius",t[2]),e.expectDimension("bottom-left border radius",t[3])),null==t?nn(this,"border-radius",null):rn(this,{"border-top-left-radius":Math.round(t[0])+"px","border-top-right-radius":Math.round(t[1])+"px","border-bottom-right-radius":Math.round(t[2])+"px","border-bottom-left-radius":Math.round(t[3])+"px"})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"BoxShadow",{get:function(){var e=this.Peer.css("box-shadow");if("none"===e)return{isInset:!1,xOffset:0,yOffset:0,BlurRadius:0,SpreadRadius:0,Color:"#00000000"};var t="inset"===(e=e.replace(/,.*$/,"").split(" "))[0];return t&&e.shift(),{isInset:t,xOffset:parseFloat(e[0]),yOffset:parseFloat(e[1]),BlurRadius:parseFloat(e[2]),SpreadRadius:parseFloat(e[3]),Color:Gn(e[4])}},set:function(t){Nt("box shadow",t),null!=t&&(se("box shadow direction",t.isInset),e.expectLocation("box shadow x offset",t.xOffset),e.expectLocation("box shadow y offset",t.yOffset),e.expectDimension("box shadow blur radius",t.BlurRadius),e.expectDimension("box shadow spread radius",t.SpreadRadius),Mn("box shadow color",t.Color)),null==t?nn(this,"box-shadow",null):"#00000000"===Gn(t.Color)?nn(this,"box-shadow","none"):nn(this,"box-shadow",(t.isInset?"inset ":"")+Math.round(t.xOffset)+"px "+Math.round(t.yOffset)+"px "+Math.round(t.BlurRadius)+"px "+Math.round(t.SpreadRadius)+"px "+Qn(Gn(t.Color)))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Cursor",{get:function(){var e=this.Peer.css("cursor");return e.indexOf(",")>0?e.replace(/^.*,\s*/,""):e},set:function(t){if(On("cursor",t,e.WAT_Cursors),null==t)nn(this,"cursor",null);else{var n=this.Peer.css("cursor");nn(this,"cursor",(n.indexOf(",")>0?n.replace(/,[^,]+$/,", "):"")+t)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"customCursor",{get:function(){var e=/^url\(([^\)])\)(\s+\d+)?(\s+\d+)?,/.exec(this.Peer.css("cursor"));if(null!=e){var t=e[1],n=parseFloat(e[2]),r=parseFloat(e[3]);return"'\"".indexOf(t[0])>=0&&(t=t.slice(1,t.length-1)),x(n,0,31)||(n=0),x(r,0,31)||(r=0),{ImageURL:t,xOffset:n,yOffset:r}}},set:function(e){Nt("custom cursor",e),null!=e&&(Vn("custom cursor image url",e.ImageURL),Ie("custom cursor x offset",e.xOffset,0,31),Ie("custom cursor y offset",e.yOffset,0,31));var t=this.Peer.css("cursor"),n=t.indexOf(",")>0?t.replace(/^.*,\s*/,""):t;nn(this,"cursor",null==e?n:'url("'+e.ImageURL+'") '+Math.round(e.xOffset)+"px "+Math.round(e.yOffset)+"px, "+n)},enumerable:!1,configurable:!0}),n.prototype.trigger=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Vt.apply(void 0,l([this],e))},n}();e.WAT_Visual=ln;var sn=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),Object.defineProperty(r.prototype,"Name",{get:function(){var e=Gt(this).data("wat-name");return V(e)?e:void 0},set:function(e){q("Name")},enumerable:!1,configurable:!0}),r.prototype.globalVisual=function(t){if(e.expectUniversalName("global visual name",t),"#"===t[0])return St(this,t);v("InvalidArgument: the given visual name is not a global one")},Object.defineProperty(r.prototype,"isBeingPreserved",{get:function(){return"isBeingPreserved"===Jt(this).BackupStatus},set:function(e){q("isBeingPreserved")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isBeingRestored",{get:function(){return"isBeingRestored"===Jt(this).BackupStatus},set:function(e){q("isBeingRestored")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isBeingRemoved",{get:function(){return"isBeingRemoved"===Jt(this).BackupStatus},set:function(e){q("isBeingRemoved")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CardList",{get:function(){var e=[];return Gt(this).children(".WAT.Card").each((function(){e.push($t(this))})),e},set:function(e){q("CardList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CardLabelList",{get:function(){var e=[];return Gt(this).children(".WAT.Card").each((function(){e.push($t(this).Label)})),e},set:function(e){q("CardLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CardCount",{get:function(){return Gt(this).children(".WAT.Card").length},set:function(e){q("CardCount")},enumerable:!1,configurable:!0}),r.prototype.Card=function(e){switch(!0){case h(e):return e.Applet===this?e:void 0;case C(e):return this.CardAtIndex(e);case B(e):return this.CardNamed(e);default:v("InvalidArgument: card, card name or card index expected")}},r.prototype.CardAtIndex=function(e){return _e("card index",e),this.CardList[e]},r.prototype.CardNamed=function(t){e.expectName("card name",t);var n=void 0;return this.Peer.children(".WAT.Card").each((function(){var e=Ht(this);e.Name===t&&(n=e)})),n},r.prototype.CardLabelled=function(t){e.expectLabel("card label",t);var n=void 0;return this.Peer.children(".WAT.Card").each((function(){var e=Ht(this);e.Label===t&&(n=e)})),n},r.prototype.IndexOfCard=function(e){var t=this.Card(e);return null==t?-1:this.CardList.indexOf(t)},r.prototype.acceptsCardAt=function(e,t){var n=this.IndexOfCard(e);return n>=0?this.CardMayBeShiftedTo(n,t):!((n=null==t?this.CardCount:this.IndexOfCard(t))<0)},r.prototype.acceptsNewCardAt=function(e,t){return"Card"===yt(e).Category&&!((null==t?this.CardCount:this.IndexOfCard(t))<0)},r.prototype.newCardInsertedAt=function(e,t){var n=yt(e);"Card"!==n.Category&&v("InvalidMaster: the given master cannot be used for a (new) card");var r=null==t?this.CardCount:this.IndexOfCard(t);return r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),Ne(n.Template,this,r)},r.prototype.DuplicateOfCard=function(e){var t=this.IndexOfCard(e);return t<0&&v("InvalidArgument: the given card does not exist or is not part of this applet"),Ne(Pe(this.CardList[t]),this,t+1)},r.prototype.CardDeserializedFrom=function(e,t){nt("card serialization",e);var r=null==t?this.CardCount:this.IndexOfCard(t);r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet");var o,i=n.default(e),a=this.CardAtIndex(r);null==a?this.Peer.append(i):i.insertBefore(a.Peer);try{o=Kt(i,"Card")}catch(e){throw i.remove(),e}return this.acceptsCardAt(o,r)||(i.remove(),v("InvalidOperation: the given serialized card must not be inserted into this applet")),o},r.prototype.CardMayBeShiftedUp=function(e){return this.IndexOfCard(e)>0},r.prototype.CardMayBeShiftedDown=function(e){var t=this.IndexOfCard(e);return t>=0&&t<this.CardCount-1},r.prototype.CardMayBeShiftedTo=function(e,t){var n=this.IndexOfCard(e),r=this.IndexOfCard(t);return n>=0&&r>=0&&n!==r},r.prototype.shiftCardUp=function(e){var t,n=this.IndexOfCard(e);if(n<0&&v("InvalidArgument: the given card does not exist or is not part of this applet"),n>0){var r=this.CardAtIndex(n-1);null===(t=this.CardAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},r.prototype.shiftCardDown=function(e){var t,n=this.IndexOfCard(e);if(n<0&&v("InvalidArgument: the given card does not exist or is not part of this applet"),n<this.CardCount-1){var r=this.CardAtIndex(n+1);null===(t=this.CardAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},r.prototype.shiftCardTo=function(e,t){var n=this.IndexOfCard(e);n<0&&v("InvalidArgument: the given card does not exist or is not part of this applet");var r=this.IndexOfCard(t);if(r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.CardAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.CardAtIndex(r);null==i?this.Peer.append(o.Peer):o.Peer.insertAfter(i.Peer)}}},r.prototype.removeCard=function(e){var t=this.Card(e);null!=t&&(an(t,"recursively"),t.Peer.remove(),0===this.CardCount&&this.newCardInsertedAt("plainCard",0).Peer.css("visibility","visible"))},Object.defineProperty(r.prototype,"shownCard",{get:function(){for(var e=this.CardList,t=0,n=e.length;t<n;t++)if(e[t].isVisible)return e[t];return 0===e.length&&(e=[this.newCardInsertedAt("plainCard",0)]),this.showCard(e[0]),e[0]},set:function(e){q("shownCard")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shownCardIndex",{get:function(){for(var e=this.CardList,t=0,n=e.length;t<n;t++)if(e[t].isVisible)return t;return 0===e.length&&(e=[this.newCardInsertedAt("plainCard",0)]),this.showCard(e[0]),0},set:function(e){q("shownCardIndex")},enumerable:!1,configurable:!0}),r.prototype.CardIsShown=function(e){var t=this.IndexOfCard(e);return t>=0&&this.CardAtIndex(t).isVisible},r.prototype.showCard=function(e){var t=this.IndexOfCard(e);if(t<0)v("InvalidArgument: the given card does not exist or is not part of this applet");else{var r=Gt(this.CardAtIndex(t))[0];this.Peer.children(".WAT.Card").each((function(){this===r?n.default(this).css("visibility","visible"):n.default(this).css("visibility","hidden")}))}},r.prototype.showFirstCard=function(){this.showCard(0)},r.prototype.showPrevCard=function(){this.showCard(Math.max(0,this.shownCardIndex-1))},r.prototype.showPreviousCard=function(){this.showCard(Math.max(0,this.shownCardIndex-1))},r.prototype.showNextCard=function(){this.showCard(Math.min(this.shownCardIndex+1,this.CardCount-1))},r.prototype.showLastCard=function(){this.showCard(this.CardCount-1)},Object.defineProperty(r.prototype,"OverlayList",{get:function(){var e=[];return Gt(this).children(".WAT.Overlay").each((function(){e.push($t(this))})),e},set:function(e){q("OverlayList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"OverlayLabelList",{get:function(){var e=[];return Gt(this).children(".WAT.Overlay").each((function(){e.push($t(this).Label)})),e},set:function(e){q("OverlayLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"OverlayCount",{get:function(){return Gt(this).children(".WAT.Overlay").length},set:function(e){q("OverlayCount")},enumerable:!1,configurable:!0}),r.prototype.Overlay=function(e){switch(!0){case g(e):return e.Applet===this?e:void 0;case C(e):return this.OverlayAtIndex(e);case B(e):return this.OverlayNamed(e);default:v("InvalidArgument: overlay, overlay name or overlay index expected")}},r.prototype.OverlayAtIndex=function(e){return _e("card index",e),this.OverlayList[e]},r.prototype.OverlayNamed=function(t){e.expectName("overlay name",t);var n=void 0;return this.Peer.children(".WAT.Overlay").each((function(){var e=Ht(this);e.Name===t&&(n=e)})),n},r.prototype.OverlayLabelled=function(t){e.expectLabel("overlay label",t);var n=void 0;return this.Peer.children(".WAT.Overlay").each((function(){var e=Ht(this);e.Label===t&&(n=e)})),n},r.prototype.IndexOfOverlay=function(e){var t=this.Overlay(e);return null==t?-1:this.OverlayList.indexOf(t)},r.prototype.acceptsOverlayAt=function(e,t){var n=this.IndexOfOverlay(e);return n>=0?this.OverlayMayBeShiftedTo(n,t):!((n=null==t?this.OverlayCount:this.IndexOfOverlay(t))<0)},r.prototype.acceptsNewOverlayAt=function(e,t){return"Overlay"===yt(e).Category&&!((null==t?this.OverlayCount:this.IndexOfOverlay(t))<0)},r.prototype.newOverlayInsertedAt=function(e,t){var n=yt(e);"Overlay"!==n.Category&&v("InvalidMaster: the given master cannot be used for a (new) overlay");var r=null==t?this.OverlayCount:this.IndexOfOverlay(t);return r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),Be(n.Template,this,r)},r.prototype.DuplicateOfOverlay=function(e){var t=this.IndexOfOverlay(e);return t<0&&v("InvalidArgument: the given overlay does not exist or is not part of this applet"),Be(Pe(this.OverlayList[t]),this,t+1)},r.prototype.OverlayDeserializedFrom=function(e,t){nt("overlay serialization",e);var r=null==t?this.OverlayCount:this.IndexOfOverlay(t);r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet");var o,i=n.default(e),a=this.OverlayAtIndex(r);null==a?this.Peer.append(i):i.insertBefore(a.Peer);try{o=Kt(i,"Overlay")}catch(e){throw i.remove(),e}return this.acceptsOverlayAt(o,r)||(i.remove(),v("InvalidOperation: the given serialized overlay must not be inserted into this applet")),o},r.prototype.OverlayMayBeShiftedUp=function(e){return this.IndexOfOverlay(e)>0},r.prototype.OverlayMayBeShiftedDown=function(e){var t=this.IndexOfOverlay(e);return t>=0&&t<this.OverlayCount-1},r.prototype.OverlayMayBeShiftedTo=function(e,t){var n=this.IndexOfOverlay(e),r=this.IndexOfOverlay(t);return n>=0&&r>=0&&n!==r},r.prototype.shiftOverlayUp=function(e){var t,n=this.IndexOfOverlay(e);if(n<0&&v("InvalidArgument: the given overlay does not exist or is not part of this applet"),n>0){var r=this.OverlayAtIndex(n-1);null===(t=this.OverlayAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},r.prototype.shiftOverlayDown=function(e){var t,n=this.IndexOfOverlay(e);if(n<0&&v("InvalidArgument: the given overlay does not exist or is not part of this applet"),n<this.OverlayCount-1){var r=this.OverlayAtIndex(n+1);null===(t=this.OverlayAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},r.prototype.shiftOverlayTo=function(e,t){var n=this.IndexOfOverlay(e);n<0&&v("InvalidArgument: the given overlay does not exist or is not part of this applet");var r=this.IndexOfOverlay(t);if(r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.OverlayAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.OverlayAtIndex(r);null==i?this.Peer.append(o.Peer):o.Peer.insertAfter(i.Peer)}}},r.prototype.removeOverlay=function(e){var t=this.Overlay(e);null!=t&&(an(t,"recursively"),t.Peer.remove())},r.prototype.frontmostOverlayOfClass=function(t){e.expectName("HTML class name",t);var n=this.Peer.children(".WAT.Overlay."+t).last();return n.length>0?$t(n[0]):void 0},r.prototype.bringOverlayToFrontOfClass=function(t,r){e.expectName("HTML class name",r);var o=this.Overlay(t);null==o&&v("InvalidArgument: the given overlay does not exist or is not part of this applet");var i=o.Peer,a=i[0];i.hasClass(r)||v("InvalidArgument: the given overlay does not have class "+Rn(r)+" itself");var l=!1;this.Peer.children(".WAT.Overlay."+r).each((function(){switch(!0){case a===this:l=!0;break;case l:n.default(this).insertBefore(i)}}))},r}(ln);e.WAT_Applet=sn;var un=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),Object.defineProperty(r.prototype,"ComponentList",{get:function(){var e=[];return Gt(this).children(".WAT.Control,.WAT.Compound").each((function(){e.push($t(this))})),e},set:function(e){q("ComponentList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ComponentLabelList",{get:function(){var e=[];return Gt(this).children(".WAT.Control,.WAT.Compound").each((function(){e.push($t(this).Label)})),e},set:function(e){q("ComponentLabelList")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ComponentCount",{get:function(){return Gt(this).children(".WAT.Control,.WAT.Compound").length},set:function(e){q("ComponentCount")},enumerable:!1,configurable:!0}),r.prototype.Component=function(e){switch(!0){case y(e):case w(e):return e.Container===this?e:void 0;case C(e):return this.ComponentAtIndex(e);case B(e):return this.ComponentNamed(e);default:v("InvalidArgument: component, component name or component index expected")}},r.prototype.ComponentAtIndex=function(e){return _e("component index",e),this.ComponentList[e]},r.prototype.ComponentNamed=function(t){e.expectName("component name",t);var n=void 0;return this.Peer.children(".WAT.Control,.WAT.Compound").each((function(){var e=Ht(this);e.Name===t&&(n=e)})),n},r.prototype.ComponentLabelled=function(t){e.expectLabel("component label",t);var n=void 0;return this.Peer.children(".WAT.Control,.WAT.Compound").each((function(){var e=Ht(this);e.Label===t&&(n=e)})),n},r.prototype.IndexOfComponent=function(e){var t=this.Component(e);return null==t?-1:this.ComponentList.indexOf(t)},r.prototype.acceptsComponentAt=function(e,t){var n=this.IndexOfComponent(e);return n>=0?this.ComponentMayBeShiftedTo(n,t):!((n=null==t?this.ComponentCount:this.IndexOfComponent(t))<0)},r.prototype.acceptsNewComponentAt=function(e,t){var n=yt(e);return("Control"===n.Category||"Compound"===n.Category)&&!((null==t?this.ComponentCount:this.IndexOfComponent(t))<0)},r.prototype.newComponentInsertedAt=function(e,t){var n=yt(e);"Control"!==n.Category&&"Compound"!==n.Category&&v("InvalidMaster: the given master cannot be used for a (new) component");var r=null==t?this.ComponentCount:this.IndexOfComponent(t);return r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),Ve(n.Template,this,r)},r.prototype.DuplicateOfComponent=function(e){var t=this.IndexOfComponent(e);return t<0&&v("InvalidArgument: the given component does not exist or is not part of this applet"),Ve(Pe(this.ComponentList[t]),this,t+1)},r.prototype.ComponentDeserializedFrom=function(e,t){nt("component serialization",e);var r=null==t?this.ComponentCount:this.IndexOfComponent(t);r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this container");var o,i=n.default(e),a=this.ComponentAtIndex(r);null==a?this.Peer.append(i):i.insertBefore(a.Peer);try{o=Kt(i,"Component")}catch(e){throw i.remove(),e}return this.acceptsComponentAt(o,r)||(i.remove(),v("InvalidOperation: the given serialized component must not be inserted into this container")),o},r.prototype.ComponentMayBeShiftedUp=function(e){return this.IndexOfComponent(e)>0},r.prototype.ComponentMayBeShiftedDown=function(e){var t=this.IndexOfComponent(e);return t>=0&&t<this.ComponentCount-1},r.prototype.ComponentMayBeShiftedTo=function(e,t){var n=this.IndexOfComponent(e),r=this.IndexOfComponent(t);return n>=0&&r>=0&&n!==r},r.prototype.shiftComponentToTop=function(e){var t=this.IndexOfComponent(e);if(t<0&&v("InvalidArgument: the given component does not exist or is not part of this applet"),t>0){var n=this.ComponentAtIndex(t);this.Peer.prepend(n.Peer)}},r.prototype.shiftComponentUp=function(e){var t,n=this.IndexOfComponent(e);if(n<0&&v("InvalidArgument: the given component does not exist or is not part of this applet"),n>0){var r=this.ComponentAtIndex(n-1);null===(t=this.ComponentAtIndex(n))||void 0===t||t.Peer.insertBefore(r.Peer)}},r.prototype.shiftComponentDown=function(e){var t,n=this.IndexOfComponent(e);if(n<0&&v("InvalidArgument: the given component does not exist or is not part of this applet"),n<this.ComponentCount-1){var r=this.ComponentAtIndex(n+1);null===(t=this.ComponentAtIndex(n))||void 0===t||t.Peer.insertAfter(r.Peer)}},r.prototype.shiftComponentToBottom=function(e){var t=this.IndexOfComponent(e);if(t<0&&v("InvalidArgument: the given component does not exist or is not part of this applet"),t<this.ComponentCount-1){var n=this.ComponentAtIndex(t);this.Peer.append(n.Peer)}},r.prototype.shiftComponentTo=function(e,t){var n=this.IndexOfComponent(e);n<0&&v("InvalidArgument: the given component does not exist or is not part of this applet");var r=this.IndexOfComponent(t);if(r<0&&v("InvalidArgument: the given insertion point does not exist or is not part of this applet"),n!==r){var o=this.ComponentAtIndex(n);if(0===n)this.Peer.prepend(o.Peer);else{n<r&&(r+=1);var i=this.ComponentAtIndex(r);null==i?this.Peer.append(o.Peer):o.Peer.insertAfter(i.Peer)}}},r.prototype.ComponentMayBeRemoved=function(e){return this.IndexOfComponent(e)>=0},r.prototype.removeComponent=function(e){var t=this.Component(e);null!=t&&(an(t,"recursively"),t.Peer.remove())},r}(ln);e.WAT_Container=un;var cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(un);e.WAT_Layer=cn;var fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){return"hidden"!==this.Peer.css("visibility")},set:function(e){se("visibility",e),!0===e?this.Applet.showCard(this):v("InvalidArgument: a card cannot be explicitly hidden, please select another card to be shown instead")},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isVisible=!0},Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){return!1},set:function(e){q("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){return!1},set:function(e){q("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Applet.IndexOfCard(this)},set:function(e){q("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Applet.CardMayBeShiftedUp(this)},set:function(e){q("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Applet.CardMayBeShiftedDown(this)},set:function(e){q("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Applet.CardMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Applet.shiftCardUp(this)},t.prototype.shiftDown=function(){this.Applet.shiftCardDown(this)},t.prototype.shiftTo=function(e){this.Applet.shiftCardTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Applet.CardMayBeRemoved(this)},set:function(e){q("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Applet.removeCard(this)},t}(cn);e.WAT_Card=fn;var dn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),Object.defineProperty(n.prototype,"mayBeDisplaced",{get:function(){return!0},set:function(e){q("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mayBeDeformed",{get:function(){return!0},set:function(e){q("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Index",{get:function(){return this.Applet.IndexOfOverlay(this)},set:function(e){q("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mayBeShiftedUp",{get:function(){return this.Applet.OverlayMayBeShiftedUp(this)},set:function(e){q("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mayBeShiftedDown",{get:function(){return this.Applet.OverlayMayBeShiftedDown(this)},set:function(e){q("mayBeShiftedDown")},enumerable:!1,configurable:!0}),n.prototype.mayBeShiftedTo=function(e){return this.Applet.OverlayMayBeShiftedTo(this,e)},n.prototype.shiftUp=function(){this.Applet.shiftOverlayUp(this)},n.prototype.shiftDown=function(){this.Applet.shiftOverlayDown(this)},n.prototype.shiftTo=function(e){this.Applet.shiftOverlayTo(this,e)},Object.defineProperty(n.prototype,"mayBeRemoved",{get:function(){return this.Applet.OverlayMayBeRemoved(this)},set:function(e){q("mayBeRemoved")},enumerable:!1,configurable:!0}),n.prototype.remove=function(){this.Applet.removeOverlay(this)},n.prototype.showAround=function(t,n,r){void 0===r&&(r="withinViewport"),e.expectLocation("x coordinate",t),e.expectLocation("y coordinate",n),An("positioning constraint",r,["withinApplet","withinViewport"]);var o=this.Applet;if("withinApplet"===r)qe(this,t=Math.max(0,Math.min(t,o.Width-this.Peer[0].offsetWidth)),n=Math.max(0,Math.min(n,o.Height-this.Peer[0].offsetHeight)),void 0,void 0);else{var i=document.body.clientWidth,a=Math.max(window.innerHeight,document.body.clientHeight);t=Math.max(0,Math.min(t,i-this.Peer[0].offsetWidth)),n=Math.max(0,Math.min(n,a-this.Peer[0].offsetHeight));var l=o.GeometryOnDisplay;qe(this,t-l.x,n-l.y,void 0,void 0)}},n.prototype.isFrontmostOfClass=function(e){return this.Applet.frontmostOverlayOfClass(e)===this},n.prototype.bringToFrontOfClass=function(e){this.Applet.bringOverlayToFrontOfClass(e)},n}(cn);e.WAT_Overlay=dn;var pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){var e=this.Container;if(null==e)return!1;var t=Qe[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("left"in n||"width"in n&&"right"in n)||!("top"in n||"height"in n&&"bottom"in n)},set:function(e){q("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){var e=this.Container;if(null==e)return!1;var t=Qe[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("width"in n||"left"in n&&"right"in n)||!("height"in n||"top"in n&&"bottom"in n)},set:function(e){q("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Container.IndexOfComponent(this)},set:function(e){q("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Container.CompoundMayBeShiftedUp(this)},set:function(e){q("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Container.CompoundMayBeShiftedDown(this)},set:function(e){q("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Container.CompoundMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Container.shiftCompoundUp(this)},t.prototype.shiftDown=function(){this.Container.shiftCompoundDown(this)},t.prototype.shiftTo=function(e){this.Container.shiftCompoundTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Container.ComponentMayBeRemoved(this)},set:function(e){q("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Container.removeCompound(this)},t}(un);e.WAT_Compound=pn;var hn,vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"mayBeDisplaced",{get:function(){var e=this.Container;if(null==e)return!1;var t=Qe[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("left"in n||"width"in n&&"right"in n)||!("top"in n||"height"in n&&"bottom"in n)},set:function(e){q("mayBeDisplaced")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeDeformed",{get:function(){var e=this.Container;if(null==e)return!1;var t=Qe[e.Master];if(null==t)return!1;var n=t.Styles||{};return!("width"in n||"left"in n&&"right"in n)||!("height"in n||"top"in n&&"bottom"in n)},set:function(e){q("mayBeDeformed")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.Container.IndexOfComponent(this)},set:function(e){q("Index")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedUp",{get:function(){return this.Container.CompoundMayBeShiftedUp(this)},set:function(e){q("mayBeShiftedUp")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mayBeShiftedDown",{get:function(){return this.Container.CompoundMayBeShiftedDown(this)},set:function(e){q("mayBeShiftedDown")},enumerable:!1,configurable:!0}),t.prototype.mayBeShiftedTo=function(e){return this.Container.CompoundMayBeShiftedTo(this,e)},t.prototype.shiftUp=function(){this.Container.shiftCompoundUp(this)},t.prototype.shiftDown=function(){this.Container.shiftCompoundDown(this)},t.prototype.shiftTo=function(e){this.Container.shiftCompoundTo(this,e)},Object.defineProperty(t.prototype,"mayBeRemoved",{get:function(){return this.Container.ComponentMayBeRemoved(this)},set:function(e){q("mayBeRemoved")},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this.Container.removeCompound(this)},t}(ln);function mn(){return n.default(".WAT.Applet").filter((function(){return 0===n.default(this).parent().closest(".WAT.Applet").length}))}e.WAT_Control=vn,Qe.plainApplet={Name:"plainApplet",Version:ie(oe("1.0.0")),Category:"Applet",Template:'<div class="WAT Applet"></div>',undesignablePropertySet:Object.assign(Object.create(null),{Name:!0,mayBeDeleted:!0,Overflows:!0,x:!0,y:!0,Width:!0,Height:!0,Position:!0,Size:!0,Geometry:!0,horizontalAnchoring:!0,verticalAnchoring:!0,horizontalOffsets:!0,verticalOffsets:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0}),UsageCount:0},Qe.plainCard={Name:"plainCard",Version:ie(oe("1.0.0")),Category:"Card",Template:'<div class="WAT Card"></div>',undesignablePropertySet:Object.assign(Object.create(null),{x:!0,y:!0,Width:!0,Height:!0,Position:!0,Size:!0,Geometry:!0,horizontalAnchoring:!0,verticalAnchoring:!0,horizontalOffsets:!0,verticalOffsets:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0}),UsageCount:0},Qe.plainOverlay={Name:"plainOverlay",Version:ie(oe("1.0.0")),Category:"Overlay",Template:'<div class="WAT Overlay"></div>',UsageCount:0},Qe.plainControl={Name:"plainControl",Version:ie(oe("1.0.0")),Category:"Control",Template:'<div class="WAT Control"></div>',UsageCount:0},Qe.plainCompound={Name:"plainCompound",Version:ie(oe("1.0.0")),Category:"Compound",Template:'<div class="WAT Compound"></div>',UsageCount:0},e.AppletPeersInDocument=mn,e.registerDesigner=function(e){Wt("WAT designer",e),N(e.startDesigning)&&N(e.layoutsApplet)||v("InvalidArgument: the given object is no valid WAT Designer"),null==hn?hn=e:hn!==e&&v("DesignerExists: another WAT Designer has already been registered")};var gn=!1,bn=[];e.ready=function(e){if(ct("function to call",e),gn&&!yn)return e();bn.push(e)};var yn=!1;var xn=!1,wn=[];e.running=function(e){if(ct("function to call",e),xn&&!Cn)return e();wn.push(e)};var Cn=!1;function In(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return gn=!0,function(){console.log("WAT is ready"),yn=!0;for(var e=0;e<bn.length;e++)try{bn[e]()}catch(e){console.error('registered WAT "ready" handler failed with ',e)}yn=!1}(),[4,Tn()];case 1:return e.sent(),xn=!0,function(){console.log("WAT is running"),Cn=!0;for(var e=0;e<wn.length;e++)try{wn[e]()}catch(e){console.error('registered WAT "running" handler failed with ',e)}Cn=!1}(),[2]}}))}))}function Tn(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,mn().toArray().forEach((function(e){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,jn(n.default(e))];case 1:return t.sent(),[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))}function jn(e){return i(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return(n=be)?[4,xe(e)]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return n?[4,we(e)]:[3,4];case 3:return t=r.sent(),[3,5];case 4:t=Kt(e,"Applet"),r.label=5;case 5:return t.trigger("applet-started",t),[2]}}))}))}function En(){var e;n.default(document.body),function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(Xe[t]=t)}e(ln.prototype),e(sn.prototype),e(un.prototype),e(cn.prototype),e(fn.prototype),e(dn.prototype),e(pn.prototype),e(vn.prototype),delete Xe.Value}(),e=!1,n.default('script[type="application/wat-master"]').each((function(){try{var t=Ze(n.default(this));dt(t,{compatibleDowngrade:"ignore",incompatibleDowngrade:"abort",sameVersion:"ignore",compatibleUpgrade:"perform",incompatibleUpgrade:"perform"})&&vt(t)}catch(t){e=!0,console.warn("Error in Master Registration:",t)}})),e&&window.alert("The WAT masters bundled with this document could not be\nregistered without errors - see browser console for details"),n.default(document).off("click",".WAT-ErrorIndicator"),n.default(document).on("click",".WAT-ErrorIndicator",(function(e){var t=$t(n.default(e.target).closest(".WAT")[0]);if(null!=t){var r=Lt(t);null!=r&&(null!=hn&&t.Applet.mayBeDesigned?window.confirm(r.Title+"\n\n"+r.longMessage+(null!=r.Reason?"\n\nReason:\n"+r.Reason:"")+"\n\nDo you want to proceed to the Designer?")&&hn.startDesigning(r.Sufferer,r.Property):window.alert(r.Title+"\n\n"+r.longMessage+(null!=r.Reason?"\n\nReason:\n"+r.Reason:"")))}else alert("WAT Error\n\nCould not find Visual for this Error Indicator")})),be?f.ready((function(){ge=f.createInstance({name:"WAT Applets"}),In()})):In()}d.WAT=Object.assign(e.ready,e),n.default(document.head),"complete"===document.readyState||"interactive"===document.readyState?setTimeout(En,1):window.addEventListener("DOMContentLoaded",En),d.WAT=e}(Zn||(Zn={}))}();
//# sourceMappingURL=webapp-tinkerer-runtime.min.js.map
